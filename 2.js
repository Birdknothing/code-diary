(function(o,p){var q=null;function GetFrom(){var a='game';if(Edbox.Editor){a='editor'}if(Edbox.Lobby){a='lobby'}return a}function Login(){function success(){if(Edbox.Components){Edbox.Components.Start()}if(u.LoggedCallBack){u.LoggedCallBack(u.IsLogin)}}function error(e){if(u.LoggedCallBack)u.LoggedCallBack(u.IsLogin)}function getGameInfo(){if(u.GameId){u.MMO.GetGameInfo(u.GameId,u.Version,u.Access,u.Mode,function(a){if(a){u.ServerInfo=a;pkg=u.GetQueryString("pkg");if(pkg){u.PackageGuid=pkg}else{u.PackageGuid=a.pkg_resid}if(u.Editor){u.Editor.Init(success,error)}else{success()}}else{success()}},error)}else{error("MMO Init Error")}}function bindMessage(){Edbox.Message.AddMessageHandler("JumpBuyGameLink",function(a,b){if(a.length>=3){location.href=a[2]}})}function GetDataConfig(b,c){if(Edbox.PackageGuid){Edbox.Resource.GetConfig("DatasConfig",function(a){if(!a||!a.StaticData||!a.StaticData.Login){if(c)c()}else if(b)b(a)},c)}else c()}function InitLoginIfm(){var a="/coms/Login/index.html";var b=document.createElement("iframe");var c=Edbox.Protocol+"://"+Edbox.GetHost("Component")+a+"?v="+new Date().getTime();b.setAttribute("src",c);b.style.top="0";b.style.left="0";b.style.position="fixed";b.style.width="100%";b.style.height="100%";b.style.borderWidth="0px";b.style.zIndex="9999";document.body.appendChild(b);return b}function onMessage(){function messageCallBack(e){var a=e.data;if(a&&a.Type&&a.Type==="GoToLogin"){var b=a.Datas[0];JumpUrl(b);window.removeEventListener("message",messageCallBack,false)}}window.addEventListener("message",messageCallBack,false)}function Send(a,b,c){if(a){var d={Type:b,Datas:c};a.contentWindow.postMessage(d,"*")}}function JumpUrl(a){var b=u.Protocol+"://"+u.GetHost("Login")+"/edbox.php?c=login";b=u.SetQueryString("lan",u.Language||"SimplifiedChinese",b);b=u.SetQueryString("template",u.Channel.toLowerCase(),b);b=u.SetQueryString("area",u.Area,b);b=u.SetQueryString("from",GetFrom(),b);b=u.SetQueryString("v",new Date().getTime(),b);b=u.SetQueryString("CallbackUrl",location.href,b);b=u.SetQueryString("EdboxArgs",u.GetLoginInfo(),b);if(a)b=u.SetQueryString("mode",a,b);location.href=b}function InitLogin(){if(u.GameId){onMessage();GetDataConfig(function(a){var b=InitLoginIfm();b.onload=function(){Send(b,"DatasConfig",[a.StaticData.Login])}},JumpUrl)}else{JumpUrl()}}function SetIsHtml5Player(){window.addEventListener('message',function(d){var e=d.data;function sendMess(a,b){var c={Type:a,Datas:b};d.source.postMessage(c,"*")}if(e.Type==='CheckIsHtml5Player'){var f=0;if(window.apppage){f=1;Edbox.IsInHtml5Player=f}sendMess("IsHtml5Player",f)}else if(e.Type==="IsHtml5Player"){if(e.Datas===1){Edbox.IsInHtml5Player=e.Datas}}},false);window.top.postMessage({Type:"CheckIsHtml5Player",Datas:''},"*")}SetIsHtml5Player();CheckUserInfo(function(){if(u.IsLogin){bindMessage();ExecutiveHeartbeatPackage();LoginDataCollect();getGameInfo()}else{InitLogin()}})}var r=null;function CheckUserInfo(g){function success(){if(r)r();r=null}if(r){var h=r;r=function(){h();if(g)g()};return}r=function(){if(g)g()};function getEdboxUserInfo(e){if(!u.IsLogin){e();return}function errorBack(a){console.log(a);if(a&&a.status!==0){u.Logout()}e()}function getMMOUserInfo(){u.Action.User.GetUserInfo(function(a){q=a;u.EbUserId=a.user_id;if(!u.UserName||u.UserName.trim().length===0){u.UserName=a.nick_name}if(!u.RealName||u.RealName.trim().length===0){u.RealName=a.real_name}u.UserVipInfo=getVipInfo(a.vip_info);if(e)e()},errorBack)}function getVipInfo(a){var b=new Object;b.vip_level=a.vip_level;b.remain_time=getLimitTime(a.remain_time);b.left_time=a.remain_time;b.current_list=new Array;if(a.current_list&&a.current_list.length>0){for(var i=0;i<a.current_list.length;i++){var c=new Object;var d=a.current_list[i];c.vip_level=d.vip_level;c.remain_time=getLimitTime(d.remain_time);c.left_time=d.remain_time;c.status=d.status;b.current_list.push(c)}}return b}function getLimitTime(a){if(a===-1){a=9999999}var t=new Date(new Date().getTime()+a*3600*1000);return t.getFullYear()+'-'+(t.getMonth()+1)+'-'+t.getDate()}if(Edbox.IsGuest()){u.Action.UC.EbValidCheck(function(){if(e)e()},errorBack);return}u.Action.UC.GetUserInfo(function(a){u.UserName=a.Name;if(a.RealName&&a.RealName!==''){u.RealName=a.RealName}u.Action.User.CreateUserInfo(function(){getMMOUserInfo()},errorBack)},errorBack)}function jumpIntoEdbox(a){u.UCAccountType=a.UCAccountType;u.PersonalAccountId=a.PersonalAccountId;u.AccountId=a.AccountId;u.AccessToken=a.AccessToken;u.MacKey=a.MacKey;u.TimeStamp=a.TimeStamp;u.Avatar=a.Avatar;u.IsLogin=true;u.DataSet.Set("EdboxArgs",u.GetLoginInfo());var b=u.RemoveQueryString("uid");b=u.RemoveQueryString("auth",b);b=u.RemoveQueryString("base64auth",b);history.pushState("Location Change",null,b);getEdboxUserInfo(success)}function errorIntoEdbox(e){getEdboxUserInfo(success);console.log(e)}var j=u.GetQueryString("uid");var k=u.GetQueryString("auth");var l=u.GetQueryString("org");if(!k){var m=u.GetQueryString("base64auth");if(m){k=u.Decode(m)}}var n=u.GetQueryString("sdp-app-id");if(n){u.SDPAppId=n}if(!j||!k){getEdboxUserInfo(success);return}u.Action.UC.ValidCheck(j,k,function(f){u.AccountId=f.AccountId;u.AccessToken=f.AccessToken;u.MacKey=f.MacKey;u.TimeStamp=f.TimeStamp;if(f.UCAccountType==="person"&&l&&l.toLocaleUpperCase()==="E_EDBOX"){u.Action.UC.GetPersonOrgInfo("",function(b){var c=false;var d='';for(var i=0;i<b.items.length;i++){var e=b.items[i];if(e.org_info&&e.org_info.org_code.toLocaleUpperCase()==="E_EDBOX"){c=true;user_id=e.user_id}}if(c){u.Action.UC.Exchange(f.AccessToken,user_id,function(a){jumpIntoEdbox(a)},errorIntoEdbox)}else{u.Action.UC.JoinEdbox(f.PersonalAccountId,function(a){jumpIntoEdbox(a)},errorIntoEdbox)}},errorIntoEdbox)}else{jumpIntoEdbox(f)}},errorIntoEdbox)}function ExecutiveHeartbeatPackage(){if(!u.GameId||!u.Version||!u.IsLogin||u.Mode===3){return}function postOnlineInfo(){if(!u.MMO)return;if(window.location.host.toLowerCase().indexOf("game")<0)return;u.MMO.HeartBeating(null,function(e){console.log(e)})}postOnlineInfo();setInterval(function(){postOnlineInfo()},60*1000)}function LoginDataCollect(){if(u.DataStatistic){u.DataStatistic.Login()}}function jsGetAge(a){var b=a.split("-");var d=new Date();var c=d.getFullYear()-b[0];var e=d.getMonth()+1-b[1];var f=d.getDate()-b[2];var g=e||e===0&&f>0?c:c-1;return g=g>0?g:0}var u={EbUserId:0,UserName:"",RealName:"",AccountId:"",UCAccountType:"",AccountType:"Default",Avatar:"",AccessToken:"",MacKey:"",TimeStamp:0,SDPAppId:"",Access:2,GameId:"",Version:"",Mode:1,PackageGuid:"",Area:"CHN",Language:null,Channel:"Default",IsLogin:false,ServerKey:"CN",ServerInfo:null,DeviceID:"",PreGoEditor:new Array(),GetLoginInfo:function(){function valid(s){if(!s)return false;if(typeof s!=="string")return false;if(s.trim().length>0)return true;return false}var a=new Object();if(u.IsLogin){a.EbUserId=u.EbUserId;a.UserName=u.UserName;a.RealName=u.RealName;a.UCAccountType=u.UCAccountType;a.PersonalAccountId=u.PersonalAccountId;a.AccountId=u.AccountId;a.AccessToken=u.AccessToken;a.MacKey=u.MacKey;a.TimeStamp=u.TimeStamp;if(valid(u.AccountType)){a.AccountType=u.AccountType}}a.Access=u.Access;if(valid(u.GameId)){a.GameId=u.GameId}if(valid(u.Version)){a.Version=u.Version}if(valid(u.SDPAppId)){a.SDPAppId=u.SDPAppId}a.Language=u.Language;a.Area=u.Area;a.Channel=u.Channel;a.AppKey=Edbox.AppKey;return u.Encode(JSON.stringify(a))},LoggedCallBack:function(a){},Start:function(b){if(typeof b==="function"){u.LoggedCallBack=function(a){if(b){b(a)}}}Login()},Logout:function(a,b){u.Api.MMO.Logout(function(){if(a)a()},b);u.IsLogin=false;u.EbUserId=0;u.UserName="";u.RealName="";u.AccountId="";u.UCAccountType="";u.PersonalAccountId="";u.AccountType="Default";u.Avatar="";u.AccessToken="";u.MacKey="";u.TimeStamp=0;u.DataSet.Set("EdboxArgs",u.GetLoginInfo())},GetOrgInfo:function(c,d){if(Edbox.IsGuest()){var e=new Object();e.ID="";e.Name="";if(c)c(e)}else{u.Action.UC.GetUserInfo(function(a){var b=new Object();b.ID=a.OrgID;b.Name=a.OrgName;if(c)c(b)},d)}},GetBirthInfo:function(c,d){if(q===null){u.Action.User.GetUserInfo(function(a){q=a;var b=new Object();b.Birth=q.birthday;b.Age=jsGetAge(q.birthday);if(c)c(b)},d)}else{var e=new Object();e.Birth=q.birthday;e.Age=jsGetAge(q.birthday);if(c)c(e)}},SetLanguage:function(a){if(!a)return;a=a.toLowerCase();if(a==="english"||a==="en"||a==="en-us"){u.Language="English"}else if(a==="traditionalchinese"||a==="hk"||a==="zh-hk"){u.Language="TraditionalChinese"}else if(a==="traditionalchinese_tw"||a==="tw"||a==="zh-tw"){u.Language="TraditionalChinese_TW"}else if(a==="Arabic_EG"||a==="arabic_eg"){u.Language="Arabic_EG"}else{u.Language="SimplifiedChinese"}u.DataSet.Set("EdboxArgs",u.GetLoginInfo())},GotoRegister:function(){var a=u.Protocol+"://"+u.GetHost("Login")+"/edbox.php?c=register";a=u.SetQueryString("lan",u.Language||"SimplifiedChinese",a);a=u.SetQueryString("template",u.Channel.toLowerCase(),a);a=u.SetQueryString("v",new Date().getTime(),a);a=u.SetQueryString("area",Edbox.Area,a);a=u.SetQueryString("from",GetFrom(),a);a=u.SetQueryString("CallbackUrl",location.href,a);a=u.SetQueryString("EdboxArgs",u.GetLoginInfo(),a);location.href=a},AddPreGoEditor:function(a,b){var c=u.PreGoEditor;for(var k=0;k<c.length;++k){if(c[k].type===a){c[k].func=b;return}}u.PreGoEditor=c.concat({type:a,func:b})},GotoEditor:function(g,h){function gotoEditor(){var a=JSON.parse(u.Decode(u.GetLoginInfo()));if(a.Access)delete a.Access;if(a.Version)delete a.Version;if(a.GameId)delete a.GameId;var b=u.Encode(JSON.stringify(a));var c=u.Protocol+"://"+u.GetHost("Login")+"/edbox.php?c=im&a=launch";c=u.SetQueryString("playerid",u.EbUserId,c);c=u.SetQueryString("productid",u.GameId,c);c=u.SetQueryString("accesstype",u.Access,c);c=u.SetQueryString("from",GetFrom(),c);c=u.SetQueryString("EdboxArgs",b,c);location.href=c}function checkPreGoEditor(c,d){d=!d?0:d;if(u.PreGoEditor.length<1){if(g)g()}else{var e=u.PreGoEditor[d];var f=e.func;f(function(a){if(a.ret){d=d+1;if(d>=u.PreGoEditor.length){if(c)c()}else{checkPreGoEditor(c,d)}}else{if(h)h(a.info)}},function(a){var b="Go Editor Error Step is :"+e.type+" ,"+a;if(h)h(b)})}}if(!u.IsLogin){alert(u.GetTip("ERROR_NotLoggedIn"));return}if(!u.GameId){alert(u.GetTip("ERROR_GameIDInvalid"));return}checkPreGoEditor(function(){if(!u.ServerInfo){gotoEditor();return}if(u.Platform.IsIOS&&!u.ServerInfo.web_editor_resid&&!u.ServerInfo.ios_editor_resid){alert(u.GetTip("ERROR_EditorNotSupport"));return}if(u.Platform.IsAndroid&&!u.ServerInfo.web_editor_resid&&!u.ServerInfo.android_editor_resid){alert(u.GetTip("ERROR_EditorNotSupport"));return}gotoEditor()})},GetEditorUrl:function(a,b){if(!u.IsLogin){if(b)b(u.GetTip("ERROR_NotLoggedIn"));return}if(!u.GameId){if(b)b(u.GetTip("ERROR_GameIDInvalid"));return}if(!u.ServerInfo||!u.ServerInfo.web_editor_resid){alert(u.GetTip("ERROR_EditorNotSupport"));return}if(a)a(u.ServerInfo.web_editor_resid)},GotoPreviewGame:function(b){u.GetPreviewGameUrl(function(a){u.WindowEvent.Hide();location.href=a},b)},GetPreviewGameUrl:function(b,c){if(!u.MMO){if(c)c("Missing component module.MMO reference can't get share link");return}u.MMO.GetGameLink(u.GameId,"",u.Access,1,function(a){if(a!=="")a=u.SetQueryString("EdboxArgs",u.GetLoginInfo(),a);if(b)b(a)},c)},CheckGameType:function(b,c,d){if(!u.MMO){if(d)d("Missing component module.MMO reference can't get share link");return}var e=1;if(Edbox.Platform.IsPC){e=7}if(b.Access===2||b.Access===3){e=0}Edbox.Action.MMO.GetTryPlayingInfo(b.GameId,b.Access,e,"",function(a){if(a.web_resid&&a.web_resid!==""){if(c)c({"data":"H5"})}else{if(c)c({"data":"Exe"})}},d)},GetShareUrl:function(){var a=u.Protocol+"://"+u.GetHost("MMO")+"/m/"+u.GameId+"/"+u.Access+"_2";a=u.FillUrl(a);return a},GetShareUrlFromServer:function(a,b){if(!u.MMO){if(b)b("Missing component module.MMO reference can't get share link");return}u.MMO.GetGameLink(u.GameId,"",u.Access,2,a,b)},FillUrl:function(a){function getlan(){if(u.Language==="English")return"en";if(u.Language==="TraditionalChinese")return"hk";if(u.Language==="TraditionalChinese_TW")return"tw";if(u.Language==="Arabic_EG")return"arabic_eg";return"ch"}if(!a||a==="")return"";a=u.SetQueryString("lan",getlan(),a);a=u.SetQueryString("area",u.Area,a);a=u.SetQueryString("appkey",Edbox.AppKey,a);if(u.SDPAppId&&u.SDPAppId.trim().length>0){a=u.SetQueryString("sdp-app-id",u.SDPAppId,a)}if(u.Channel!=="Default"){a=u.SetQueryString("channel",u.Channel,a)}return a},GetHost:function(a){var b=u.Host;var c=a+"_"+u.Protocol.toUpperCase();if(b&&b[c])return b[c][u.ServerKey];if(!b||!b[a])return a;return b[a][u.ServerKey]},GetTip:function(a){var b=u.Tips;if(!b||!b[a])return a;return b[a][u.Language]},IsHtml5Player:function(){if(Edbox.IsInHtml5Player&&Edbox.IsInHtml5Player===1){return true}return false},GetLanguageCode:function(){if(u.Language){if(u.Language==="English"){return"en-US"}else if(u.Language==="SimplifiedChinese"){return"zh-CN"}else if(u.Language==="TraditionalChinese"){return"zh-HK"}else if(u.Language==="TraditionalChinese_TW"){return"zh-TW"}else if(u.Language==="Arabic_EG"){return"en-US"}}return"zh-CN"},CheckArabicCharacters:function(a){var b=/[\u0600-\u06FF]/;var c=/[\u4e00-\u9fa5]/;var d=0;if(c.test(a)){d=1}else if(b.test(a)){d=2}return d},GetFunctionConfig:function(c,d){u.GetBirthInfo(function(a){var b=new Object();b.LimitFunctions=[];if(a.Age<u.AgeLimit){b.LimitFunctions=u.LimitFunctions}if(c)c(b)},function(e){console.log("GetBirthInfo error : "+e);if(d)d(e)})},GetDeviceID:function(c){if(u.DeviceID){if(c)c(u.DeviceID)}else{new Fingerprint2().get(function(a,b){u.DeviceID=a;if(c)c(a)})}},IsGuest:function(){return Edbox.AccountType.toUpperCase()==="GUEST"||Edbox.UCAccountType.toUpperCase()==="GUEST"},Api:new Object(),Action:new Object(),InitPath:function(a){var b=document.scripts;var c=b[b.length-1].src;c=c.substring(0,c.lastIndexOf("/"));c=c.substring(0,c.lastIndexOf("/")+1);a.ComponentPath=c;c=c.substring(0,c.lastIndexOf("/"));c=c.substring(0,c.lastIndexOf("/")+1);a.ComponentRootPath=c;c=c.substring(0,c.lastIndexOf("/"));c=c.substring(0,c.lastIndexOf("/")+1);a.RootPath=c},InitRequire:function(a,b,c){function load(){document.write('<script src="'+a+'" type="text/javascript"><\/script>');if(c){document.write('<script type="text/javascript">'+c+'<\/script>')}}if(b||b===null||b===undefined){load()}else{if(c){document.write('<script type="text/javascript">'+c+'<\/script>')}}},Init:function(a){var b=u.GetQueryString("EdboxArgs",a);if(b){u.DataSet.Set("EdboxArgs",b);history.pushState("Location Change",null,u.RemoveQueryString("EdboxArgs"))}b=u.GetQueryString("lan",a);if(b){if(b==="en"||b==="English"){u.Language="English"}else if(b==="hk"||b==="TraditionalChinese"){u.Language="TraditionalChinese"}else if(b==="tw"||b==="TraditionalChinese_TW"){u.Language="TraditionalChinese_TW"}else if(b==="arabic_eg"||b==="Arabic_EG"){u.Language="Arabic_EG"}else{u.Language="SimplifiedChinese"}}b=u.GetQueryString("area",a);if(b){if(b==="USA"){u.Area="USA"}else if(b==="HK"){u.Area="HK"}else if(b==="TW"){u.Area="TW"}else if(b==="EG"){u.Area="EG"}else{u.Area="CHN"}}else{var c=u.GetQueryString("appkey",a);if(c){if(c==="US"){u.Area="USA"}if(c==="TW"){u.Area="TW"}if(c==="HK"){u.Area="HK"}if(c==="CN"){u.Area="CHN"}if(c==="EG"){u.Area="EG"}}}b=u.DataSet.Get("EdboxArgs");if(b){var d=JSON.parse(u.Decode(b));for(var f in d){u[f]=d[f]}}b=u.GetQueryString("channel",a);if(b){u.Channel=b}b=u.GetQueryString("account_type",a);if(b){u.AccountType=b}b=u.GetQueryString("area",a);if(b){u.Area=b}b=u.GetQueryString("lan",a);if(b){u.SetLanguage(b)}if(u.AccountId){u.Avatar=u.Api.CS.GetAvatar(u.AccountId,160)}var g=u.Access;b=u.GetQueryString("t",a);if(b){var h=b.split("_");try{g=parseInt(h[0]);u.Mode=parseInt(h[1]);if(u.Mode===5){u.Mode=3}if(u.Mode===6){u.Mode=4}if(u.Mode===7){u.Mode=1}}catch(e){console.log(e)}}else{var i=u.GetQueryString("Page",a);if(i){b=u.GetQueryString("t",i);if(b){var j=b.split("_");try{g=parseInt(j[0])}catch(e){console.log(e)}}u.Mode=3}}if(g!==1||u.Mode!==3||u.GameId.toString().trim().length<1){b=u.GetQueryString("game_id",a);if(b){u.GameId=b}b=u.GetQueryString("v",a);if(b){u.Version=b}u.Access=g}if(!u.GameId||u.GameId.toString().trim().length<1){var k=u.GetQueryString("Page",a);if(k){b=u.GetQueryString("game_id",k);if(b){u.GameId=b}b=u.GetQueryString("v",k);if(b){u.Version=b}}}u.IsLogin=u.IsLogin||u.AccountId.toString().length>0&&u.AccessToken.length>0&&u.MacKey.length>0;CheckUserInfo();u.GetDeviceID()}};u.InitPath(u);if(o&&p&&!o[p]){o[p]=u}}(window,"Edbox"));(function(f,g){function PostLocationLoad(){if(window.parent!==null){var a=new Object();a.Type="LocationLoad";a.Url=location.href;a.Host=location.host;window.parent.postMessage(a,"*")}}function ListenLocationLoad(){function messageCallBack(e){var a=e.source;var b=e.data;if(b&&b.Type==="LocationLoad"){var c="Game";var d=b.Url;if(d.indexOf("studio")>=0){c="Studio"}else if(d.indexOf("editor")>=0){c="Editor"}if(f[g]){f[g](a,d,c)}}}window.addEventListener("message",messageCallBack,false)}PostLocationLoad();ListenLocationLoad();var h=function(a,b,c){};if(f&&g&&!f[g]){f[g]=h}}(Edbox,"LocationLoad"));(function(b){if(typeof String.prototype.startsWith!=='function'){String.prototype.startsWith=function(a){return this.slice(0,a.length)===a}}if(typeof String.prototype.endsWith!=='function'){String.prototype.endsWith=function(a){return this.indexOf(a,this.length-a.length)!==-1}}}(window));(function(e,f){var g=function(c){var d=this;this.Count=function(){return d.length};this.Contain=function(a){var b=d.indexOf(a);return b>-1};this.Add=function(a){var b=d.indexOf(a);if(b>-1)return;d.push(a)};this.Remove=function(a){var b=d.indexOf(a);if(b>-1){d.splice(b,1)}};if(c&&c.length>0){for(var i=0;i<c.length;i++){d[i]=c[i]}}return this};g.prototype=Array.prototype;if(e&&f&&!e[f]){e[f]=g}}(window,"List"));(function(f,g){var h=function(d){var e=this;this.Keys=d&&d.Keys||new Array();this.Values=d&&d.Values||new Array();this.Count=function(){return e.Keys.length};this.ContainsKey=function(a){var b=e.Keys.indexOf(a);return b>-1};this.ContainsValue=function(a){var b=e.Values.indexOf(a);return b>-1};this.Get=function(a){var b=e.Keys.indexOf(a);if(b>-1){return e.Values[b]}else{return null}};this.Set=function(a,b){var c=e.Keys.indexOf(a);if(c>-1){e.Values[c]=b}else{e.Keys.push(a);e.Values.push(b)}return true};this.Remove=function(a){var b=e.Keys.indexOf(a);if(b>-1){e.Keys.splice(b,1);e.Values.splice(b,1);return true}return false};return this};if(f&&g&&!f[g]){f[g]=h}}(window,"Dictionary"));(function(l,m){var n=new Dictionary();function Load(c,d,e){function callback(){if(d)d()}if(!c||c.trim().length<1){callback();return}var f=document.scripts;for(var i=0;i<f.length;i++){if(f[i].src===c){callback();return}}if(n.ContainsKey(c)){var g=n.Get(c);var h=function(){callback();if(g){g()}};n.Set(c,h);return}n.Set(c,callback);var j=0;function load(){if(j>=3){if(e){e()}return}var b=document.createElement("script");b.type="text/javascript";b.src=c;b.onload=function(){var a=n.Get(c);n.Remove(c);if(a){a()}};b.onerror=function(){b.remove();j+=1;load()};document.head.appendChild(b)}load()}var o=function(c,d,e){var f=this;function callback(){if(d)d()}function errorCallback(){f.Stop();if(e)e()}if(!c){callback();return}if(typeof c==="string"){c=[c]}if(!c.length){callback();return}function load(b){Load(b,function(){var a=c.indexOf(b);if(a>-1){c.splice(a,1)}},errorCallback)}var g=new Array();for(var i=0;i<c.length;i++){var h=c[i];g.push(h)}for(var j=0;j<g.length;j++){var k=g[j];load(k)}f.loading=setInterval(function(){if(c.length>0)return;clearInterval(f.loading);callback()},100);f.Stop=function(){clearInterval(f.loading)}};var p=function(a,b,c){return new o(a,b,c)};p.Unload=function(a){if(typeof a==="string"){a=[a]}for(var j=0;j<a.length;j++){var b=a[j];var c=document.scripts;for(var i=0;i<c.length;i++){if(c[i].src===b){c[i].parentNode.removeChild(c[i])}}}};if(l&&m&&!l[m]){l[m]=p}}(window,"Require"));(function(d,e){var f={Add:function(a,b){var c=a.indexOf(b);if(c>-1)return;a.push(b)},Contain:function(a,b){var c=a.indexOf(b);return c>-1},Remove:function(a,b){var c=a.indexOf(b);if(c>-1){a.splice(c,1)}}};if(d&&e&&!d[e]){d[e]=f}}(Edbox,"Array"));(function(a,b){var d=function(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0;var v=c==='x'?r:r&0x3|0x8;return v.toString(16)})};if(a&&b&&!a[b]){a[b]=d}}(Edbox,"GetGUID"));(function(j,k){var l=function(d){var e="";var f,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var h=function(a){a=a.replace(/\r\n/g,"\n");var b="";for(var n=0;n<a.length;n++){var c=a.charCodeAt(n);if(c<128){b+=String.fromCharCode(c)}else if(c>127&&c<2048){b+=String.fromCharCode(c>>6|192);b+=String.fromCharCode(c&63|128)}else{b+=String.fromCharCode(c>>12|224);b+=String.fromCharCode(c>>6&63|128);b+=String.fromCharCode(c&63|128)}}return b};d=h(d);while(i<d.length){f=d.charCodeAt(i++);chr2=d.charCodeAt(i++);chr3=d.charCodeAt(i++);enc1=f>>2;enc2=(f&3)<<4|chr2>>4;enc3=(chr2&15)<<2|chr3>>6;enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}e=e+g.charAt(enc1)+g.charAt(enc2)+g.charAt(enc3)+g.charAt(enc4)}return e};if(j&&k&&!j[k]){j[k]=l}}(Edbox,"Encode"));(function(m,n){var o=function(f){var g="";var h,chr2,chr3;var j,enc2,enc3,enc4;var i=0;var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";f=f.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<f.length){j=k.indexOf(f.charAt(i++));enc2=k.indexOf(f.charAt(i++));enc3=k.indexOf(f.charAt(i++));enc4=k.indexOf(f.charAt(i++));h=j<<2|enc2>>4;chr2=(enc2&15)<<4|enc3>>2;chr3=(enc3&3)<<6|enc4;g=g+String.fromCharCode(h);if(enc3!==64){g=g+String.fromCharCode(chr2)}if(enc4!==64){g=g+String.fromCharCode(chr3)}}var l=function(a){var b="";var i=0;var c=0;var d=0;while(i<a.length){c=a.charCodeAt(i);if(c<128){b+=String.fromCharCode(c);i++}else if(c>191&&c<224){d=a.charCodeAt(i+1);b+=String.fromCharCode((c&31)<<6|d&63);i+=2}else{d=a.charCodeAt(i+1);var e=a.charCodeAt(i+2);b+=String.fromCharCode((c&15)<<12|(d&63)<<6|e&63);i+=3}}return b};g=l(g);return g};if(m&&n&&!m[n]){m[n]=o}}(Edbox,"Decode"));(function(h,i){var j=function(a,b,c){if(!b){b=window.location.href}var d=b.indexOf("?");if(d<0)return null;var e=b.substring(d);d=e.indexOf("#");if(d>0){e=e.substring(0,d)}var f=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i");var r=e.substr(1).match(f);if(r!==null){var g=r[2];if(!c)g=decodeURIComponent(g);return g}return null};if(h&&i&&!h[i]){h[i]=j}}(Edbox,"GetQueryString"));(function(h,i){var j=function(a,b,c){if(!c){c=window.location.href}var d=a+"="+encodeURIComponent(b);var e=Edbox.GetQueryString(a,c,true);if(e){c=c.replace(a+"="+e,d);return c}var f=c.indexOf("#");var g="";if(f>0){g=c.substring(f);c=c.substring(0,f)}while(c.endsWith("?")||c.endsWith("&")){c=c.substring(0,c.length-1)}f=c.indexOf("?");if(f<0){c+="?"+d}else{c+="&"+d}c+=g;return c};if(h&&i&&!h[i]){h[i]=j}}(Edbox,"SetQueryString"));(function(d,e){var f=function(a,b){if(!b){b=window.location.href}var c=Edbox.GetQueryString(a,b,true);if(!c)return b;b=b.replace(a+"="+c+"&","");b=b.replace("?"+a+"="+c,"");b=b.replace("&"+a+"="+c,"");return b};if(d&&e&&!d[e]){d[e]=f}}(Edbox,"RemoveQueryString"));(function(f,g){var h=function(a,b){var c;c=a;if(typeof a!=="string"){if(typeof a==="object"){c=JSON.stringify(a)}else{console.e("Des Type Error");c=a.toString()}}var d=Edbox.CryptoJS.enc.Utf8.parse(b);var e=Edbox.CryptoJS.DES.encrypt(c,d,{mode:Edbox.CryptoJS.mode.ECB,padding:Edbox.CryptoJS.pad.Pkcs7});return e.ciphertext.toString()};if(f&&g&&!f[g]){f[g]=h}}(Edbox,"EncryptDesECB"));(function(e,f){var g=function(a,b){if(!a||!b)return;var c=Edbox.CryptoJS.enc.Utf8.parse(b);var d=Edbox.CryptoJS.DES.decrypt({ciphertext:Edbox.CryptoJS.enc.Hex.parse(a)},c,{mode:Edbox.CryptoJS.mode.ECB,padding:Edbox.CryptoJS.pad.Pkcs7});return d.toString(Edbox.CryptoJS.enc.Utf8)};if(e&&f&&!e[f]){e[f]=g}}(Edbox,"DecryptDesECB"));(function(f,g){var h=function(a,b){var c;c=a;if(typeof a!=="string"){if(typeof a==="object"){c=JSON.stringify(a)}else{console.e("Des Type Error");c=a.toString()}}var d=Edbox.CryptoJS.enc.Utf8.parse(b);var e=Edbox.CryptoJS.DES.encrypt(c,d,{iv:d,mode:Edbox.CryptoJS.mode.CBC,padding:Edbox.CryptoJS.pad.Pkcs7});return e.ciphertext.toString()};if(f&&g&&!f[g]){f[g]=h}}(Edbox,"EncryptDesCBC"));(function(e,f){var g=function(a,b){if(!a||!b)return;var c=Edbox.CryptoJS.enc.Utf8.parse(b);var d=Edbox.CryptoJS.DES.decrypt({ciphertext:Edbox.CryptoJS.enc.Hex.parse(a)},c,{iv:c,mode:Edbox.CryptoJS.mode.CBC,padding:Edbox.CryptoJS.pad.Pkcs7});return d.toString(Edbox.CryptoJS.enc.Utf8)};if(e&&f&&!e[f]){e[f]=g}}(Edbox,"DecryptDesCBC"));(function(f,g){var h={Set:function(a,b,c){var d=new Date();var e=c;d.setTime(d.getTime()+e*24*3600*1000);document.cookie=a+"="+b+";expires="+d.toGMTString()},Get:function(a){var b=document.cookie.replace(/[ ]/g,"");var c=b.split(";");var d="";for(var i=0;i<c.length;i++){var e=c[i].split("=");if(a===e[0]){d=e[1];break}}return d},Delete:function(a){var b=new Date();b.setTime(b.getTime()-10000);document.cookie=a+"=v; expires ="+b.toGMTString()}};if(f&&g&&!f[g]){f[g]=h}}(Edbox,"Cookie"));(function(c,d){var e={Get:function(a){return sessionStorage.getItem(a)},Set:function(a,b){sessionStorage.setItem(a,b)},Contain:function(a){return e.Get(a)!==null},Remove:function(a){sessionStorage.removeItem(a)},Clear:function(){sessionStorage.clear()}};if(c&&d&&!c[d]){c[d]=e}}(Edbox,"DataSet"));(function(a,b){var c={ERROR_NotSupport_Title:{English:"Not Support",SimplifiedChinese:"当前浏览器不支持",TraditionalChinese:"當前瀏覽器不支持",TraditionalChinese_TW:"當前瀏覽器不支持",Arabic_EG:"Not Support"},ERROR_NotSupport_Content:{English:"Current browsers cannot support Edbox. Please try to open it with other browsers such as Chrome.",SimplifiedChinese:"当前浏览器无法支持Edbox的使用，请尝试使用chrome等其它浏览器打开",TraditionalChinese:"當前瀏覽器無法支持Edbox的使用，請嘗試使用chrome等其它瀏覽器打開",TraditionalChinese_TW:"當前瀏覽器無法支持Edbox的使用，請嘗試使用chrome等其它瀏覽器打開",Arabic_EG:"Current browsers cannot support Edbox. Please try to open it with other browsers such as Chrome."},ERROR_EditorNotSupport:{English:"This game editor is not supported on current devices",SimplifiedChinese:"当前设备不支持此游戏编辑器",TraditionalChinese:"當前設備不支持此遊戲編輯器",TraditionalChinese_TW:"當前設備不支持此遊戲編輯器",Arabic_EG:"This game editor is not supported on current devices"},ERROR_GameIDInvalid:{English:"Invalid game ID",SimplifiedChinese:"游戏ID无效",TraditionalChinese:"遊戲ID無效",TraditionalChinese_TW:"遊戲ID無效",Arabic_EG:"Invalid game ID"},ERROR_NotLoggedIn:{English:"Not logged in",SimplifiedChinese:"未登录",TraditionalChinese:"未登錄",TraditionalChinese_TW:"未登錄",Arabic_EG:"Not logged in"},Hint_NotSave:{English:"The system may not save your changes.",SimplifiedChinese:"系统可能不会保存您所做的修改。",TraditionalChinese:"系統可能不會保存您所做的修改。",TraditionalChinese_TW:"系統可能不會保存您所做的修改。",Arabic_EG:"The system may not save your changes."},ERROR_LengthExceeds:{English:"Maximun number of character reached：1000 characters",SimplifiedChinese:"字数较多，不可超过1000字",TraditionalChinese:"字數較多，不可超過1000字",TraditionalChinese_TW:"字數較多，不可超過1000字",Arabic_EG:"Maximun number of character reached：1000 characters"},ERROR_NameDuplicate:{English:"Product name is duplicate",SimplifiedChinese:"作品名称重复",TraditionalChinese:"作品名稱重復",TraditionalChinese_TW:"作品名稱重復",Arabic_EG:"Product name is duplicate"},ERROR_EditorSaveFailed:{English:"Save failed: ",SimplifiedChinese:"保存失败:",TraditionalChinese:"保存失敗:",TraditionalChinese_TW:"保存失敗:",Arabic_EG:"Save failed: "},ERROR_EditorSaveAsFailed:{English:"Save as failed: ",SimplifiedChinese:"另存为失败:",TraditionalChinese:"另存為失敗:",TraditionalChinese_TW:"另存為失敗:",Arabic_EG:"Save as failed: "},TIP_EditorSaveSucess:{English:"Save Successfully",SimplifiedChinese:"保存成功",TraditionalChinese:"保存成功",TraditionalChinese_TW:"保存成功",Arabic_EG:"Save Successfully"},ERROR_TagsNotSame:{English:"The tag already exists",SimplifiedChinese:"标签名称不能相同哦",TraditionalChinese:"標籤名稱不能相同哦",TraditionalChinese_TW:"標籤名稱不能相同哦",Arabic_EG:"The tag already exists"},ERROR_TagsInValid:{English:"The tag is invalid",SimplifiedChinese:"标签名称不合法",TraditionalChinese:"標籤名稱不合法",TraditionalChinese_TW:"標籤名稱不合法",Arabic_EG:"The tag is invalid"},ERROR_ISWORKINGONLY:{English:"Repeated request. You are exporting the game now. Please wait.",SimplifiedChinese:"正在导出一个游戏，请不要重复操作。",TraditionalChinese:"正在匯出一個遊戲，請不要重複操作。",TraditionalChinese_TW:"正在匯出一個遊戲，請不要重複操作。",Arabic_EG:"Repeated request. You are exporting the game now. Please wait."},ERROR_UNKNOWERROR:{English:"Export failed. Please try again.",SimplifiedChinese:"导出失败，请重试",TraditionalChinese:"匯出失敗，請重試",TraditionalChinese_TW:"匯出失敗，請重試",Arabic_EG:"Export failed. Please try again."},ERROR_SEARCHERROR:{English:"Search failed. Please try again.",SimplifiedChinese:"搜索失败，请重试",TraditionalChinese:"搜索失敗，請重試",TraditionalChinese_TW:"搜索失敗，請重試",Arabic_EG:"Search failed. Please try again."},ERROR_SCREENSHOOTER:{English:"Screenshots failed. Please try again.",SimplifiedChinese:"截图失败，请重试",TraditionalChinese:"截圖失敗，請重試",TraditionalChinese_TW:"截圖失敗，請重試",Arabic_EG:"Screenshots failed. Please try again."},ERROR_NAMETOLONG:{English:"Maximum request length exceeded. Please try again.",SimplifiedChinese:"名称过长，请重新输入",TraditionalChinese:"名稱過長，請重新輸入",TraditionalChinese_TW:"名稱過長，請重新輸入",Arabic_EG:"Maximum request length exceeded. Please try again."},ERROR_MobileNotSupported:{English:"Sorry, it cannot be edited here for now. Please go to the mobile side.",SimplifiedChinese:"暂未开放，建议到手机端编辑",TraditionalChinese:"暫未開放，建議到手機端編輯",TraditionalChinese_TW:"暫未開放，建議到手機端編輯",Arabic_EG:"Sorry, it cannot be edited here for now. Please go to the mobile side."},ERROR_NETWORKERROR:{English:"Network error. Please try again.",SimplifiedChinese:"网络问题，请重试",TraditionalChinese:"網絡問題，請重試",TraditionalChinese_TW:"網絡問題，請重試",Arabic_EG:"Network error. Please try again."},IM_SHARE_SUMMARY:{English:"【Edbox】Invitations",SimplifiedChinese:"【Edbox】邀请通知",TraditionalChinese:"【Edbox】邀請通知",TraditionalChinese_TW:"【Edbox】邀請通知",Arabic_EG:"【Edbox】Invitations"},IM_SHARE_ICONALT:{English:"Games Publicize.",SimplifiedChinese:"游戏宣传",TraditionalChinese:"遊戲宣傳",TraditionalChinese_TW:"遊戲宣傳",Arabic_EG:"Games Publicize."},IM_SHARE_JOIN:{English:"Join Game.",SimplifiedChinese:"打开链接",TraditionalChinese:"打開鏈接",TraditionalChinese_TW:"打開鏈接",Arabic_EG:"Join Game."},QQ_SHARE_JOIN:{English:"I saw this game in Edbox, very funny!",SimplifiedChinese:"我在Edbox看到这款游戏还不错哦！",TraditionalChinese:"我在Edbox看到這款遊戲還不錯哦！",TraditionalChinese_TW:"我在Edbox看到這款遊戲還不錯哦！",Arabic_EG:"I saw this game in Edbox, very funny!"},ERROR_NETWORK_OFFLINE:{English:"Current network unavailabilit. Please check your network setting.",SimplifiedChinese:"当前网络不可用，请检查你的网络设置",TraditionalChinese:"當前網絡不可用，請檢查你的網絡設置",TraditionalChinese_TW:"當前網絡不可用，請檢查你的網絡設置",Arabic_EG:"Current network unavailabilit. Please check your network setting."},ERROR_GAMENAME_SPACE:{English:"Name cannot be all Spaces",SimplifiedChinese:"作品名称不能全为空格",TraditionalChinese:"作品名稱不能全為空格",TraditionalChinese_TW:"作品名稱不能全為空格",Arabic_EG:"Name cannot be all Spaces"},ERROR_ILLEGAL_CHARACTER:{English:"Name cannot contain special characters \\/:*?\"<>|]",SimplifiedChinese:"作品名称不能包含特殊字符 \\/:*?\"<>|]",TraditionalChinese:"作品名稱不能包含特殊字元 \\/:*?\"<>|]",TraditionalChinese_TW:"作品名稱不能包含特殊字元 \\/:*?\"<>|]",Arabic_EG:"Name cannot contain special characters \\/:*?\"<>|]"},VIP_NOTCREATE:{English:"The upper limit of game creation is reached. Would you like to upgrade VIP membership to raise the limit?",SimplifiedChinese:"您当前的游戏作品数量已达到上限，是否VIP扩充?",TraditionalChinese:"你遊戲作品數量已到達上限，是否升級至VIP?",TraditionalChinese_TW:"您當前的遊戲作品數量已達到上限，是否VIP擴充?",Arabic_EG:"The upper limit of game creation is reached. Would you like to upgrade VIP membership to raise the limit?"},VIP_EDITOR_NOTCREATE:{English:"The number of games created has reached the upper limit",SimplifiedChinese:"作品创建数量达到上限.",TraditionalChinese:"作品創建數量已達上限.",TraditionalChinese_TW:"作品創建數量達到上限.",Arabic_EG:"The number of games created has reached the upper limit"},ERROR_Private_UploadData:{English:"Failed to upload data, please try again",SimplifiedChinese:"上传数据失败，请重试",TraditionalChinese:"上傳數據失敗，請重試",TraditionalChinese_TW:"上傳數據失敗，請重試",Arabic_EG:"Failed to upload data, please try again"},ERROR_Private_LocalFile:{English:"Local file error, please check",SimplifiedChinese:"本地文件出错，请检查",TraditionalChinese:"本地檔出錯，請檢查",TraditionalChinese_TW:"本地檔出錯，請檢查",Arabic_EG:"Local file error, please check"},ERROR_Private_UploadFile:{English:"File upload failed, please check the network and try again",SimplifiedChinese:"文件上传失败，请检查网络重试",TraditionalChinese:"檔上傳失敗，請檢查網路重試",TraditionalChinese_TW:"檔上傳失敗，請檢查網路重試",Arabic_EG:"File upload failed, please check the network and try again"},ERROR_Private_Sensitive:{English:"File name contains sensitive words",SimplifiedChinese:"文件名称包含敏感词",TraditionalChinese:"檔案名稱包含敏感詞",TraditionalChinese_TW:"檔案名稱包含敏感詞",Arabic_EG:"File name contains sensitive words"},ERROR_Private_DeleteSource:{English:"Failed to delete personal resources",SimplifiedChinese:"删除个人资源失败",TraditionalChinese:"刪除個人資源失敗",TraditionalChinese_TW:"刪除個人資源失敗",Arabic_EG:"Failed to delete personal resources"},ERROR_Private_GetFavoriteRes:{English:"Failed to get favorite resources",SimplifiedChinese:"获取收藏资源失败",TraditionalChinese:"獲取收藏資源失敗",TraditionalChinese_TW:"獲取收藏資源失敗",Arabic_EG:"Failed to get favorite resources"},ERROR_Private_Collect:{English:"Collection of resources failed",SimplifiedChinese:"收藏资源失败",TraditionalChinese:"收藏資源失敗",TraditionalChinese_TW:"收藏資源失敗",Arabic_EG:"Collection of resources failed"},ERROR_Private_CancelCollect:{English:"Unfavorite resource failed",SimplifiedChinese:"取消收藏资源失败",TraditionalChinese:"取消收藏資源失敗",TraditionalChinese_TW:"取消收藏資源失敗",Arabic_EG:"Unfavorite resource failed"},ERROR_Private_GetFavoriteStatus:{English:"Failed to get favorite status",SimplifiedChinese:"获取收藏状态失败",TraditionalChinese:"獲取收藏狀態失敗",TraditionalChinese_TW:"獲取收藏狀態失敗",Arabic_EG:"Failed to get favorite status"},ERROR_Private_GetTags:{English:"Failed to get tag list",SimplifiedChinese:"获取标签集失败",TraditionalChinese:"獲取標籤集失敗",TraditionalChinese_TW:"獲取標籤集失敗",Arabic_EG:"Failed to get tag list"},ERROR_Private_AddTag:{English:"Failed to add the tag",SimplifiedChinese:"添加标签失败",TraditionalChinese:"添加標籤失敗",TraditionalChinese_TW:"添加標籤失敗",Arabic_EG:"Failed to add the tag"},ERROR_Private_DeleteTag:{English:"Failed to delete tag",SimplifiedChinese:"删除标签失败",TraditionalChinese:"刪除標籤失敗",TraditionalChinese_TW:"刪除標籤失敗",Arabic_EG:"Failed to delete tag"},ERROR_Private_ModifyTag:{English:"Failed to modify tag",SimplifiedChinese:"修改标签失败",TraditionalChinese:"修改標籤失敗",TraditionalChinese_TW:"修改標籤失敗",Arabic_EG:"Failed to modify tag"},ERROR_Private_AddTagOfRes:{English:"Failed to add the tag",SimplifiedChinese:"资源添加标签失败",TraditionalChinese:"資源添加標籤失敗",TraditionalChinese_TW:"資源添加標籤失敗",Arabic_EG:"Failed to add the tag"},ERROR_Private_DeleteTagOfRes:{English:"Failed to delete tag",SimplifiedChinese:"资源删除标签失败",TraditionalChinese:"資源刪除標籤失敗",TraditionalChinese_TW:"資源刪除標籤失敗",Arabic_EG:"Failed to delete tag"},VIP_NOTCREATE_MEMBER:{English:"Registered users can create up to 10 games. VIP exclusive services are coming soon...",SimplifiedChinese:"免费用户最多创作10个作品；会员服务正在抓紧上线中...",TraditionalChinese:"免費用戶最多可創作10個作品; 會員服務即將推出，敬請期待!",TraditionalChinese_TW:"免費用戶最多創作10個作品；會員服務正在抓緊上線中...",Arabic_EG:"Registered users can create up to 10 games. VIP exclusive services are coming soon..."},TIP_CONFIRM:{English:"OK",SimplifiedChinese:"确定",TraditionalChinese:"確定",TraditionalChinese_TW:"確定",Arabic_EG:"OK"},TIP_CANCEL:{English:"Cancel",SimplifiedChinese:"取消",TraditionalChinese:"取消",TraditionalChinese_TW:"取消",Arabic_EG:"Cancel"},VIP_TEMPLATE:{English:"Upgrade VIP to experience the feature. VIP exclusive services are coming soon...",SimplifiedChinese:"升级会员后方可体验；会员服务正在抓紧上线中...",TraditionalChinese:"升級會員後方可體驗；會員服務正在抓緊上線中..",TraditionalChinese_TW:"升級會員後方可體驗；會員服務正在抓緊上線中..",Arabic_EG:"Upgrade VIP to experience the feature. VIP exclusive services are coming soon..."},ITEM_HEARDER:{SimplifiedChinese:["题目编号","题干","配图","音频","答案","标签","选项"],English:["No.","Question","Image","Audio","Key","Tag","Option"],TraditionalChinese:["題目編號","題幹","配圖","音訊","答案","標籤","選項"],TraditionalChinese_TW:["題目編號","題幹","配圖","音頻","答案","標籤","選項"],Arabic_EG:["No.","Question","Image","Audio","Key","Tag","Option"]},ITEM_OPTION:{SimplifiedChinese:["文字","配图","音频"],English:["Text","Image","Audio"],TraditionalChinese:["文字","配圖","音訊"],TraditionalChinese_TW:["文字","配圖","音頻"],Arabic_EG:["Text","Image","Audio"]},VIP_NEED_UPGTRADE1:{English:"You can currently create up to ",SimplifiedChinese:"您当前最多可创建",TraditionalChinese:"你最多可創建",TraditionalChinese_TW:"您當前最多可創建",Arabic_EG:"You can currently create up to "},VIP_NEED_UPGTRADE2:{English:" game(s) and publish ",SimplifiedChinese:"个游戏作品，发布",TraditionalChinese:"個遊戲作品，發佈",TraditionalChinese_TW:"個遊戲作品，發布",Arabic_EG:" game(s) and publish "},VIP_NEED_UPGTRADE3:{English:" game(s).",SimplifiedChinese:"个游戏作品",TraditionalChinese:"個遊戲作品",TraditionalChinese_TW:"個遊戲作品",Arabic_EG:" game(s)."},VIP_NEED_UPGTRADE4:{English:" Upgrade VIP membership to create more games.",SimplifiedChinese:"，如果需要创建更多游戏，建议购买提升VIP等级",TraditionalChinese:"如果需要創建更多遊戲，建議升級至VIP",TraditionalChinese_TW:"，如果需要創建更多遊戲，建議購買提升VIP等級",Arabic_EG:" Upgrade VIP membership to create more games."},LIMIT_WORD_TIPS:{SimplifiedChinese:"字符限制",English:"Maximum length",TraditionalChinese:"字元限制",TraditionalChinese_TW:"字元限制",Arabic_EG:"Maximum length"},EDBOX_DESCRIPTION:{English:"Edbox is a web-based community, where users can either play various types of games, or design and create their own games with ready-made templates and massive online resources. The game-design-related courses combine the theories with practices, cultivating talents with game creation skills and computational thinking ability.",SimplifiedChinese:"Edbox是一个集游戏体验、学习、创作、分发于一体的游戏学习社区。拥有丰富的游戏编辑模板和高质量在线资源。相关游戏创作课程将教学与实践紧密结合，着力培养游戏设计技能和计算思维能力。",TraditionalChinese:"Edbox是一個集遊戲創作、學習、體驗和分享於一體的遊戲編輯及學習社群。平台內具豐富的遊戲範本和線上資源。相關遊戲創作課程將教學與實踐緊密結合，著力培養遊戲設計技能和設計思維能力。",TraditionalChinese_TW:"Edbox是一個集遊戲體驗、學習、創作、分發於一體的遊戲學習社區。擁有豐富的遊戲編輯範本和高質量線上資源。相關遊戲創作課程將教學與實踐緊密結合，著力培養遊戲設計技能和計算思維能力。",Arabic_EG:"Edbox is a web-based community, where users can either play various types of games, or design and create their own games with ready-made templates and massive online resources. The game-design-related courses combine the theories with practices, cultivating talents with game creation skills and computational thinking ability."},VISITORS_MODEL_TITLE:{SimplifiedChinese:"账号注册提示",English:"Registration Reminder",TraditionalChinese:"帳戶登入提示",TraditionalChinese_TW:"帳號註冊提示",Arabic_EG:"Registration Reminder"},VISITORS_MODEL_MSG:{SimplifiedChinese:"您需要正式完成账号注册，方可体验该功能",English:"This feature is only available for registered users",TraditionalChinese:"您需要登入帳戶才可體驗該功能",TraditionalChinese_TW:"您需要正式完成帳號註冊，方可體驗該功能",Arabic_EG:"This feature is only available for registered users"},VISITORS_MODEL_OK:{SimplifiedChinese:"去注册",English:"Register",TraditionalChinese:"建立帳戶",TraditionalChinese_TW:"去註冊",Arabic_EG:"Register"}};if(a&&b&&!a[b]){a[b]=c}}(Edbox,"Tips"));(function(a,b){var c="http";function InitProtocol(){c=window.location.protocol.replace(":","");if(c.toLowerCase()==="file"){c="http"}}InitProtocol();if(a&&b&&!a[b]){a[b]=c}}(Edbox,"Protocol"));(function(a,b){var c={MMO:{QA:"api.edbox-qa.101.com",Dev:"api.edbox-dev.101.com",Feature:"api.edbox-feature.101.com",BetaCN:"api.edbox-beta-cn.101.com",Beta:"api.edbox-beta.101.com",CN:"api.edbox-cn.101.com",HK:"api.edbox.101.com",US:"api.edbox.101.com"},NDR:{QA:"esp-lifecycle.sdp.101.com",Dev:"esp-lifecycle.sdp.101.com",Feature:"esp-lifecycle.sdp.101.com",BetaCN:"esp-lifecycle.sdp.101.com",Beta:"esp-lifecycle.awsca.101.com",CN:"esp-lifecycle.sdp.101.com",HK:"esp-lifecycle.awsca.101.com",US:"esp-lifecycle.awsca.101.com"},CS:{QA:"cs.101.com",Dev:"cs.101.com",Feature:"cs.101.com",BetaCN:"cs.101.com",Beta:"cs-awsca.101.com",CN:"cs.101.com",HK:"cs.101.com",US:"cs-awsca.101.com"},CommonCS:{QA:"cscommon.web.sdp.101.com",Dev:"cscommon.web.sdp.101.com",Feature:"cscommon.101.com",BetaCN:"cscommon.101.com",Beta:"cscommon.awsca.101.com",CN:"cscommon.101.com",HK:"cscommon.101.com",US:"cscommon.awsca.101.com"},CDNCS:{QA:"cdncs.101.com",Dev:"cdncs.101.com",Feature:"cdncs.101.com",BetaCN:"cdncs.101.com",Beta:"cdn-cs-awsca.101.com",CN:"cdncs.101.com",HK:"cdncs.101.com",US:"cdn-cs-awsca.101.com"},FrontendLib:{QA:"vr-life.sdp.101.com",Dev:"vr-life.sdp.101.com",Feature:"vr-life.sdp.101.com",BetaCN:"vr-life.sdp.101.com",Beta:"vr-life.awsca.101.com",CN:"vr-life.sdp.101.com",HK:"vr-life.hk.101.com",US:"vr-life.awsca.101.com"},NewFrontendLib:{QA:"3dcp-qa.101.com",Dev:"3dcp-dev.101.com",Feature:"3dcp.101.com",BetaCN:"3dcp.101.com",Beta:"3dcpus.101.com",CN:"3dcp.101.com",HK:"3dcpus.101.com",US:"3dcpus.101.com"},Login:{QA:"support.edbox-qa.101.com",Dev:"support.edbox-dev.101.com",Feature:"support.edbox-feature.101.com",BetaCN:"support.edbox-beta-cn.101.com",Beta:"support.edbox-beta.101.com",CN:"support.edbox-cn.101.com",HK:"support.edbox.101.com",US:"support.edbox.101.com"},Component:{QA:"component.edbox-qa.101.com",Dev:"component.edbox-dev.101.com",Feature:"component.edbox-feature.101.com",BetaCN:"component.edbox-beta-cn.101.com",Beta:"component.edbox-beta.101.com",CN:"component.edbox-cn.101.com",HK:"component.edbox-hk.101.com",US:"component.edbox.101.com"},Game:{QA:"game.edbox-qa.101.com",Dev:"game.edbox-dev.101.com",Feature:"game.edbox-feature.101.com",BetaCN:"game.edbox-beta-cn.101.com",Beta:"game.edbox-beta.101.com",CN:"game.edbox-cn.101.com",HK:"game.edbox-hk.101.com",US:"game.edbox.101.com"},IM:{QA:"im-friend.web.sdp.101.com",Dev:"im-friend.web.sdp.101.com",Feature:"im-friend.web.sdp.101.com",BetaCN:"im-friend.web.sdp.101.com",Beta:"im-friend.awsca.101.com",CN:"im-friend.web.sdp.101.com",HK:"im-friend.web.sdp.101.com",US:"im-friend.awsca.101.com"},IM_HTTPS:{QA:"im-friend.sdp.101.com",Dev:"im-friend.sdp.101.com",Feature:"im-friend.sdp.101.com",BetaCN:"im-friend.sdp.101.com",Beta:"im-friend.awsca.101.com",CN:"im-friend.sdp.101.com",HK:"im-friend.hk.101.com",US:"im-friend.awsca.101.com"},UC:{QA:"uc-gateway.101.com",Dev:"uc-gateway.101.com",Feature:"uc-gateway.101.com",BetaCN:"uc-gateway.101.com",Beta:"uc-gateway.awsca.101.com",CN:"uc-gateway.101.com",HK:"uc-gateway.hk.101.com",US:"uc-gateway.awsca.101.com"},IMMsg:{QA:"imagent.101.com",Dev:"imagent.101.com",Feature:"imagent.101.com",BetaCN:"imagent.101.com",Beta:"im-agent.awsca.101.com",CN:"imagent.101.com",HK:"im-friend.web.sdp.101.com",US:"im-agent.awsca.101.com"},FeedBack:{QA:"user-feedback.sdp.101.com",Dev:"user-feedback.sdp.101.com",Feature:"user-feedback.sdp.101.com",BetaCN:"user-feedback.sdp.101.com",Beta:"user-feedback.awsca.101.com",CN:"user-feedback.sdp.101.com",HK:"user-feedback.sdp.101.com",US:"user-feedback.awsca.101.com"},Lobby:{QA:"studio.edbox-qa.101.com",Dev:"studio.edbox-dev.101.com",Feature:"studio.edbox-feature.101.com",BetaCN:"studio.edbox-beta-cn.101.com",Beta:"studio.edbox-beta.101.com",CN:"studio.edbox-cn.101.com",HK:"studio.edbox-hk.101.com",US:"studio.edbox.101.com"},Sensitive:{QA:"chat.99.com",Dev:"chat.99.com",Feature:"chat.99.com",BetaCN:"chat.99.com",Beta:"chat.99.com",CN:"chat.99.com",HK:"chat.99.com",US:"chat.99.com"},SensitiveCDN:{QA:"chatkey.99.com",Dev:"chatkey.99.com",Feature:"chatkey.99.com",BetaCN:"chatkey.99.com",Beta:"chatkey.99.com",CN:"chatkey.99.com",HK:"chatkey.99.com",US:"chatkey.99.com"}};if(a&&b&&!a[b]){a[b]=c}}(Edbox,"Host"));(function(d,e){var f=function(a,b){var c=Edbox.ComponentRootPath+"Edbox/page/error.html";c=Edbox.SetQueryString("Title",a||Edbox.GetTip("ERROR_NotSupport_Title"),c);c=Edbox.SetQueryString("Content",b||Edbox.GetTip("ERROR_NotSupport_Content"),c);c=Edbox.SetQueryString("Page",location.href,c);location.href=c};if(d&&e&&!d[e]){d[e]=f}}(Edbox,"GotoErrorPage"));(function(i,j){var k=function(a,b,c,d,e,f){i.IsLogin=true;i.AccountId=e;i.AccessToken=b;i.MacKey=c;if(d){var g=d;var h=g.replace(/-/g,"/").replace(/T/g," ");h=h.substring(0,g.length-9)+h.substring(g.length-5,g.length);i.TimeStamp=new Date().getTime()-new Date(h).getTime();i.TimeStamp=Math.round(i.TimeStamp)}i.SDPAppId=f;return i.SetQueryString("EdboxArgs",i.GetLoginInfo(),a)};if(i&&j&&!i[j]){i[j]=k}}(Edbox,"GetURLWithLoginInfo"));(function(c,d){var e=new Object();var f=new Object();var g=new Object();var h={Add:function(a,b){e[a]=b},Get:function(a){return e[a]},Contain:function(a){if(e[a]){return true}return false},IsLoaded:function(a){if(f[a]){return true}return false},WaitStart:function(a,b){if(!e[a])return;g[a]=b},LoadOK:function(a){if(!e[a])return;f[a]=e[a]},UnloadOK:function(a){if(e[a]){delete e[a]}if(g[a]){delete g[a]}if(f[a]){delete f[a]}},Start:function(){var a=Object.keys(g);for(var i=0;i<a.length;i++){var b=a[i];g[b]()}g=new Object()}};if(c&&d&&!c[d]){c[d]=h}}(Edbox,"Components"));(function(g,h){var j=new Object();var k={Add:function(a,b){j[a]=b},Contain:function(a){if(j[a]){return true}return false},Save:function(d,e){var f=Object.keys(j);function handle(b,i){if(i>=f.length){if(e){e(d)}return}var c=f[i];if(j[c].Save){j[c].Save(b,function(a){handle(a,i+1)})}else{handle(b,i+1)}}handle(d,0)},SaveAs:function(d,e){var f=Object.keys(j);function handle(b,i){if(i>=f.length){if(e){e(d)}return}var c=f[i];if(j[c].SaveAs){j[c].SaveAs(b,function(a){handle(a,i+1)})}else{handle(b,i+1)}}handle(d,0)}};if(g&&h&&!g[h]){g[h]=k}}(Edbox,"EditorComponents"));(function(e,f){var g=new Object();var v=new Date().setSeconds(0,0)/10000;var h=function(a,b,c){if(e.Components.IsLoaded(a)){if(b){b()}return}if(g[a]){var d=g[a];g[a]=function(){d();if(b){b()}};return}g[a]=function(){e.Components.LoadOK(a);if(b){b()}delete g[a]};function loadOK(){if(g[a]){g[a]()}}Require(e.RootPath+"coms/"+a+"/index.js"+"?v="+v,function(){if(!e[a]){if(c){c("Component Load Error")}return}e.Components.Add(a,e[a]);if(e[a].Init){e[a].Init(loadOK)}if(e[a].Start){if(e.IsLogin){e[a].Start(loadOK)}else{e.Components.WaitStart(a,loadOK)}}if(!e[a].Init&&!e[a].Start){loadOK()}},c)};if(e&&f&&!e[f]){e[f]=h}}(Edbox,"Load"));(function(e,f){var g=new Object();var h=function(a,b,c){if(!e.Editor){if(c){c("Editor Component must be loaded in the editor")}return}if(e.EditorComponents.Contain(a)){if(b){b()}return}if(g[a]){var d=g[a];g[a]=function(){d();if(b){b()}};return}g[a]=function(){if(b){b()}delete g[a]};function loadOK(){if(g[a]){g[a]()}}function load(){Require(e.RootPath+"coms/"+a+"/editor.js",function(){if(!e.Editor[a]){if(c){c("Editor Component Load Error")}return}e.EditorComponents.Add(a,e.Editor[a]);loadOK()},c)}e.Load(a,function(){load()},c)};if(e&&f&&!e[f]){e[f]=h}}(Edbox,"LoadEditor"));(function(e,f){var g=new Object();var v=new Date().setSeconds(0,0)/10000;var h=function(a,b,c){if(!e.Components.Contain(a)){if(c){c("Component Not Loaded")}return}if(g[a]){var d=g[a];g[a]=function(){d();if(b){b()}};return}g[a]=function(){e.Components.UnloadOK(a);delete e[a];if(b){b()}delete g[a]};function disposeOK(){if(g[a]){g[a]()}}Require.Unload(e.RootPath+"coms/"+a+"/index.js"+"?v="+v);if(e[a].Dispose){e[a].Dispose(disposeOK)}else{disposeOK()}};if(e&&f&&!e[f]){e[f]=h}}(Edbox,"Unload"));(function(d,e){var f=function(a,b,c){function load(){d.Load(a,b,c)}d.Unload(a,load,load)};if(d&&e&&!d[e]){d[e]=f}}(Edbox,"Reload"));(function(g,h){var i=function(e){var a=e.source;var b=e.data;if(b&&b.Type==="FunctionCall"){if(b.Datas.length!==2)return;var c=new Function(b.Datas[1]);var d=c();if(typeof d==="object"){d=JSON.parse(JSON.stringify(d))}var f={Type:b.Datas[0],Datas:[d]};a.postMessage(f,"*")}};window.addEventListener("message",i,false);if(g&&h&&!g[h]){g[h]=i}}(Edbox,"FunctionCall"));(function(){!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var n=[],r=e.document,i=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,u=n.indexOf,l={},c=l.toString,f=l.hasOwnProperty,p=f.toString,d=p.call(Object),h={},g=function e(t){return"function"==typeof t&&"number"!=typeof t.nodeType},y=function e(t){return null!=t&&t===t.window},v={type:!0,src:!0,noModule:!0};function m(e,t,n){var i,o=(t=t||r).createElement("script");if(o.text=e,n)for(i in v)n[i]&&(o[i]=n[i]);t.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var b="3.3.1",w=function(e,t){return new w.fn.init(e,t)},T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.fn=w.prototype={jquery:"3.3.1",constructor:w,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(l&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&w.isPlainObject(n)?n:{},a[t]=w.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},w.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e))&&(!(t=i(e))||"function"==typeof(n=f.call(t,"constructor")&&t.constructor)&&p.call(n)===d)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){m(e)},each:function(e,t){var n,r=0;if(C(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(C(Object(e))?w.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;o<a;o++)(r=!t(e[o],o))!==s&&i.push(e[o]);return i},map:function(e,t,n){var r,i,o=0,s=[];if(C(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return a.apply([],s)},guid:1,support:h}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function C(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!g(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}var E=function(e){var t,n,r,i,o,a,s,u,l,c,f,p,d,h,g,y,v,m,x,b="sizzle"+1*new Date,w=e.document,T=0,C=0,E=ae(),k=ae(),S=ae(),D=function(e,t){return e===t&&(f=!0),0},N={}.hasOwnProperty,A=[],j=A.pop,q=A.push,L=A.push,H=A.slice,O=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",I="\\["+M+"*("+R+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+M+"*\\]",W=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|.*)\\)|)",$=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),F=new RegExp("^"+M+"*,"+M+"*"),_=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),z=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),X=new RegExp(W),U=new RegExp("^"+R+"$"),V={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},be=function(){p()},ie=bw(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{L.apply(A=H.call(w.childNodes),w.childNodes),A[w.childNodes.length].nodeType}catch(e){L={apply:A.length?function(e,t){q.apply(e,H.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function oe(e,t,r,i){var o,s,l,c,f,h,v,m=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==T&&9!==T&&11!==T)return r;if(!i&&((t?t.ownerDocument||t:w)!==d&&p(t),t=t||d,g)){if(11!==T&&(f=J.exec(e)))if(o=f[1]){if(9===T){if(!(l=t.getElementById(o)))return r;if(l.id===o)return r.push(l),r}else if(m&&(l=m.getElementById(o))&&x(t,l)&&l.id===o)return r.push(l),r}else{if(f[2])return L.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return L.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!S[e+" "]&&(!y||!y.test(e))){if(1!==T)m=t,v=e;else if("object"!==t.nodeName.toLowerCase()){(c=t.getAttribute("id"))?c=c.replace(te,ne):t.setAttribute("id",c=b),s=(h=a(e)).length;while(s--)h[s]="#"+c+" "+ve(h[s]);v=h.join(","),m=K.test(e)&&ge(t.parentNode)||t}if(v)try{return L.apply(r,m.querySelectorAll(v)),r}catch(e){}finally{c===b&&t.removeAttribute("id")}}}return u(e.replace(B,"$1"),t,r,i)}function ae(){var e=[];function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}return t}function se(e){return e[b]=!0,e}function ue(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function bu(e,t){var n=e.split("|"),i=n.length;while(i--)r.attrHandle[n[i]]=t}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function bv(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function de(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function he(e){return se(function(t){return t=+t,se(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ge(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},p=oe.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!==d&&9===a.nodeType&&a.documentElement?(d=a,h=d.documentElement,g=!o(d),w!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",be,!1):i.attachEvent&&i.attachEvent("onunload",be)),n.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ue(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(d.getElementsByClassName),n.getById=ue(function(e){return h.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],y=[],(n.qsa=Q.test(d.querySelectorAll))&&(ue(function(e){h.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||y.push("\\["+M+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+b+"-]").length||y.push("~="),e.querySelectorAll(":checked").length||y.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||y.push(".#.+[+~]")}),ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&y.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&y.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),y.push(",.*:")})),(n.matchesSelector=Q.test(m=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ue(function(e){n.disconnectedMatch=m.call(e,"*"),m.call(e,"[s!='']:x"),v.push("!=",W)}),y=y.length&&new RegExp(y.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(h.compareDocumentPosition),x=t||Q.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===d||e.ownerDocument===w&&x(w,e)?-1:t===d||t.ownerDocument===w&&x(w,t)?1:c?O(c,e)-O(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===d?-1:t===d?1:i?-1:o?1:c?O(c,e)-O(c,t):0;if(i===o)return ce(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?ce(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0},d):d},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&p(e),t=t.replace(z,"='$1']"),n.matchesSelector&&g&&!S[t+" "]&&(!v||!v.test(t))&&(!y||!y.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return oe(t,d,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==d&&p(e),x(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==d&&p(e);var i=r.attrHandle[t.toLowerCase()],o=i&&N.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+"").replace(te,ne)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(D),f){while(t=e[o++])t===e[o]&&(i=r.push(o));while(i--)e.splice(r[i],1)}return c=null,e},i=oe.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},(r=oe.selectors={cacheLength:50,createPseudo:se,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&E(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace($," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==a?"nextSibling":"previousSibling",y=t.parentNode,v=s&&t.nodeName.toLowerCase(),m=!u&&!s,x=!1;if(y){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?y.firstChild:y.lastChild],a&&m){x=(d=(l=(c=(f=(p=y)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1])&&l[2],p=d&&y.childNodes[d];while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if(1===p.nodeType&&++x&&p===t){c[e]=[T,d,x];break}}else if(m&&(x=d=(l=(c=(f=(p=t)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1]),!1===x)while(p=++d&&p&&p[g]||(x=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===v:1===p.nodeType)&&++x&&(m&&((c=(f=p[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]=[T,x]),p===t))break;return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){var r,o=i(e,t),a=o.length;while(a--)e[r=O(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(B,"$1"));return r[b]?se(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:se(function(e){return U.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:de(!1),disabled:de(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:he(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=bv(t);function ye(){}ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,a=oe.tokenize=function(e,t){var n,i,o,a,s,u,l,c=k[e+" "];if(c)return t?0:c.slice(0);s=e,u=[],l=r.preFilter;while(s){n&&!(i=F.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=_.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(B," ")}),s=s.slice(n.length));for(a in r.filter)!(i=V[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):k(e,u).slice(0)};function ve(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function bw(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=C++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var l,c,f,p=[T,s];if(u){while(t=t[r])if((1===t.nodeType||a)&&e(t,n,u))return!0}else while(t=t[r])if(1===t.nodeType||a)if(f=t[b]||(t[b]={}),c=f[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[o])&&l[0]===T&&l[1]===s)return p[2]=l[2];if(c[o]=p,p[2]=e(t,n,u))return!0}return!1}}function xe(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function bx(e,t,n){for(var r=0,i=t.length;r<i;r++)oe(e,t[r],n);return n}function we(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Te(e,t,n,r,i,o){return r&&!r[b]&&(r=Te(r)),i&&!i[b]&&(i=Te(i,o)),se(function(o,a,s,u){var l,c,f,p=[],d=[],h=a.length,g=o||bx(t||"*",s.nodeType?[s]:s,[]),y=!e||!o&&t?g:we(g,p,e,s,u),v=n?i||(o?e:h||r)?[]:a:y;if(n&&n(y,v,s,u),r){l=we(v,d),r(l,[],s,u),c=l.length;while(c--)(f=l[c])&&(v[d[c]]=!(y[d[c]]=f))}if(o){if(i||e){if(i){l=[],c=v.length;while(c--)(f=v[c])&&l.push(y[c]=f);i(null,v=[],l,u)}c=v.length;while(c--)(f=v[c])&&(l=i?O(o,f):p[c])>-1&&(o[l]=!(a[l]=f))}}else v=we(v===a?v.splice(h,v.length):v),i?i(null,a,v,u):L.apply(a,v)})}function Ce(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,c=bw(function(e){return e===t},s,!0),f=bw(function(e){return O(t,e)>-1},s,!0),p=[function(e,n,r){var i=!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])p=[bw(xe(p),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o;i++)if(r.relative[e[i].type])break;return Te(u>1&&xe(p),u>1&&ve(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(B,"$1"),n,u<i&&Ce(e.slice(u,i)),i<o&&Ce(e=e.slice(i)),i<o&&ve(e))}p.push(n)}return xe(p)}function Ee(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,c){var f,h,y,v=0,m="0",x=o&&[],b=[],w=l,C=o||i&&r.find.TAG("*",c),E=T+=null==w?1:Math.random()||.1,k=C.length;for(c&&(l=a===d||a||c);m!==k&&null!=(f=C[m]);m++){if(i&&f){h=0,a||f.ownerDocument===d||(p(f),s=!g);while(y=e[h++])if(y(f,a||d,s)){u.push(f);break}c&&(T=E)}n&&((f=!y&&f)&&v--,o&&x.push(f))}if(v+=m,n&&m!==v){h=0;while(y=t[h++])y(x,b,a,s);if(o){if(v>0)while(m--)x[m]||b[m]||(b[m]=j.call(u));b=we(b)}L.apply(u,b),c&&!o&&b.length>0&&v+t.length>1&&oe.uniqueSort(u)}return c&&(T=E,l=w),x};return n?se(o):o}return s=oe.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){t||(t=a(e)),n=t.length;while(n--)(o=Ce(t[n]))[b]?r.push(o):i.push(o);(o=S(e,Ee(i,r))).selector=e}return o},u=oe.select=function(e,t,n,i){var o,u,l,c,f,p="function"==typeof e&&e,d=!i&&a(e=p.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(Z,ee),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}o=V.needsContext.test(e)?0:u.length;while(o--){if(l=u[o],r.relative[c=l.type])break;if((f=r.find[c])&&(i=f(l.matches[0].replace(Z,ee),K.test(u[0].type)&&ge(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&ve(u)))return L.apply(n,i),n;break}}}return(p||s(e,d))(i,t,!g,n,!t||K.test(e)&&ge(t.parentNode)||t),n},n.sortStable=b.split("").sort(D).join("")===b,n.detectDuplicates=!!f,p(),n.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||bu("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||bu("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||bu(P,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),oe}(e);w.find=E,w.expr=E.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=E.uniqueSort,w.text=E.getText,w.isXMLDoc=E.isXML,w.contains=E.contains,w.escapeSelector=E.escape;var k=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&w(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},D=w.expr.match.needsContext;function N(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,t,n){return g(t)?w.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return u.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++)if(w.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,i[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&D.test(e)?w(e):e||[],!1).length}});var q,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:L.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:r,!0)),A.test(i[1])&&w.isPlainObject(t))for(i in t)g(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=r.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,q=w(r);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&w(e);if(!D.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?u.call(w(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function P(e,t){while((e=e[t])&&1!==e.nodeType);return e}w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,n){return k(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,n){return k(e,"nextSibling",n)},prevUntil:function(e,t,n){return k(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return N(e,"iframe")?e.contentDocument:(N(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(O[e]||w.uniqueSort(i),H.test(e)&&i.reverse()),this.pushStack(i)}});var M=/[^\x20\t\r\n\f]+/g;function R(e){var t={};return w.each(e.match(M)||[],function(e,n){t[n]=!0}),t}w.Callbacks=function(e){e="string"==typeof e?R(e):w.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1){n=a.shift();while(++s<o.length)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1)}e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){w.each(n,function(n,r){g(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==x(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return w.each(arguments,function(e,t){var n;while((n=w.inArray(t,o,n))>-1)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?w.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l};function I(e){return e}function W(e){throw e}function $(e,t,n,r){var i;try{e&&g(i=e.promise)?i.call(e).done(t).fail(n):e&&g(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},"catch":function(e){return i.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var i=g(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&g(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){var o=0;function a(t,n,r,i){return function(){var s=this,u=arguments,l=function(){var e,l;if(!(t<o)){if((e=r.apply(s,u))===n.promise())throw new TypeError("Thenable self-resolution");l=e&&("object"==typeof e||"function"==typeof e)&&e.then,g(l)?i?l.call(e,a(o,n,I,i),a(o,n,W,i)):(o++,l.call(e,a(o,n,I,i),a(o,n,W,i),a(o,n,I,n.notifyWith))):(r!==I&&(s=void 0,u=[e]),(i||n.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,c.stackTrace),t+1>=o&&(r!==W&&(s=void 0,u=[e]),n.rejectWith(s,u))}};t?c():(w.Deferred.getStackHook&&(c.stackTrace=w.Deferred.getStackHook()),e.setTimeout(c))}}return w.Deferred(function(e){n[0][3].add(a(0,e,g(i)?i:I,e.notifyWith)),n[1][3].add(a(0,e,g(t)?t:I)),n[2][3].add(a(0,e,g(r)?r:W))}).promise()},promise:function(e){return null!=e?w.extend(e,i):i}},o={};return w.each(n,function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=o.call(arguments),a=w.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?o.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&($(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||g(i[n]&&i[n].then)))return a.then();while(n--)$(i[n],s(n),a.reject);return a.promise()}});var B=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&B.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout(function(){throw t})};var F=w.Deferred();w.fn.ready=function(e){return F.then(e)["catch"](function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||F.resolveWith(r,[w]))}}),w.ready.then=F.then;function _(){r.removeEventListener("DOMContentLoaded",_),e.removeEventListener("load",_),w.ready()}"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?e.setTimeout(w.ready):(r.addEventListener("DOMContentLoaded",_),e.addEventListener("load",_));var z=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===x(n)){i=!0;for(s in n)z(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,g(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(w(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},X=/^-ms-/,U=/-([a-z])/g;function V(e,t){return t.toUpperCase()}function G(e){return e.replace(X,"ms-").replace(U,V)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Q(){this.expando=w.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[G(t)]=n;else for(r in t)i[G(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][G(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(G):(t=G(t))in r?[t]:t.match(M)||[]).length;while(n--)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var J=new Q,K=new Q,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ee=/[A-Z]/g;function te(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Z.test(e)?JSON.parse(e):e)}function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ee,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=te(n)}catch(e){}K.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return K.hasData(e)||J.hasData(e)},data:function(e,t,n){return K.access(e,t,n)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,n){return J.access(e,t,n)},_removeData:function(e,t){J.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=K.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){n=a.length;while(n--)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=G(r.slice(5)),ne(o,r,i[r]));J.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){K.set(this,e)}):z(this,function(t){var n;if(o&&void 0===t){if(void 0!==(n=K.get(o,e)))return n;if(void 0!==(n=ne(o,e)))return n}else this.each(function(){K.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){K.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=J.get(e,t),n&&(!r||Array.isArray(n)?r=J.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),o=w._queueHooks(e,t),a=function(){w.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return J.get(e,n)||J.access(e,n,{empty:w.Callbacks("once memory").add(function(){J.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=w.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=J.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var be=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+be+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&w.contains(e.ownerDocument,e)&&"none"===w.css(e,"display")},se=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};function ue(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return w.css(e,t,"")},u=s(),l=n&&n[3]||(w.cssNumber[t]?"":"px"),c=(w.cssNumber[t]||"px"!==l&&+u)&&ie.exec(w.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)w.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,w.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var bu={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,i=bu[r];return i||(t=n.body.appendChild(n.createElement(r)),i=w.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),bu[r]=i,i)}function fe(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=J.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[o]=ce(r))):"none"!==n&&(i[o]="none",J.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}w.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?w(this).show():w(this).hide()})}});var bv=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;function ye(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&N(e,t)?w.merge([e],n):n}function ve(e,t){for(var n=0,r=e.length;n<r;n++)J.set(e[n],"globalEval",!t||J.get(t[n],"globalEval"))}var bw=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===x(o))w.merge(p,o.nodeType?[o]:o);else if(bw.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+w.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;w.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&w.inArray(o,r)>-1)i&&i.push(o);else if(l=w.contains(o.ownerDocument,o),a=ye(f.appendChild(o),"script"),l&&ve(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}!function(){var e=r.createDocumentFragment().appendChild(r.createElement("div")),t=r.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),h.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var bx=r.documentElement,we=/^key/,Te=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ce=/^([^.]*)(?:\.(.+)|)/;function Ee(){return!0}function ke(){return!1}function Se(){try{return r.activeElement}catch(e){}}function De(e,t,n,r,i,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)De(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=ke;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return w().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=w.guid++)),e.each(function(){w.event.add(this,t,i,r,n)})}w.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.get(e);if(y){n.handler&&(n=(o=n).handler,i=o.selector),i&&w.find.matchesSelector(bx,i),n.guid||(n.guid=w.guid++),(u=y.events)||(u=y.events={}),(a=y.handle)||(a=y.handle=function(t){return"undefined"!=typeof w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(M)||[""]).length;while(l--)d=g=(s=Ce.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=w.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=w.event.special[d]||{},c=w.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(d,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),w.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,y=J.hasData(e)&&J.get(e);if(y&&(u=y.events)){l=(t=(t||"").match(M)||[""]).length;while(l--)if(s=Ce.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){f=w.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,y.handle)||w.removeEvent(e,d,y.handle),delete u[d])}else for(d in u)w.event.remove(e,d+t[l],n,r,!0);w.isEmptyObject(u)&&J.remove(e,"handle events")}},dispatch:function(e){var t=w.event.fix(e),n,r,i,o,a,s,u=new Array(arguments.length),l=(J.get(this,"events")||{})[t.type]||[],c=w.event.special[t.type]||{};for(u[0]=t,n=1;n<arguments.length;n++)u[n]=arguments[n];if(t.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,t)){s=w.event.handlers.call(this,t,l),n=0;while((o=s[n++])&&!t.isPropagationStopped()){t.currentTarget=o.elem,r=0;while((a=o.handlers[r++])&&!t.isImmediatePropagationStopped())t.rnamespace&&!t.rnamespace.test(a.namespace)||(t.handleObj=a,t.data=a.data,void 0!==(i=((w.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,u))&&!1===(t.result=i)&&(t.preventDefault(),t.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?w(i,this).index(l)>-1:w.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Se()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Se()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&N(this,"input"))return this.click(),!1},_default:function(e){return N(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ee:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ee,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ee,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ee,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Te.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},w.event.addProp),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||w.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return De(this,e,t,n,r)},one:function(e,t,n,r){return De(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ke),this.each(function(){w.event.remove(this,e,n,t)})}});var by=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ae=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,qe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Le(e,t){return N(e,"table")&&N(11!==t.nodeType?t:t.firstChild,"tr")?w(e).children("tbody")[0]||e:e}function He(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Oe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Pe(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(J.hasData(e)&&(o=J.access(e),a=J.set(t,o),l=o.events)){delete a.handle,a.events={};for(i in l)for(n=0,r=l[i].length;n<r;n++)w.event.add(t,i,l[i][n])}K.hasData(e)&&(s=K.access(e),u=w.extend({},s),K.set(t,u))}}function Me(e,t){var n=t.nodeName.toLowerCase();"input"===n&&bv.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Re(e,t,n,r){t=a.apply([],t);var i,o,s,u,l,c,f=0,p=e.length,d=p-1,y=t[0],v=g(y);if(v||p>1&&"string"==typeof y&&!h.checkClone&&je.test(y))return e.each(function(i){var o=e.eq(i);v&&(t[0]=y.call(this,i,o.html())),Re(o,t,n,r)});if(p&&(i=xe(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(s=w.map(ye(i,"script"),He)).length;f<p;f++)l=i,f!==d&&(l=w.clone(l,!0,!0),u&&w.merge(s,ye(l,"script"))),n.call(e[f],l,f);if(u)for(c=s[s.length-1].ownerDocument,w.map(s,Oe),f=0;f<u;f++)l=s[f],he.test(l.type||"")&&!J.access(l,"globalEval")&&w.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?w._evalUrl&&w._evalUrl(l.src):m(l.textContent.replace(qe,""),c,l))}return e}function Ie(e,t,n){for(var r,i=t?w.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||w.cleanData(ye(r)),r.parentNode&&(n&&w.contains(r.ownerDocument,r)&&ve(ye(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e.replace(by,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=w.contains(e.ownerDocument,e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(a=ye(s),r=0,i=(o=ye(e)).length;r<i;r++)Me(o[r],a[r]);if(t)if(n)for(o=o||ye(e),a=a||ye(s),r=0,i=o.length;r<i;r++)Pe(o[r],a[r]);else Pe(e,s);return(a=ye(s,"script")).length>0&&ve(a,!u&&ye(e,"script")),s},cleanData:function(e){for(var t,n,r,i=w.event.special,o=0;void 0!==(n=e[o]);o++)if(Y(n)){if(t=n[J.expando]){if(t.events)for(r in t.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[J.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}),w.fn.extend({detach:function(e){return Ie(this,e,!0)},remove:function(e){return Ie(this,e)},text:function(e){return z(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Re(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Le(this,e).appendChild(e)})},prepend:function(){return Re(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Le(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return z(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ae.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Re(this,arguments,function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(ye(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,r=[],i=w(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),w(i[a])[t](n),s.apply(r,n.get());return this.pushStack(r)}});var bz=new RegExp("^("+be+")(?!px)[a-z%]+$","i"),$e=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Be=new RegExp(oe.join("|"),"i");!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",bx.appendChild(l).appendChild(c);var t=e.getComputedStyle(c);i="1%"!==t.top,u=12===n(t.marginLeft),c.style.right="60%",s=36===n(t.right),o=36===n(t.width),c.style.position="absolute",a=36===c.offsetWidth||"absolute",bx.removeChild(l),c=null}}function n(e){return Math.round(parseFloat(e))}var i,o,a,s,u,l=r.createElement("div"),c=r.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(h,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),a}}))}();function Fe(e,t,n){var r,i,o,a,s=e.style;return(n=n||$e(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||w.contains(e.ownerDocument,e)||(a=w.style(e,t)),!h.pixelBoxStyles()&&bz.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function _e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}var bA=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ue={position:"absolute",visibility:"hidden",display:"block"},Ve={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","Moz","ms"],Ye=r.createElement("div").style;function Qe(e){if(e in Ye)return e;var t=e[0].toUpperCase()+e.slice(1),n=Ge.length;while(n--)if((e=Ge[n]+t)in Ye)return e}function Je(e){var t=w.cssProps[e];return t||(t=w.cssProps[e]=Qe(e)||e),t}function Ke(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=w.css(e,n+oe[a],!0,i)),r?("content"===n&&(u-=w.css(e,"padding"+oe[a],!0,i)),"margin"!==n&&(u-=w.css(e,"border"+oe[a]+"Width",!0,i))):(u+=w.css(e,"padding"+oe[a],!0,i),"padding"!==n?u+=w.css(e,"border"+oe[a]+"Width",!0,i):s+=w.css(e,"border"+oe[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))),u}function et(e,t,n){var r=$e(e),i=Fe(e,t,r),o="border-box"===w.css(e,"boxSizing",!1,r),a=o;if(bz.test(i)){if(!n)return i;i="auto"}return a=a&&(h.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===w.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(i=parseFloat(i)||0)+Ze(e,t,n||(o?"border":"content"),a,r,i)+"px"}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Fe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=G(t),u=Xe.test(t),l=e.style;if(u||(t=Je(s)),a=w.cssHooks[t]||w.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"==(o=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=ue(e,t,i),o="number"),null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(w.cssNumber[s]?"":"px")),h.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=G(t);return Xe.test(t)||(t=Je(s)),(a=w.cssHooks[t]||w.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Fe(e,t,r)),"normal"===i&&t in Ve&&(i=Ve[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!bA.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,r):se(e,Ue,function(){return et(e,t,r)})},set:function(e,n,r){var i,o=$e(e),a="border-box"===w.css(e,"boxSizing",!1,o),s=r&&Ze(e,t,r,a,o);return a&&h.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Ze(e,t,"border",!1,o)-.5)),s&&(i=ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),Ke(e,n,s)}}}),w.cssHooks.marginLeft=_e(h.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Fe(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+oe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(w.cssHooks[e+t].set=Ke)}),w.fn.extend({css:function(e,t){return z(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=$e(e),i=t.length;a<i;a++)o[t[a]]=w.css(e,t[a],!1,r);return o}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}});function tt(e,t,n,r,i){return new tt.prototype.init(e,t,n,r,i)}w.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(w.cssNumber[n]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,n=tt.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[w.cssProps[e.prop]]&&!w.cssHooks[e.prop]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=tt.prototype.init,w.fx.step={};var bB,rt,it=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function at(){rt&&(!1===r.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(at):e.setTimeout(at,w.fx.interval),w.fx.tick())}function st(){return e.setTimeout(function(){bB=void 0}),bB=Date.now()}function ut(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=oe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function lt(e,t,n){for(var r,i=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ct(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),y=J.get(e,"fxshow");n.queue||(null==(a=w._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,w.queue(e,"fx").length||a.empty.fire()})}));for(r in t)if(i=t[r],it.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!y||void 0===y[r])continue;g=!0}d[r]=y&&y[r]||w.style(e,r)}if((u=!w.isEmptyObject(t))||!w.isEmptyObject(d)){f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=y&&y.display)&&(l=J.get(e,"display")),"none"===(c=w.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=w.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===w.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1;for(r in d)u||(y?"hidden"in y&&(g=y.hidden):y=J.access(e,"fxshow",{display:l}),o&&(y.hidden=!g),g&&fe([e],!0),p.done(function(){g||fe([e]),J.remove(e,"fxshow");for(r in d)w.style(e,r,d[r])})),u=lt(g?y[r]:0,r,p),r in y||(y[r]=u.start,g&&(u.end=u.start,u.start=0))}}function ft(e,t){var n,r,i,o,a;for(n in e)if(r=G(n),i=t[r],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=w.cssHooks[r])&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function pt(e,t,n){var r,i,o=0,a=pt.prefilters.length,s=w.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=bB||st(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(a||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:bB||st(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(ft(c,l.opts.specialEasing);o<a;o++)if(r=pt.prefilters[o].call(l,e,c,l.opts))return g(r.stop)&&(w._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return w.map(c,lt,l),g(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),w.fx.timer(w.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}w.Animation=w.extend(pt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(M);for(var n,r=0,i=e.length;r<i;r++)n=e[r],pt.tweeners[n]=pt.tweeners[n]||[],pt.tweeners[n].unshift(t)},prefilters:[ct],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),o=w.speed(t,n,r),a=function(){var t=pt(this,w.extend({},e),o);(i||J.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=w.timers,a=J.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ot.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=J.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=w.timers,a=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,r,i)}}),w.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(bB=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),bB=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){rt||(rt=!0,at())},w.fx.stop=function(){rt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx?w.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=r.createElement("input"),t=r.createElement("select").appendChild(r.createElement("option"));e.type="checkbox",h.checkOn=""!==e.value,h.optSelected=t.selected,(e=r.createElement("input")).value="t",e.type="radio",h.radioValue="t"===e.value}();var bC,ht=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return z(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?w.prop(e,t,n):(1===o&&w.isXMLDoc(e)||(i=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?bC:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&N(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(M);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),bC={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ht[t]||w.find.attr;ht[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=ht[a],ht[a]=i,i=null!=n(e,t,r)?a:null,ht[a]=o),i}});var bD=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;w.fn.extend({prop:function(e,t){return z(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(e)||(t=w.propFix[t]||t,i=w.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):bD.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),h.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this});function vt(e){return(e.match(M)||[]).join(" ")}function mt(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){return Array.isArray(e)?e:"string"==typeof e?e.match(M)||[]:[]}w.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).addClass(e.call(this,t,mt(this)))});if((t=xt(e)).length)while(n=this[u++])if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=t[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){w(this).removeClass(e.call(this,t,mt(this)))});if(!arguments.length)return this.attr("class","");if((t=xt(e)).length)while(n=this[u++])if(i=mt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=t[a++])while(r.indexOf(" "+o+" ")>-1)r=r.replace(" "+o+" "," ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):g(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,mt(this),t),t)}):this.each(function(){var t,i,o,a;if(r){i=0,o=w(this),a=xt(e);while(t=a[i++])o.hasClass(t)?o.removeClass(t):o.addClass(t)}else void 0!==e&&"boolean"!==n||((t=mt(this))&&J.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":J.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&(" "+vt(mt(n))+" ").indexOf(t)>-1)return!0;return!1}});var bE=/\r/g;w.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=g(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,w(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return(t=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(bE,""):null==n?"":n}}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:vt(w.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,"optgroup"))){if(t=w(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=w.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=w.inArray(w.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},h.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),h.focusin="onfocusin"in e;var bF=/^(?:focusinfocus|focusoutblur)$/,Tt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,i,o){var a,s,u,l,c,p,d,h,v=[i||r],m=f.call(t,"type")?t.type:t,x=f.call(t,"namespace")?t.namespace.split("."):[];if(s=h=u=i=i||r,3!==i.nodeType&&8!==i.nodeType&&!bF.test(m+w.event.triggered)&&(m.indexOf(".")>-1&&(m=(x=m.split(".")).shift(),x.sort()),c=m.indexOf(":")<0&&"on"+m,t=t[w.expando]?t:new w.Event(m,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=x.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:w.makeArray(n,[t]),d=w.event.special[m]||{},o||!d.trigger||!1!==d.trigger.apply(i,n))){if(!o&&!d.noBubble&&!y(i)){for(l=d.delegateType||m,bF.test(l+m)||(s=s.parentNode);s;s=s.parentNode)v.push(s),u=s;u===(i.ownerDocument||r)&&v.push(u.defaultView||u.parentWindow||e)}a=0;while((s=v[a++])&&!t.isPropagationStopped())h=s,t.type=a>1?l:d.bindType||m,(p=(J.get(s,"events")||{})[t.type]&&J.get(s,"handle"))&&p.apply(s,n),(p=c&&s[c])&&p.apply&&Y(s)&&(t.result=p.apply(s,n),!1===t.result&&t.preventDefault());return t.type=m,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(v.pop(),n)||!Y(i)||c&&g(i[m])&&!y(i)&&((u=i[c])&&(i[c]=null),w.event.triggered=m,t.isPropagationStopped()&&h.addEventListener(m,Tt),i[m](),t.isPropagationStopped()&&h.removeEventListener(m,Tt),w.event.triggered=void 0,u&&(i[c]=u)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),h.focusin||w.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=J.access(r,t);i||r.addEventListener(e,n,!0),J.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=J.access(r,t)-1;i?J.access(r,t,i):(r.removeEventListener(e,n,!0),J.remove(r,t))}}});var bG=e.location,Et=Date.now(),kt=/\?/;w.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),n};var bH=/\[\]$/,Dt=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function jt(e,t,n,r){var i;if(Array.isArray(t))w.each(t,function(t,i){n||bH.test(e)?r(e,i):jt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==x(t))r(e,t);else for(i in t)jt(e+"["+i+"]",t[i],n,r)}w.param=function(e,t){var n,r=[],i=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){i(this.name,this.value)});else for(n in e)jt(n,e[n],t,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&At.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!bv.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:n.replace(Dt,"\r\n")}}).get()}});var bI=/%20/g,Lt=/#.*$/,Ht=/([?&])_=[^&]*/,Ot=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mt=/^(?:GET|HEAD)$/,Rt=/^\/\//,It={},Wt={},$t="*/".concat("*"),Bt=r.createElement("a");Bt.href=bG.href;function Ft(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(M)||[];if(g(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function _t(e,t,n,r){var i={},o=e===Wt;function a(s){var u;return i[s]=!0,w.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function zt(e,t){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}function Xt(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}function Ut(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bG.href,type:"GET",isLocal:Pt.test(bG.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,w.ajaxSettings),t):zt(w.ajaxSettings,e)},ajaxPrefilter:Ft(It),ajaxTransport:Ft(Wt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,a,s,u,l,c,f,p,d,h=w.ajaxSetup({},n),g=h.context||h,y=h.context&&(g.nodeType||g.jquery)?w(g):w.event,v=w.Deferred(),m=w.Callbacks("once memory"),x=h.statusCode||{},b={},T={},C="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s){s={};while(t=Ot.exec(a))s[t[1].toLowerCase()]=t[2]}t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)E.always(e[E.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||C;return i&&i.abort(t),k(0,t),this}};if(v.promise(E),h.url=((t||h.url||bG.href)+"").replace(Rt,bG.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(M)||[""],null==h.crossDomain){l=r.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=Bt.protocol+"//"+Bt.host!=l.protocol+"//"+l.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=w.param(h.data,h.traditional)),_t(It,h,n,E),c)return E;(f=w.event&&h.global)&&0==w.active++&&w.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Mt.test(h.type),o=h.url.replace(Lt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(bI,"+")):(d=h.url.slice(o.length),h.data&&(h.processData||"string"==typeof h.data)&&(o+=(kt.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(o=o.replace(Ht,"$1"),d=(kt.test(o)?"&":"?")+"_="+Et+++d),h.url=o+d),h.ifModified&&(w.lastModified[o]&&E.setRequestHeader("If-Modified-Since",w.lastModified[o]),w.etag[o]&&E.setRequestHeader("If-None-Match",w.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&E.setRequestHeader("Content-Type",h.contentType),E.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+$t+"; q=0.01":""):h.accepts["*"]);for(p in h.headers)E.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(!1===h.beforeSend.call(g,E,h)||c))return E.abort();if(C="abort",m.add(h.complete),E.done(h.success),E.fail(h.error),i=_t(Wt,h,n,E)){if(E.readyState=1,f&&y.trigger("ajaxSend",[E,h]),c)return E;h.async&&h.timeout>0&&(u=e.setTimeout(function(){E.abort("timeout")},h.timeout));try{c=!1,i.send(b,k)}catch(e){if(c)throw e;k(-1,e)}}else k(-1,"No Transport");function k(t,n,r,s){var l,p,d,b,T,C=n;c||(c=!0,u&&e.clearTimeout(u),i=void 0,a=s||"",E.readyState=t>0?4:0,l=t>=200&&t<300||304===t,r&&(b=Xt(h,E,r)),b=Ut(h,b,E,l),l?(h.ifModified&&((T=E.getResponseHeader("Last-Modified"))&&(w.lastModified[o]=T),(T=E.getResponseHeader("etag"))&&(w.etag[o]=T)),204===t||"HEAD"===h.type?C="nocontent":304===t?C="notmodified":(C=b.state,p=b.data,l=!(d=b.error))):(d=C,!t&&C||(C="error",t<0&&(t=0))),E.status=t,E.statusText=(n||C)+"",l?v.resolveWith(g,[p,C,E]):v.rejectWith(g,[E,C,d]),E.statusCode(x),x=void 0,f&&y.trigger(l?"ajaxSuccess":"ajaxError",[E,h,l?p:d]),m.fireWith(g,[E,C]),f&&(y.trigger("ajaxComplete",[E,h]),--w.active||w.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:i,data:n,success:r},w.isPlainObject(e)&&e))}}),w._evalUrl=function(e){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return g(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=g(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var bJ={0:200,1223:204},Gt=w.ajaxSettings.xhr();h.cors=!!Gt&&"withCredentials"in Gt,h.ajax=Gt=!!Gt,w.ajaxTransport(function(t){var n,r;if(h.cors||Gt&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(bJ[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,o){t=w("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){n&&n()}}}});var bK=[],Qt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=bK.pop()||w.expando+"_"+Et++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Qt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Qt,"$1"+i):!1!==t.jsonp&&(t.url+=(kt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||w.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?w(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,bK.push(i)),a&&g(o)&&o(a[0]),a=o=void 0}),"script"}),h.createHTMLDocument=function(){var e=r.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),w.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var i,o,a;return t||(h.createHTMLDocument?((i=(t=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,t.head.appendChild(i)):t=r),o=A.exec(e),a=!n&&[],o?[t.createElement(o[1])]:(o=xe([e],t,a),a&&a.length&&w(a).remove(),w.merge([],o.childNodes))},w.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=vt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&w.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l,c=w.css(e,"position"),f=w(e),p={};"static"===c&&(e.style.position="relative"),s=f.offset(),o=w.css(e,"top"),u=w.css(e,"left"),(l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1)?(a=(r=f.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),g(t)&&(t=t.call(e,n,w.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+i),"using"in t?t.using.call(e,p):f.css(p)}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,r=this[0];if(r)return r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),i.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-w.css(r,"marginTop",!0),left:t.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===w.css(e,"position"))e=e.offsetParent;return e||bx})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return z(this,function(e,r,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=_e(h.pixelPosition,function(e,n){if(n)return n=Fe(e,t),bz.test(n)?w(e).position()[t]+"px":n})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){w.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return z(this,function(t,n,i){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?w.css(t,n,s):w.style(t,n,i,s)},t,a?i:void 0,a)}})}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),w.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),w.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),g(e))return r=o.call(arguments,2),i=function(){return e.apply(t||this,r.concat(o.call(arguments)))},i.guid=e.guid=e.guid||w.guid++,i},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=N,w.isFunction=g,w.isWindow=y,w.camelCase=G,w.type=x,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return w});var bL=e.jQuery,Kt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Kt),t&&e.jQuery===w&&(e.jQuery=bL),w},t||(e.jQuery=e.$=w),w})}());!function(e,t,i){"use strict";"function"==typeof define&&define.amd?define(i):"undefined"!=typeof module&&module.exports?module.exports=i():t.exports?t.exports=i():t[e]=i()}("Fingerprint2",this,function(){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var i;if(null==this)throw new TypeError("'this' is null or undefined");var a=Object(this),r=a.length>>>0;if(0===r)return-1;var n=+t||0;if(Math.abs(n)===1/0&&(n=0),n>=r)return-1;for(i=Math.max(n>=0?n:r-Math.abs(n),0);i<r;){if(i in a&&a[i]===e)return i;i++}return-1});var e=function(t){if(!(this instanceof e))return new e(t);var i={swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",detectScreenOrientation:!0,sortPluginsFor:[/palemoon/i],userDefinedFonts:[]};this.options=this.extend(t,i),this.nativeForEach=Array.prototype.forEach,this.nativeMap=Array.prototype.map};return e.prototype={extend:function(e,t){if(null==e)return t;for(var i in e)null!=e[i]&&t[i]!==e[i]&&(t[i]=e[i]);return t},log:function(e){window.console&&console.log(e)},get:function(e){var t=[];t=this.userAgentKey(t),t=this.languageKey(t),t=this.colorDepthKey(t),t=this.pixelRatioKey(t),t=this.hardwareConcurrencyKey(t),t=this.screenResolutionKey(t),t=this.availableScreenResolutionKey(t),t=this.timezoneOffsetKey(t),t=this.sessionStorageKey(t),t=this.localStorageKey(t),t=this.indexedDbKey(t),t=this.addBehaviorKey(t),t=this.openDatabaseKey(t),t=this.cpuClassKey(t),t=this.platformKey(t),t=this.doNotTrackKey(t),t=this.pluginsKey(t),t=this.canvasKey(t),t=this.webglKey(t),t=this.adBlockKey(t),t=this.hasLiedLanguagesKey(t),t=this.hasLiedResolutionKey(t),t=this.hasLiedOsKey(t),t=this.hasLiedBrowserKey(t),t=this.touchSupportKey(t);var i=this;this.fontsKey(t,function(t){var a=[];i.each(t,function(e){var t=e.value;"undefined"!=typeof e.value.join&&(t=e.value.join(";")),a.push(t)});var r=i.x64hash128(a.join("~~~"),31);return e(r,t)})},userAgentKey:function(e){return this.options.excludeUserAgent||e.push({key:"user_agent",value:this.getUserAgent()}),e},getUserAgent:function(){return navigator.userAgent},languageKey:function(e){return this.options.excludeLanguage||e.push({key:"language",value:navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||""}),e},colorDepthKey:function(e){return this.options.excludeColorDepth||e.push({key:"color_depth",value:screen.colorDepth||-1}),e},pixelRatioKey:function(e){return this.options.excludePixelRatio||e.push({key:"pixel_ratio",value:this.getPixelRatio()}),e},getPixelRatio:function(){return window.devicePixelRatio||""},screenResolutionKey:function(e){return this.options.excludeScreenResolution?e:this.getScreenResolution(e)},getScreenResolution:function(e){var t;return t=this.options.detectScreenOrientation&&screen.height>screen.width?[screen.height,screen.width]:[screen.width,screen.height],"undefined"!=typeof t&&e.push({key:"resolution",value:t}),e},availableScreenResolutionKey:function(e){return this.options.excludeAvailableScreenResolution?e:this.getAvailableScreenResolution(e)},getAvailableScreenResolution:function(e){var t;return screen.availWidth&&screen.availHeight&&(t=this.options.detectScreenOrientation?screen.availHeight>screen.availWidth?[screen.availHeight,screen.availWidth]:[screen.availWidth,screen.availHeight]:[screen.availHeight,screen.availWidth]),"undefined"!=typeof t&&e.push({key:"available_resolution",value:t}),e},timezoneOffsetKey:function(e){return this.options.excludeTimezoneOffset||e.push({key:"timezone_offset",value:(new Date).getTimezoneOffset()}),e},sessionStorageKey:function(e){return!this.options.excludeSessionStorage&&this.hasSessionStorage()&&e.push({key:"session_storage",value:1}),e},localStorageKey:function(e){return!this.options.excludeSessionStorage&&this.hasLocalStorage()&&e.push({key:"local_storage",value:1}),e},indexedDbKey:function(e){return!this.options.excludeIndexedDB&&this.hasIndexedDB()&&e.push({key:"indexed_db",value:1}),e},addBehaviorKey:function(e){return document.body&&!this.options.excludeAddBehavior&&document.body.addBehavior&&e.push({key:"add_behavior",value:1}),e},openDatabaseKey:function(e){return!this.options.excludeOpenDatabase&&window.openDatabase&&e.push({key:"open_database",value:1}),e},cpuClassKey:function(e){return this.options.excludeCpuClass||e.push({key:"cpu_class",value:this.getNavigatorCpuClass()}),e},platformKey:function(e){return this.options.excludePlatform||e.push({key:"navigator_platform",value:this.getNavigatorPlatform()}),e},doNotTrackKey:function(e){return this.options.excludeDoNotTrack||e.push({key:"do_not_track",value:this.getDoNotTrack()}),e},canvasKey:function(e){return!this.options.excludeCanvas&&this.isCanvasSupported()&&e.push({key:"canvas",value:this.getCanvasFp()}),e},webglKey:function(e){return this.options.excludeWebGL?e:this.isWebGlSupported()?(e.push({key:"webgl",value:this.getWebglFp()}),e):e},adBlockKey:function(e){return this.options.excludeAdBlock||e.push({key:"adblock",value:this.getAdBlock()}),e},hasLiedLanguagesKey:function(e){return this.options.excludeHasLiedLanguages||e.push({key:"has_lied_languages",value:this.getHasLiedLanguages()}),e},hasLiedResolutionKey:function(e){return this.options.excludeHasLiedResolution||e.push({key:"has_lied_resolution",value:this.getHasLiedResolution()}),e},hasLiedOsKey:function(e){return this.options.excludeHasLiedOs||e.push({key:"has_lied_os",value:this.getHasLiedOs()}),e},hasLiedBrowserKey:function(e){return this.options.excludeHasLiedBrowser||e.push({key:"has_lied_browser",value:this.getHasLiedBrowser()}),e},fontsKey:function(e,t){return this.options.excludeJsFonts?this.flashFontsKey(e,t):this.jsFontsKey(e,t)},flashFontsKey:function(e,t){return this.options.excludeFlashFonts?t(e):this.hasSwfObjectLoaded()&&this.hasMinFlashInstalled()?"undefined"==typeof this.options.swfPath?t(e):void this.loadSwfAndDetectFonts(function(i){e.push({key:"swf_fonts",value:i.join(";")}),t(e)}):t(e)},jsFontsKey:function(e,t){var i=this;return setTimeout(function(){var a=["monospace","sans-serif","serif"],r=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Garamond","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"],n=["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"];i.options.extendedJsFonts&&(r=r.concat(n)),r=r.concat(i.options.userDefinedFonts);var o="mmmmmmmmmmlli",s="72px",l=document.getElementsByTagName("body")[0],h=document.createElement("div"),u=document.createElement("div"),d={},c={},g=function(){var e=document.createElement("span");return e.style.position="absolute",e.style.left="-9999px",e.style.fontSize=s,e.style.lineHeight="normal",e.innerHTML=o,e},p=function(e,t){var i=g();return i.style.fontFamily="'"+e+"',"+t,i},f=function(){for(var e=[],t=0,i=a.length;t<i;t++){var r=g();r.style.fontFamily=a[t],h.appendChild(r),e.push(r)}return e},m=function(){for(var e={},t=0,i=r.length;t<i;t++){for(var n=[],o=0,s=a.length;o<s;o++){var l=p(r[t],a[o]);u.appendChild(l),n.push(l)}e[r[t]]=n}return e},T=function(e){for(var t=!1,i=0;i<a.length;i++)if(t=e[i].offsetWidth!==d[a[i]]||e[i].offsetHeight!==c[a[i]])return t;return t},S=f();l.appendChild(h);for(var x=0,v=a.length;x<v;x++)d[a[x]]=S[x].offsetWidth,c[a[x]]=S[x].offsetHeight;var M=m();l.appendChild(u);for(var E=[],A=0,y=r.length;A<y;A++)T(M[r[A]])&&E.push(r[A]);l.removeChild(u),l.removeChild(h),e.push({key:"js_fonts",value:E}),t(e)},1)},pluginsKey:function(e){return this.options.excludePlugins||(this.isIE()?this.options.excludeIEPlugins||e.push({key:"ie_plugins",value:this.getIEPlugins()}):e.push({key:"regular_plugins",value:this.getRegularPlugins()})),e},getRegularPlugins:function(){for(var e=[],t=0,i=navigator.plugins.length;t<i;t++)e.push(navigator.plugins[t]);return this.pluginsShouldBeSorted()&&(e=e.sort(function(e,t){return e.name>t.name?1:e.name<t.name?-1:0})),this.map(e,function(e){var t=this.map(e,function(e){return[e.type,e.suffixes].join("~")}).join(",");return[e.name,e.description,t].join("::")},this)},getIEPlugins:function(){var e=[];if(Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window){var t=["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"];e=this.map(t,function(e){try{return new ActiveXObject(e),e}catch(t){return null}})}return navigator.plugins&&(e=e.concat(this.getRegularPlugins())),e},pluginsShouldBeSorted:function(){for(var e=!1,t=0,i=this.options.sortPluginsFor.length;t<i;t++){var a=this.options.sortPluginsFor[t];if(navigator.userAgent.match(a)){e=!0;break}}return e},touchSupportKey:function(e){return this.options.excludeTouchSupport||e.push({key:"touch_support",value:this.getTouchSupport()}),e},hardwareConcurrencyKey:function(e){return this.options.excludeHardwareConcurrency||e.push({key:"hardware_concurrency",value:this.getHardwareConcurrency()}),e},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return!0}},hasIndexedDB:function(){try{return!!window.indexedDB}catch(e){return!0}},getHardwareConcurrency:function(){return navigator.hardwareConcurrency?navigator.hardwareConcurrency:"unknown"},getNavigatorCpuClass:function(){return navigator.cpuClass?navigator.cpuClass:"unknown"},getNavigatorPlatform:function(){return navigator.platform?navigator.platform:"unknown"},getDoNotTrack:function(){return navigator.doNotTrack?navigator.doNotTrack:navigator.msDoNotTrack?navigator.msDoNotTrack:window.doNotTrack?window.doNotTrack:"unknown"},getTouchSupport:function(){var e=0,t=!1;"undefined"!=typeof navigator.maxTouchPoints?e=navigator.maxTouchPoints:"undefined"!=typeof navigator.msMaxTouchPoints&&(e=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),t=!0}catch(i){}var a="ontouchstart"in window;return[e,t,a]},getCanvasFp:function(){var e=[],t=document.createElement("canvas");t.width=2e3,t.height=200,t.style.display="inline";var i=t.getContext("2d");return i.rect(0,0,10,10),i.rect(2,2,6,6),e.push("canvas winding:"+(i.isPointInPath(5,5,"evenodd")===!1?"yes":"no")),i.textBaseline="alphabetic",i.fillStyle="#f60",i.fillRect(125,1,62,20),i.fillStyle="#069",this.options.dontUseFakeFontInCanvas?i.font="11pt Arial":i.font="11pt no-real-font-123",i.fillText("Cwm fjordbank glyphs vext quiz, \ud83d\ude03",2,15),i.fillStyle="rgba(102, 204, 0, 0.2)",i.font="18pt Arial",i.fillText("Cwm fjordbank glyphs vext quiz, \ud83d\ude03",4,45),i.globalCompositeOperation="multiply",i.fillStyle="rgb(255,0,255)",i.beginPath(),i.arc(50,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(0,255,255)",i.beginPath(),i.arc(100,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,255,0)",i.beginPath(),i.arc(75,100,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,0,255)",i.arc(75,75,75,0,2*Math.PI,!0),i.arc(75,75,25,0,2*Math.PI,!0),i.fill("evenodd"),e.push("canvas fp:"+t.toDataURL()),e.join("~")},getWebglFp:function(){var e,t=function(t){return e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),"["+t[0]+", "+t[1]+"]"},i=function(e){var t,i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic");return i?(t=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT),0===t&&(t=2),t):null};if(e=this.getWebglCanvas(),!e)return null;var a=[],r="attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}",n="precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}",o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o);var s=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW),o.itemSize=3,o.numItems=3;var l=e.createProgram(),h=e.createShader(e.VERTEX_SHADER);e.shaderSource(h,r),e.compileShader(h);var u=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(u,n),e.compileShader(u),e.attachShader(l,h),e.attachShader(l,u),e.linkProgram(l),e.useProgram(l),l.vertexPosAttrib=e.getAttribLocation(l,"attrVertex"),l.offsetUniform=e.getUniformLocation(l,"uniformOffset"),e.enableVertexAttribArray(l.vertexPosArray),e.vertexAttribPointer(l.vertexPosAttrib,o.itemSize,e.FLOAT,!1,0,0),e.uniform2f(l.offsetUniform,1,1),e.drawArrays(e.TRIANGLE_STRIP,0,o.numItems),null!=e.canvas&&a.push(e.canvas.toDataURL()),a.push("extensions:"+e.getSupportedExtensions().join(";")),a.push("webgl aliased line width range:"+t(e.getParameter(e.ALIASED_LINE_WIDTH_RANGE))),a.push("webgl aliased point size range:"+t(e.getParameter(e.ALIASED_POINT_SIZE_RANGE))),a.push("webgl alpha bits:"+e.getParameter(e.ALPHA_BITS)),a.push("webgl antialiasing:"+(e.getContextAttributes().antialias?"yes":"no")),a.push("webgl blue bits:"+e.getParameter(e.BLUE_BITS)),a.push("webgl depth bits:"+e.getParameter(e.DEPTH_BITS)),a.push("webgl green bits:"+e.getParameter(e.GREEN_BITS)),a.push("webgl max anisotropy:"+i(e)),a.push("webgl max combined texture image units:"+e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),a.push("webgl max cube map texture size:"+e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE)),a.push("webgl max fragment uniform vectors:"+e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS)),a.push("webgl max render buffer size:"+e.getParameter(e.MAX_RENDERBUFFER_SIZE)),a.push("webgl max texture image units:"+e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)),a.push("webgl max texture size:"+e.getParameter(e.MAX_TEXTURE_SIZE)),a.push("webgl max varying vectors:"+e.getParameter(e.MAX_VARYING_VECTORS)),a.push("webgl max vertex attribs:"+e.getParameter(e.MAX_VERTEX_ATTRIBS)),a.push("webgl max vertex texture image units:"+e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),a.push("webgl max vertex uniform vectors:"+e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS)),a.push("webgl max viewport dims:"+t(e.getParameter(e.MAX_VIEWPORT_DIMS))),a.push("webgl red bits:"+e.getParameter(e.RED_BITS)),a.push("webgl renderer:"+e.getParameter(e.RENDERER)),a.push("webgl shading language version:"+e.getParameter(e.SHADING_LANGUAGE_VERSION)),a.push("webgl stencil bits:"+e.getParameter(e.STENCIL_BITS)),a.push("webgl vendor:"+e.getParameter(e.VENDOR)),a.push("webgl version:"+e.getParameter(e.VERSION));try{var d=e.getExtension("WEBGL_debug_renderer_info");d&&(a.push("webgl unmasked vendor:"+e.getParameter(d.UNMASKED_VENDOR_WEBGL)),a.push("webgl unmasked renderer:"+e.getParameter(d.UNMASKED_RENDERER_WEBGL)))}catch(c){}return e.getShaderPrecisionFormat?(a.push("webgl vertex shader high float precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision),a.push("webgl vertex shader high float precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).rangeMin),a.push("webgl vertex shader high float precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).rangeMax),a.push("webgl vertex shader medium float precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision),a.push("webgl vertex shader medium float precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).rangeMin),a.push("webgl vertex shader medium float precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).rangeMax),a.push("webgl vertex shader low float precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_FLOAT).precision),a.push("webgl vertex shader low float precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_FLOAT).rangeMin),a.push("webgl vertex shader low float precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_FLOAT).rangeMax),a.push("webgl fragment shader high float precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision),a.push("webgl fragment shader high float precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).rangeMin),a.push("webgl fragment shader high float precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).rangeMax),a.push("webgl fragment shader medium float precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision),a.push("webgl fragment shader medium float precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).rangeMin),a.push("webgl fragment shader medium float precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).rangeMax),a.push("webgl fragment shader low float precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_FLOAT).precision),a.push("webgl fragment shader low float precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_FLOAT).rangeMin),a.push("webgl fragment shader low float precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_FLOAT).rangeMax),a.push("webgl vertex shader high int precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_INT).precision),a.push("webgl vertex shader high int precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_INT).rangeMin),a.push("webgl vertex shader high int precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_INT).rangeMax),a.push("webgl vertex shader medium int precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_INT).precision),a.push("webgl vertex shader medium int precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_INT).rangeMin),a.push("webgl vertex shader medium int precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_INT).rangeMax),a.push("webgl vertex shader low int precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_INT).precision),a.push("webgl vertex shader low int precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_INT).rangeMin),a.push("webgl vertex shader low int precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_INT).rangeMax),a.push("webgl fragment shader high int precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT).precision),a.push("webgl fragment shader high int precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT).rangeMin),a.push("webgl fragment shader high int precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT).rangeMax),a.push("webgl fragment shader medium int precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_INT).precision),a.push("webgl fragment shader medium int precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_INT).rangeMin),a.push("webgl fragment shader medium int precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_INT).rangeMax),a.push("webgl fragment shader low int precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_INT).precision),a.push("webgl fragment shader low int precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_INT).rangeMin),a.push("webgl fragment shader low int precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_INT).rangeMax),a.join("~")):a.join("~")},getAdBlock:function(){var e=document.createElement("div");e.innerHTML="&nbsp;",e.className="adsbox";var t=!1;try{document.body.appendChild(e),t=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(e)}catch(i){t=!1}return t},getHasLiedLanguages:function(){if("undefined"!=typeof navigator.languages)try{var e=navigator.languages[0].substr(0,2);if(e!==navigator.language.substr(0,2))return!0}catch(t){return!0}return!1},getHasLiedResolution:function(){return screen.width<screen.availWidth||screen.height<screen.availHeight},getHasLiedOs:function(){var e,t=navigator.userAgent.toLowerCase(),i=navigator.oscpu,a=navigator.platform.toLowerCase();e=t.indexOf("windows phone")>=0?"Windows Phone":t.indexOf("win")>=0?"Windows":t.indexOf("android")>=0?"Android":t.indexOf("linux")>=0?"Linux":t.indexOf("iphone")>=0||t.indexOf("ipad")>=0?"iOS":t.indexOf("mac")>=0?"Mac":"Other";var r;if(r="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,r&&"Windows Phone"!==e&&"Android"!==e&&"iOS"!==e&&"Other"!==e)return!0;if("undefined"!=typeof i){if(i=i.toLowerCase(),i.indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e)return!0;if(i.indexOf("linux")>=0&&"Linux"!==e&&"Android"!==e)return!0;if(i.indexOf("mac")>=0&&"Mac"!==e&&"iOS"!==e)return!0;if(0===i.indexOf("win")&&0===i.indexOf("linux")&&i.indexOf("mac")>=0&&"other"!==e)return!0}return a.indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e||((a.indexOf("linux")>=0||a.indexOf("android")>=0||a.indexOf("pike")>=0)&&"Linux"!==e&&"Android"!==e||((a.indexOf("mac")>=0||a.indexOf("ipad")>=0||a.indexOf("ipod")>=0||a.indexOf("iphone")>=0)&&"Mac"!==e&&"iOS"!==e||(0===a.indexOf("win")&&0===a.indexOf("linux")&&a.indexOf("mac")>=0&&"other"!==e||"undefined"==typeof navigator.plugins&&"Windows"!==e&&"Windows Phone"!==e)))},getHasLiedBrowser:function(){var e,t=navigator.userAgent.toLowerCase(),i=navigator.productSub;if(e=t.indexOf("firefox")>=0?"Firefox":t.indexOf("opera")>=0||t.indexOf("opr")>=0?"Opera":t.indexOf("chrome")>=0?"Chrome":t.indexOf("safari")>=0?"Safari":t.indexOf("trident")>=0?"Internet Explorer":"Other",("Chrome"===e||"Safari"===e||"Opera"===e)&&"20030107"!==i)return!0;var a=eval.toString().length;if(37===a&&"Safari"!==e&&"Firefox"!==e&&"Other"!==e)return!0;if(39===a&&"Internet Explorer"!==e&&"Other"!==e)return!0;if(33===a&&"Chrome"!==e&&"Opera"!==e&&"Other"!==e)return!0;var r;try{throw"a"}catch(n){try{n.toSource(),r=!0}catch(o){r=!1}}return!(!r||"Firefox"===e||"Other"===e)},isCanvasSupported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isWebGlSupported:function(){if(!this.isCanvasSupported())return!1;var e,t=document.createElement("canvas");try{e=t.getContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(i){e=!1}return!!window.WebGLRenderingContext&&!!e},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName||!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent))},hasSwfObjectLoaded:function(){return"undefined"!=typeof window.swfobject},hasMinFlashInstalled:function(){return swfobject.hasFlashPlayerVersion("9.0.0")},addFlashDivNode:function(){var e=document.createElement("div");e.setAttribute("id",this.options.swfContainerId),document.body.appendChild(e)},loadSwfAndDetectFonts:function(e){var t="___fp_swf_loaded";window[t]=function(t){e(t)};var i=this.options.swfContainerId;this.addFlashDivNode();var a={onReady:t},r={allowScriptAccess:"always",menu:"false"};swfobject.embedSWF(this.options.swfPath,i,"1","1","9.0.0",!1,a,r,{})},getWebglCanvas:function(){var e=document.createElement("canvas"),t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(i){}return t||(t=null),t},each:function(e,t,i){if(null!==e)if(this.nativeForEach&&e.forEach===this.nativeForEach)e.forEach(t,i);else if(e.length===+e.length){for(var a=0,r=e.length;a<r;a++)if(t.call(i,e[a],a,e)==={})return}else for(var n in e)if(e.hasOwnProperty(n)&&t.call(i,e[n],n,e)==={})return},map:function(e,t,i){var a=[];return null==e?a:this.nativeMap&&e.map===this.nativeMap?e.map(t,i):(this.each(e,function(e,r,n){a[a.length]=t.call(i,e,r,n)}),a)},x64Add:function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var i=[0,0,0,0];return i[3]+=e[3]+t[3],i[2]+=i[3]>>>16,i[3]&=65535,i[2]+=e[2]+t[2],i[1]+=i[2]>>>16,i[2]&=65535,i[1]+=e[1]+t[1],i[0]+=i[1]>>>16,i[1]&=65535,i[0]+=e[0]+t[0],i[0]&=65535,[i[0]<<16|i[1],i[2]<<16|i[3]]},x64Multiply:function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var i=[0,0,0,0];return i[3]+=e[3]*t[3],i[2]+=i[3]>>>16,i[3]&=65535,i[2]+=e[2]*t[3],i[1]+=i[2]>>>16,i[2]&=65535,i[2]+=e[3]*t[2],i[1]+=i[2]>>>16,i[2]&=65535,i[1]+=e[1]*t[3],i[0]+=i[1]>>>16,i[1]&=65535,i[1]+=e[2]*t[2],i[0]+=i[1]>>>16,i[1]&=65535,i[1]+=e[3]*t[1],i[0]+=i[1]>>>16,i[1]&=65535,i[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],i[0]&=65535,[i[0]<<16|i[1],i[2]<<16|i[3]]},x64Rotl:function(e,t){return t%=64,32===t?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])},x64LeftShift:function(e,t){return t%=64,0===t?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]},x64Xor:function(e,t){return[e[0]^t[0],e[1]^t[1]]},x64Fmix:function(e){return e=this.x64Xor(e,[0,e[0]>>>1]),e=this.x64Multiply(e,[4283543511,3981806797]),e=this.x64Xor(e,[0,e[0]>>>1]),e=this.x64Multiply(e,[3301882366,444984403]),e=this.x64Xor(e,[0,e[0]>>>1])},x64hash128:function(e,t){e=e||"",t=t||0;for(var i=e.length%16,a=e.length-i,r=[0,t],n=[0,t],o=[0,0],s=[0,0],l=[2277735313,289559509],h=[1291169091,658871167],u=0;u<a;u+=16)o=[255&e.charCodeAt(u+4)|(255&e.charCodeAt(u+5))<<8|(255&e.charCodeAt(u+6))<<16|(255&e.charCodeAt(u+7))<<24,255&e.charCodeAt(u)|(255&e.charCodeAt(u+1))<<8|(255&e.charCodeAt(u+2))<<16|(255&e.charCodeAt(u+3))<<24],s=[255&e.charCodeAt(u+12)|(255&e.charCodeAt(u+13))<<8|(255&e.charCodeAt(u+14))<<16|(255&e.charCodeAt(u+15))<<24,255&e.charCodeAt(u+8)|(255&e.charCodeAt(u+9))<<8|(255&e.charCodeAt(u+10))<<16|(255&e.charCodeAt(u+11))<<24],o=this.x64Multiply(o,l),o=this.x64Rotl(o,31),o=this.x64Multiply(o,h),r=this.x64Xor(r,o),r=this.x64Rotl(r,27),r=this.x64Add(r,n),r=this.x64Add(this.x64Multiply(r,[0,5]),[0,1390208809]),s=this.x64Multiply(s,h),s=this.x64Rotl(s,33),s=this.x64Multiply(s,l),n=this.x64Xor(n,s),n=this.x64Rotl(n,31),n=this.x64Add(n,r),n=this.x64Add(this.x64Multiply(n,[0,5]),[0,944331445]);switch(o=[0,0],s=[0,0],i){case 15:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+14)],48));case 14:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+13)],40));case 13:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+12)],32));case 12:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+11)],24));case 11:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+10)],16));case 10:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+9)],8));case 9:s=this.x64Xor(s,[0,e.charCodeAt(u+8)]),s=this.x64Multiply(s,h),s=this.x64Rotl(s,33),s=this.x64Multiply(s,l),n=this.x64Xor(n,s);case 8:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+7)],56));case 7:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+6)],48));case 6:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+5)],40));case 5:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+4)],32));case 4:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+3)],24));case 3:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+2)],16));case 2:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+1)],8));case 1:o=this.x64Xor(o,[0,e.charCodeAt(u)]),o=this.x64Multiply(o,l),o=this.x64Rotl(o,31),o=this.x64Multiply(o,h),r=this.x64Xor(r,o)}return r=this.x64Xor(r,[0,e.length]),n=this.x64Xor(n,[0,e.length]),r=this.x64Add(r,n),n=this.x64Add(n,r),r=this.x64Fmix(r),n=this.x64Fmix(n),r=this.x64Add(r,n),n=this.x64Add(n,r),("00000000"+(r[0]>>>0).toString(16)).slice(-8)+("00000000"+(r[1]>>>0).toString(16)).slice(-8)+("00000000"+(n[0]>>>0).toString(16)).slice(-8)+("00000000"+(n[1]>>>0).toString(16)).slice(-8)}},e.VERSION="1.5.0",e});'use strict';var hex_chr="0123456789abcdef";function rhex(a){var b='';for(var j=0;j<=3;j++)b+=hex_chr.charAt((a>>(j*8+4))&0x0F)+hex_chr.charAt((a>>(j*8))&0x0F);return b}function str2blks_MD5(a){var i;var b=((a.length+8)>>6)+1;var c=new Array(b*16);for(i=0;i<b*16;i++)c[i]=0;for(i=0;i<a.length;i++)c[i>>2]|=a.charCodeAt(i)<<((i%4)*8);c[i>>2]|=0x80<<((i%4)*8);c[b*16-2]=a.length*8;return c}function add(x,y){var a=(x&0xFFFF)+(y&0xFFFF);var b=(x>>16)+(y>>16)+(a>>16);return(b<<16)|(a&0xFFFF)}function rol(a,b){return(a<<b)|(a>>>(32-b))}function cmn(q,a,b,x,s,t){return add(rol(add(add(a,q),add(x,t)),s),b)}function ff(a,b,c,d,x,s,t){return cmn((b&c)|((~b)&d),a,b,x,s,t)}function gg(a,b,c,d,x,s,t){return cmn((b&d)|(c&(~d)),a,b,x,s,t)}function hh(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t)}function ii(a,b,c,d,x,s,t){return cmn(c^(b|(~d)),a,b,x,s,t)}function MD5(e){var x=str2blks_MD5(e);var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(var i=0;i<x.length;i+=16){var f=a;var g=b;var h=c;var j=d;a=ff(a,b,c,d,x[i+0],7,-680876936);d=ff(d,a,b,c,x[i+1],12,-389564586);c=ff(c,d,a,b,x[i+2],17,606105819);b=ff(b,c,d,a,x[i+3],22,-1044525330);a=ff(a,b,c,d,x[i+4],7,-176418897);d=ff(d,a,b,c,x[i+5],12,1200080426);c=ff(c,d,a,b,x[i+6],17,-1473231341);b=ff(b,c,d,a,x[i+7],22,-45705983);a=ff(a,b,c,d,x[i+8],7,1770035416);d=ff(d,a,b,c,x[i+9],12,-1958414417);c=ff(c,d,a,b,x[i+10],17,-42063);b=ff(b,c,d,a,x[i+11],22,-1990404162);a=ff(a,b,c,d,x[i+12],7,1804603682);d=ff(d,a,b,c,x[i+13],12,-40341101);c=ff(c,d,a,b,x[i+14],17,-1502002290);b=ff(b,c,d,a,x[i+15],22,1236535329);a=gg(a,b,c,d,x[i+1],5,-165796510);d=gg(d,a,b,c,x[i+6],9,-1069501632);c=gg(c,d,a,b,x[i+11],14,643717713);b=gg(b,c,d,a,x[i+0],20,-373897302);a=gg(a,b,c,d,x[i+5],5,-701558691);d=gg(d,a,b,c,x[i+10],9,38016083);c=gg(c,d,a,b,x[i+15],14,-660478335);b=gg(b,c,d,a,x[i+4],20,-405537848);a=gg(a,b,c,d,x[i+9],5,568446438);d=gg(d,a,b,c,x[i+14],9,-1019803690);c=gg(c,d,a,b,x[i+3],14,-187363961);b=gg(b,c,d,a,x[i+8],20,1163531501);a=gg(a,b,c,d,x[i+13],5,-1444681467);d=gg(d,a,b,c,x[i+2],9,-51403784);c=gg(c,d,a,b,x[i+7],14,1735328473);b=gg(b,c,d,a,x[i+12],20,-1926607734);a=hh(a,b,c,d,x[i+5],4,-378558);d=hh(d,a,b,c,x[i+8],11,-2022574463);c=hh(c,d,a,b,x[i+11],16,1839030562);b=hh(b,c,d,a,x[i+14],23,-35309556);a=hh(a,b,c,d,x[i+1],4,-1530992060);d=hh(d,a,b,c,x[i+4],11,1272893353);c=hh(c,d,a,b,x[i+7],16,-155497632);b=hh(b,c,d,a,x[i+10],23,-1094730640);a=hh(a,b,c,d,x[i+13],4,681279174);d=hh(d,a,b,c,x[i+0],11,-358537222);c=hh(c,d,a,b,x[i+3],16,-722521979);b=hh(b,c,d,a,x[i+6],23,76029189);a=hh(a,b,c,d,x[i+9],4,-640364487);d=hh(d,a,b,c,x[i+12],11,-421815835);c=hh(c,d,a,b,x[i+15],16,530742520);b=hh(b,c,d,a,x[i+2],23,-995338651);a=ii(a,b,c,d,x[i+0],6,-198630844);d=ii(d,a,b,c,x[i+7],10,1126891415);c=ii(c,d,a,b,x[i+14],15,-1416354905);b=ii(b,c,d,a,x[i+5],21,-57434055);a=ii(a,b,c,d,x[i+12],6,1700485571);d=ii(d,a,b,c,x[i+3],10,-1894986606);c=ii(c,d,a,b,x[i+10],15,-1051523);b=ii(b,c,d,a,x[i+1],21,-2054922799);a=ii(a,b,c,d,x[i+8],6,1873313359);d=ii(d,a,b,c,x[i+15],10,-30611744);c=ii(c,d,a,b,x[i+6],15,-1560198380);b=ii(b,c,d,a,x[i+13],21,1309151649);a=ii(a,b,c,d,x[i+4],6,-145523070);d=ii(d,a,b,c,x[i+11],10,-1120210379);c=ii(c,d,a,b,x[i+2],15,718787259);b=ii(b,c,d,a,x[i+9],21,-343485551);a=add(a,f);b=add(b,g);c=add(c,h);d=add(d,j)}return rhex(a)+rhex(b)+rhex(c)+rhex(d)}function getMD5Value(d){var a=d;var b='\xa3\xac\xa1\xa3';var c='fdjf,jkgfkl';var s=a+b+c;return MD5(s)}(function(z,A){var B=(function(l,m){var n=Object.create||(function(){function F(){}return function(a){var b;F.prototype=a;b=new F();F.prototype=null;return b}}());var C={};var o=C.lib={};var p=o.Base=(function(){return{extend:function(a){var b=n(this);if(a){b.mixIn(a)}if(!b.hasOwnProperty('init')||this.init===b.init){b.init=function(){b.$super.init.apply(this,arguments)}}b.init.prototype=b;b.$super=this;return b},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var b in a){if(a.hasOwnProperty(b)){this[b]=a[b]}}if(a.hasOwnProperty('toString')){this.toString=a.toString}},clone:function(){return this.init.prototype.extend(this)}}}());var q=o.WordArray=p.extend({init:function(a,b){a=this.words=a||[];if(b!==m){this.sigBytes=b}else{this.sigBytes=a.length*4}},toString:function(a){return(a||t).stringify(this)},concat:function(a){var b=this.words;var c=a.words;var d=this.sigBytes;var e=a.sigBytes;this.clamp();if(d%4){for(var i=0;i<e;i++){var f=(c[i>>>2]>>>(24-(i%4)*8))&0xff;b[(d+i)>>>2]|=f<<(24-((d+i)%4)*8)}}else{for(i=0;i<e;i+=4){b[(d+i)>>>2]=c[i>>>2]}}this.sigBytes+=e;return this},clamp:function(){var a=this.words;var b=this.sigBytes;a[b>>>2]&=0xffffffff<<(32-(b%4)*8);a.length=l.ceil(b/4)},clone:function(){var a=p.clone.call(this);a.words=this.words.slice(0);return a},random:function(f){var g=[];var r=(function(b){var c=b;var d=0x3ade68b1;var e=0xffffffff;return function(){d=(0x9069*(d&0xFFFF)+(d>>0x10))&e;c=(0x4650*(c&0xFFFF)+(c>>0x10))&e;var a=((d<<0x10)+c)&e;a/=0x100000000;a+=0.5;return a*(l.random()>.5?1:-1)}});for(var i=0,rcache;i<f;i+=4){var h=r((rcache||l.random())*0x100000000);rcache=h()*0x3ade67b7;g.push((h()*0x100000000)|0)}return new q.init(g,f)}});var s=C.enc={};var t=s.Hex={stringify:function(a){var b=a.words;var c=a.sigBytes;var d=[];for(var i=0;i<c;i++){var e=(b[i>>>2]>>>(24-(i%4)*8))&0xff;d.push((e>>>4).toString(16));d.push((e&0x0f).toString(16))}return d.join('')},parse:function(a){var b=a.length;var c=[];for(var i=0;i<b;i+=2){c[i>>>3]|=parseInt(a.substr(i,2),16)<<(24-(i%8)*4)}return new q.init(c,b/2)}};var u=s.Latin1={stringify:function(a){var b=a.words;var c=a.sigBytes;var d=[];for(var i=0;i<c;i++){var e=(b[i>>>2]>>>(24-(i%4)*8))&0xff;d.push(String.fromCharCode(e))}return d.join('')},parse:function(a){var b=a.length;var c=[];for(var i=0;i<b;i++){c[i>>>2]|=(a.charCodeAt(i)&0xff)<<(24-(i%4)*8)}return new q.init(c,b)}};var v=s.Utf8={stringify:function(a){try{return decodeURIComponent(escape(u.stringify(a)))}catch(e){throw new Error('Malformed UTF-8 data');}},parse:function(a){return u.parse(unescape(encodeURIComponent(a)))}};var w=o.BufferedBlockAlgorithm=p.extend({reset:function(){this._data=new q.init();this._nDataBytes=0},_append:function(a){if(typeof a==='string'){a=v.parse(a)}this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var b=this._data;var c=b.words;var d=b.sigBytes;var e=this.blockSize;var f=e*4;var g=d/f;if(a){g=l.ceil(g)}else{g=l.max((g|0)-this._minBufferSize,0)}var h=g*e;var i=l.min(h*4,d);if(h){for(var j=0;j<h;j+=e){this._doProcessBlock(c,j)}var k=c.splice(0,h);b.sigBytes-=i}return new q.init(k,i)},clone:function(){var a=p.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});var x=o.Hasher=w.extend({cfg:p.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){w.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){if(a){this._append(a)}var b=this._doFinalize();return b},blockSize:512/32,_createHelper:function(c){return function(a,b){return new c.init(b).finalize(a)}},_createHmacHelper:function(c){return function(a,b){return new y.HMAC.init(c,b).finalize(a)}}});var y=C.algo={};return C}(Math));if(z&&A&&!z[A]){z[A]=B}}(Edbox,"CryptoJS"));(function(j){var C=j.CryptoJS;var k=C.lib;var l=k.Base;var m=C.enc;var n=m.Utf8;var o=C.algo;var p=o.HMAC=l.extend({init:function(a,b){a=this._hasher=new a.init();if(typeof b==='string'){b=n.parse(b)}var c=a.blockSize;var d=c*4;if(b.sigBytes>d){b=a.finalize(b)}b.clamp();var e=this._oKey=b.clone();var f=this._iKey=b.clone();var g=e.words;var h=f.words;for(var i=0;i<c;i++){g[i]^=0x5c5c5c5c;h[i]^=0x36363636}e.sigBytes=f.sigBytes=d;this.reset()},reset:function(){var a=this._hasher;a.reset();a.update(this._iKey)},update:function(a){this._hasher.update(a);return this},finalize:function(a){var b=this._hasher;var c=b.finalize(a);b.reset();var d=b.finalize(this._oKey.clone().concat(c));return d}})}(Edbox));(function(u,v){var C=u.CryptoJS;var w=C.lib;var x=w.WordArray;var y=w.Hasher;var z=C.algo;var H=[];var K=[];(function(){function isPrime(n){var a=v.sqrt(n);for(var b=2;b<=a;b++){if(!(n%b)){return false}}return true}function getFractionalBits(n){return((n-(n|0))*0x100000000)|0}var n=2;var c=0;while(c<64){if(isPrime(n)){if(c<8){H[c]=getFractionalBits(v.pow(n,1/2))}K[c]=getFractionalBits(v.pow(n,1/3));c++}n++}}());var W=[];var A=z.SHA256=y.extend({_doReset:function(){this._hash=new x.init(H.slice(0))},_doProcessBlock:function(M,j){var H=this._hash.words;var a=H[0];var b=H[1];var c=H[2];var d=H[3];var e=H[4];var f=H[5];var g=H[6];var h=H[7];for(var i=0;i<64;i++){if(i<16){W[i]=M[j+i]|0}else{var k=W[i-15];var l=((k<<25)|(k>>>7))^((k<<14)|(k>>>18))^(k>>>3);var m=W[i-2];var n=((m<<15)|(m>>>17))^((m<<13)|(m>>>19))^(m>>>10);W[i]=l+W[i-7]+n+W[i-16]}var o=(e&f)^(~e&g);var p=(a&b)^(a&c)^(b&c);var q=((a<<30)|(a>>>2))^((a<<19)|(a>>>13))^((a<<10)|(a>>>22));var r=((e<<26)|(e>>>6))^((e<<21)|(e>>>11))^((e<<7)|(e>>>25));var s=h+r+o+K[i]+W[i];var t=q+p;h=g;g=f;f=e;e=(d+s)|0;d=c;c=b;b=a;a=(s+t)|0}H[0]=(H[0]+a)|0;H[1]=(H[1]+b)|0;H[2]=(H[2]+c)|0;H[3]=(H[3]+d)|0;H[4]=(H[4]+e)|0;H[5]=(H[5]+f)|0;H[6]=(H[6]+g)|0;H[7]=(H[7]+h)|0},_doFinalize:function(){var a=this._data;var b=a.words;var c=this._nDataBytes*8;var d=a.sigBytes*8;b[d>>>5]|=0x80<<(24-d%32);b[(((d+64)>>>9)<<4)+14]=v.floor(c/0x100000000);b[(((d+64)>>>9)<<4)+15]=c;a.sigBytes=b.length*4;this._process();return this._hash},clone:function(){var a=y.clone.call(this);a._hash=this._hash.clone();return a}});C.SHA256=y._createHelper(A);C.HmacSHA256=y._createHmacHelper(A)}(Edbox,Math));Edbox.CryptoJS.lib.Cipher||(function(h){var C=Edbox.CryptoJS;var j=C.lib;var k=j.Base;var l=j.WordArray;var m=j.BufferedBlockAlgorithm;var n=C.enc;var o=n.Utf8;var p=n.Base64;var q=C.algo;var r=q.EvpKDF;var s=j.Cipher=m.extend({cfg:k.extend(),createEncryptor:function(a,b){return this.create(this._ENC_XFORM_MODE,a,b)},createDecryptor:function(a,b){return this.create(this._DEC_XFORM_MODE,a,b)},init:function(a,b,c){this.cfg=this.cfg.extend(c);this._xformMode=a;this._key=b;this.reset()},reset:function(){m.reset.call(this);this._doReset()},process:function(a){this._append(a);return this._process()},finalize:function(a){if(a){this._append(a)}var b=this._doFinalize();return b},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function selectCipherStrategy(a){if(typeof a=='string'){return H}else{return E}}return function(d){return{encrypt:function(a,b,c){return selectCipherStrategy(b).encrypt(d,a,b,c)},decrypt:function(a,b,c){return selectCipherStrategy(b).decrypt(d,a,b,c)}}}}())});var t=j.StreamCipher=s.extend({_doFinalize:function(){var a=this._process(!!'flush');return a},blockSize:1});var u=C.mode={};var v=j.BlockCipherMode=k.extend({createEncryptor:function(a,b){return this.Encryptor.create(a,b)},createDecryptor:function(a,b){return this.Decryptor.create(a,b)},init:function(a,b){this._cipher=a;this._iv=b}});var w=u.CBC=(function(){var f=v.extend();f.Encryptor=f.extend({processBlock:function(a,b){var c=this._cipher;var d=c.blockSize;xorBlock.call(this,a,b,d);c.encryptBlock(a,b);this._prevBlock=a.slice(b,b+d)}});f.Decryptor=f.extend({processBlock:function(a,b){var c=this._cipher;var d=c.blockSize;var e=a.slice(b,b+d);c.decryptBlock(a,b);xorBlock.call(this,a,b,d);this._prevBlock=e}});function xorBlock(a,b,c){var d=this._iv;if(d){var e=d;this._iv=h}else{var e=this._prevBlock}for(var i=0;i<c;i++){a[b+i]^=e[i]}}return f}());var x=C.pad={};var y=x.Pkcs7={pad:function(a,b){var c=b*4;var d=c-a.sigBytes%c;var e=(d<<24)|(d<<16)|(d<<8)|d;var f=[];for(var i=0;i<d;i+=4){f.push(e)}var g=l.create(f,d);a.concat(g)},unpad:function(a){var b=a.words[(a.sigBytes-1)>>>2]&0xff;a.sigBytes-=b}};var z=j.BlockCipher=s.extend({cfg:s.cfg.extend({mode:w,padding:y}),reset:function(){s.reset.call(this);var a=this.cfg;var b=a.iv;var c=a.mode;if(this._xformMode==this._ENC_XFORM_MODE){var d=c.createEncryptor}else{var d=c.createDecryptor;this._minBufferSize=1}if(this._mode&&this._mode.__creator==d){this._mode.init(this,b&&b.words)}else{this._mode=d.call(c,this,b&&b.words);this._mode.__creator=d}},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!!'flush')}else{var b=this._process(!!'flush');a.unpad(b)}return b},blockSize:128/32});var A=j.CipherParams=k.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}});var B=C.format={};var D=B.OpenSSL={stringify:function(a){var b=a.ciphertext;var c=a.salt;if(c){var d=l.create([0x53616c74,0x65645f5f]).concat(c).concat(b)}else{var d=b}return d.toString(p)},parse:function(a){var b=p.parse(a);var c=b.words;if(c[0]==0x53616c74&&c[1]==0x65645f5f){var d=l.create(c.slice(2,4));c.splice(0,4);b.sigBytes-=16}return A.create({ciphertext:b,salt:d})}};var E=j.SerializableCipher=k.extend({cfg:k.extend({format:D}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=a.createEncryptor(c,d);var f=e.finalize(b);var g=e.cfg;return A.create({ciphertext:f,key:c,iv:g.iv,algorithm:a,mode:g.mode,padding:g.padding,blockSize:a.blockSize,formatter:d.format})},decrypt:function(a,b,c,d){d=this.cfg.extend(d);b=this._parse(b,d.format);var e=a.createDecryptor(c,d).finalize(b.ciphertext);return e},_parse:function(a,b){if(typeof a=='string'){return b.parse(a,this)}else{return a}}});var F=C.kdf={};var G=F.OpenSSL={execute:function(a,b,c,d){if(!d){d=l.random(64/8)}var e=r.create({keySize:b+c}).compute(a,d);var f=l.create(e.words.slice(b),c*4);e.sigBytes=b*4;return A.create({key:e,iv:f,salt:d})}};var H=j.PasswordBasedCipher=E.extend({cfg:E.cfg.extend({kdf:G}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=d.kdf.execute(c,a.keySize,a.ivSize);d.iv=e.iv;var f=E.encrypt.call(this,a,b,e.key,d);f.mixIn(e);return f},decrypt:function(a,b,c,d){d=this.cfg.extend(d);b=this._parse(b,d.format);var e=d.kdf.execute(c,a.keySize,a.ivSize,b.salt);d.iv=e.iv;var f=E.decrypt.call(this,a,b,e.key,d);return f}})}());Edbox.CryptoJS.mode.ECB=(function(){var c=Edbox.CryptoJS.lib.BlockCipherMode.extend();c.Encryptor=c.extend({processBlock:function(a,b){this._cipher.encryptBlock(a,b)}});c.Decryptor=c.extend({processBlock:function(a,b){this._cipher.decryptBlock(a,b)}});return c}());(function(k){var C=k.CryptoJS;var l=C.lib;var m=l.WordArray;var n=l.BlockCipher;var o=C.algo;var p=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4];var q=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32];var r=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28];var s=[{0x0:0x808200,0x10000000:0x8000,0x20000000:0x808002,0x30000000:0x2,0x40000000:0x200,0x50000000:0x808202,0x60000000:0x800202,0x70000000:0x800000,0x80000000:0x202,0x90000000:0x800200,0xa0000000:0x8200,0xb0000000:0x808000,0xc0000000:0x8002,0xd0000000:0x800002,0xe0000000:0x0,0xf0000000:0x8202,0x8000000:0x0,0x18000000:0x808202,0x28000000:0x8202,0x38000000:0x8000,0x48000000:0x808200,0x58000000:0x200,0x68000000:0x808002,0x78000000:0x2,0x88000000:0x800200,0x98000000:0x8200,0xa8000000:0x808000,0xb8000000:0x800202,0xc8000000:0x800002,0xd8000000:0x8002,0xe8000000:0x202,0xf8000000:0x800000,0x1:0x8000,0x10000001:0x2,0x20000001:0x808200,0x30000001:0x800000,0x40000001:0x808002,0x50000001:0x8200,0x60000001:0x200,0x70000001:0x800202,0x80000001:0x808202,0x90000001:0x808000,0xa0000001:0x800002,0xb0000001:0x8202,0xc0000001:0x202,0xd0000001:0x800200,0xe0000001:0x8002,0xf0000001:0x0,0x8000001:0x808202,0x18000001:0x808000,0x28000001:0x800000,0x38000001:0x200,0x48000001:0x8000,0x58000001:0x800002,0x68000001:0x2,0x78000001:0x8202,0x88000001:0x8002,0x98000001:0x800202,0xa8000001:0x202,0xb8000001:0x808200,0xc8000001:0x800200,0xd8000001:0x0,0xe8000001:0x8200,0xf8000001:0x808002},{0x0:0x40084010,0x1000000:0x4000,0x2000000:0x80000,0x3000000:0x40080010,0x4000000:0x40000010,0x5000000:0x40084000,0x6000000:0x40004000,0x7000000:0x10,0x8000000:0x84000,0x9000000:0x40004010,0xa000000:0x40000000,0xb000000:0x84010,0xc000000:0x80010,0xd000000:0x0,0xe000000:0x4010,0xf000000:0x40080000,0x800000:0x40004000,0x1800000:0x84010,0x2800000:0x10,0x3800000:0x40004010,0x4800000:0x40084010,0x5800000:0x40000000,0x6800000:0x80000,0x7800000:0x40080010,0x8800000:0x80010,0x9800000:0x0,0xa800000:0x4000,0xb800000:0x40080000,0xc800000:0x40000010,0xd800000:0x84000,0xe800000:0x40084000,0xf800000:0x4010,0x10000000:0x0,0x11000000:0x40080010,0x12000000:0x40004010,0x13000000:0x40084000,0x14000000:0x40080000,0x15000000:0x10,0x16000000:0x84010,0x17000000:0x4000,0x18000000:0x4010,0x19000000:0x80000,0x1a000000:0x80010,0x1b000000:0x40000010,0x1c000000:0x84000,0x1d000000:0x40004000,0x1e000000:0x40000000,0x1f000000:0x40084010,0x10800000:0x84010,0x11800000:0x80000,0x12800000:0x40080000,0x13800000:0x4000,0x14800000:0x40004000,0x15800000:0x40084010,0x16800000:0x10,0x17800000:0x40000000,0x18800000:0x40084000,0x19800000:0x40000010,0x1a800000:0x40004010,0x1b800000:0x80010,0x1c800000:0x0,0x1d800000:0x4010,0x1e800000:0x40080010,0x1f800000:0x84000},{0x0:0x104,0x100000:0x0,0x200000:0x4000100,0x300000:0x10104,0x400000:0x10004,0x500000:0x4000004,0x600000:0x4010104,0x700000:0x4010000,0x800000:0x4000000,0x900000:0x4010100,0xa00000:0x10100,0xb00000:0x4010004,0xc00000:0x4000104,0xd00000:0x10000,0xe00000:0x4,0xf00000:0x100,0x80000:0x4010100,0x180000:0x4010004,0x280000:0x0,0x380000:0x4000100,0x480000:0x4000004,0x580000:0x10000,0x680000:0x10004,0x780000:0x104,0x880000:0x4,0x980000:0x100,0xa80000:0x4010000,0xb80000:0x10104,0xc80000:0x10100,0xd80000:0x4000104,0xe80000:0x4010104,0xf80000:0x4000000,0x1000000:0x4010100,0x1100000:0x10004,0x1200000:0x10000,0x1300000:0x4000100,0x1400000:0x100,0x1500000:0x4010104,0x1600000:0x4000004,0x1700000:0x0,0x1800000:0x4000104,0x1900000:0x4000000,0x1a00000:0x4,0x1b00000:0x10100,0x1c00000:0x4010000,0x1d00000:0x104,0x1e00000:0x10104,0x1f00000:0x4010004,0x1080000:0x4000000,0x1180000:0x104,0x1280000:0x4010100,0x1380000:0x0,0x1480000:0x10004,0x1580000:0x4000100,0x1680000:0x100,0x1780000:0x4010004,0x1880000:0x10000,0x1980000:0x4010104,0x1a80000:0x10104,0x1b80000:0x4000004,0x1c80000:0x4000104,0x1d80000:0x4010000,0x1e80000:0x4,0x1f80000:0x10100},{0x0:0x80401000,0x10000:0x80001040,0x20000:0x401040,0x30000:0x80400000,0x40000:0x0,0x50000:0x401000,0x60000:0x80000040,0x70000:0x400040,0x80000:0x80000000,0x90000:0x400000,0xa0000:0x40,0xb0000:0x80001000,0xc0000:0x80400040,0xd0000:0x1040,0xe0000:0x1000,0xf0000:0x80401040,0x8000:0x80001040,0x18000:0x40,0x28000:0x80400040,0x38000:0x80001000,0x48000:0x401000,0x58000:0x80401040,0x68000:0x0,0x78000:0x80400000,0x88000:0x1000,0x98000:0x80401000,0xa8000:0x400000,0xb8000:0x1040,0xc8000:0x80000000,0xd8000:0x400040,0xe8000:0x401040,0xf8000:0x80000040,0x100000:0x400040,0x110000:0x401000,0x120000:0x80000040,0x130000:0x0,0x140000:0x1040,0x150000:0x80400040,0x160000:0x80401000,0x170000:0x80001040,0x180000:0x80401040,0x190000:0x80000000,0x1a0000:0x80400000,0x1b0000:0x401040,0x1c0000:0x80001000,0x1d0000:0x400000,0x1e0000:0x40,0x1f0000:0x1000,0x108000:0x80400000,0x118000:0x80401040,0x128000:0x0,0x138000:0x401000,0x148000:0x400040,0x158000:0x80000000,0x168000:0x80001040,0x178000:0x40,0x188000:0x80000040,0x198000:0x1000,0x1a8000:0x80001000,0x1b8000:0x80400040,0x1c8000:0x1040,0x1d8000:0x80401000,0x1e8000:0x400000,0x1f8000:0x401040},{0x0:0x80,0x1000:0x1040000,0x2000:0x40000,0x3000:0x20000000,0x4000:0x20040080,0x5000:0x1000080,0x6000:0x21000080,0x7000:0x40080,0x8000:0x1000000,0x9000:0x20040000,0xa000:0x20000080,0xb000:0x21040080,0xc000:0x21040000,0xd000:0x0,0xe000:0x1040080,0xf000:0x21000000,0x800:0x1040080,0x1800:0x21000080,0x2800:0x80,0x3800:0x1040000,0x4800:0x40000,0x5800:0x20040080,0x6800:0x21040000,0x7800:0x20000000,0x8800:0x20040000,0x9800:0x0,0xa800:0x21040080,0xb800:0x1000080,0xc800:0x20000080,0xd800:0x21000000,0xe800:0x1000000,0xf800:0x40080,0x10000:0x40000,0x11000:0x80,0x12000:0x20000000,0x13000:0x21000080,0x14000:0x1000080,0x15000:0x21040000,0x16000:0x20040080,0x17000:0x1000000,0x18000:0x21040080,0x19000:0x21000000,0x1a000:0x1040000,0x1b000:0x20040000,0x1c000:0x40080,0x1d000:0x20000080,0x1e000:0x0,0x1f000:0x1040080,0x10800:0x21000080,0x11800:0x1000000,0x12800:0x1040000,0x13800:0x20040080,0x14800:0x20000000,0x15800:0x1040080,0x16800:0x80,0x17800:0x21040000,0x18800:0x40080,0x19800:0x21040080,0x1a800:0x0,0x1b800:0x21000000,0x1c800:0x1000080,0x1d800:0x40000,0x1e800:0x20040000,0x1f800:0x20000080},{0x0:0x10000008,0x100:0x2000,0x200:0x10200000,0x300:0x10202008,0x400:0x10002000,0x500:0x200000,0x600:0x200008,0x700:0x10000000,0x800:0x0,0x900:0x10002008,0xa00:0x202000,0xb00:0x8,0xc00:0x10200008,0xd00:0x202008,0xe00:0x2008,0xf00:0x10202000,0x80:0x10200000,0x180:0x10202008,0x280:0x8,0x380:0x200000,0x480:0x202008,0x580:0x10000008,0x680:0x10002000,0x780:0x2008,0x880:0x200008,0x980:0x2000,0xa80:0x10002008,0xb80:0x10200008,0xc80:0x0,0xd80:0x10202000,0xe80:0x202000,0xf80:0x10000000,0x1000:0x10002000,0x1100:0x10200008,0x1200:0x10202008,0x1300:0x2008,0x1400:0x200000,0x1500:0x10000000,0x1600:0x10000008,0x1700:0x202000,0x1800:0x202008,0x1900:0x0,0x1a00:0x8,0x1b00:0x10200000,0x1c00:0x2000,0x1d00:0x10002008,0x1e00:0x10202000,0x1f00:0x200008,0x1080:0x8,0x1180:0x202000,0x1280:0x200000,0x1380:0x10000008,0x1480:0x10002000,0x1580:0x2008,0x1680:0x10202008,0x1780:0x10200000,0x1880:0x10202000,0x1980:0x10200008,0x1a80:0x2000,0x1b80:0x202008,0x1c80:0x200008,0x1d80:0x0,0x1e80:0x10000000,0x1f80:0x10002008},{0x0:0x100000,0x10:0x2000401,0x20:0x400,0x30:0x100401,0x40:0x2100401,0x50:0x0,0x60:0x1,0x70:0x2100001,0x80:0x2000400,0x90:0x100001,0xa0:0x2000001,0xb0:0x2100400,0xc0:0x2100000,0xd0:0x401,0xe0:0x100400,0xf0:0x2000000,0x8:0x2100001,0x18:0x0,0x28:0x2000401,0x38:0x2100400,0x48:0x100000,0x58:0x2000001,0x68:0x2000000,0x78:0x401,0x88:0x100401,0x98:0x2000400,0xa8:0x2100000,0xb8:0x100001,0xc8:0x400,0xd8:0x2100401,0xe8:0x1,0xf8:0x100400,0x100:0x2000000,0x110:0x100000,0x120:0x2000401,0x130:0x2100001,0x140:0x100001,0x150:0x2000400,0x160:0x2100400,0x170:0x100401,0x180:0x401,0x190:0x2100401,0x1a0:0x100400,0x1b0:0x1,0x1c0:0x0,0x1d0:0x2100000,0x1e0:0x2000001,0x1f0:0x400,0x108:0x100400,0x118:0x2000401,0x128:0x2100001,0x138:0x1,0x148:0x2000000,0x158:0x100000,0x168:0x401,0x178:0x2100400,0x188:0x2000001,0x198:0x2100000,0x1a8:0x0,0x1b8:0x2100401,0x1c8:0x100401,0x1d8:0x400,0x1e8:0x2000400,0x1f8:0x100001},{0x0:0x8000820,0x1:0x20000,0x2:0x8000000,0x3:0x20,0x4:0x20020,0x5:0x8020820,0x6:0x8020800,0x7:0x800,0x8:0x8020000,0x9:0x8000800,0xa:0x20800,0xb:0x8020020,0xc:0x820,0xd:0x0,0xe:0x8000020,0xf:0x20820,0x80000000:0x800,0x80000001:0x8020820,0x80000002:0x8000820,0x80000003:0x8000000,0x80000004:0x8020000,0x80000005:0x20800,0x80000006:0x20820,0x80000007:0x20,0x80000008:0x8000020,0x80000009:0x820,0x8000000a:0x20020,0x8000000b:0x8020800,0x8000000c:0x0,0x8000000d:0x8020020,0x8000000e:0x8000800,0x8000000f:0x20000,0x10:0x20820,0x11:0x8020800,0x12:0x20,0x13:0x800,0x14:0x8000800,0x15:0x8000020,0x16:0x8020020,0x17:0x20000,0x18:0x0,0x19:0x20020,0x1a:0x8020000,0x1b:0x8000820,0x1c:0x8020820,0x1d:0x20800,0x1e:0x820,0x1f:0x8000000,0x80000010:0x20000,0x80000011:0x800,0x80000012:0x8020020,0x80000013:0x20820,0x80000014:0x20,0x80000015:0x8020000,0x80000016:0x8000000,0x80000017:0x8000820,0x80000018:0x8020820,0x80000019:0x8000020,0x8000001a:0x8000800,0x8000001b:0x0,0x8000001c:0x20800,0x8000001d:0x820,0x8000001e:0x20020,0x8000001f:0x8020800}];var u=[0xf8000001,0x1f800000,0x01f80000,0x001f8000,0x0001f800,0x00001f80,0x000001f8,0x8000001f];var v=o.DES=n.extend({_doReset:function(){var a=this._key;var b=a.words;var c=[];for(var i=0;i<56;i++){var d=p[i]-1;c[i]=(b[d>>>5]>>>(31-d%32))&1}var e=this._subKeys=[];for(var f=0;f<16;f++){var g=e[f]=[];var h=r[f];for(var i=0;i<24;i++){g[(i/6)|0]|=c[((q[i]-1)+h)%28]<<(31-i%6);g[4+((i/6)|0)]|=c[28+(((q[i+24]-1)+h)%28)]<<(31-i%6)}g[0]=(g[0]<<1)|(g[0]>>>31);for(var i=1;i<7;i++){g[i]=g[i]>>>((i-1)*4+3)}g[7]=(g[7]<<5)|(g[7]>>>27)}var j=this._invSubKeys=[];for(var i=0;i<16;i++){j[i]=e[15-i]}},encryptBlock:function(M,a){this._doCryptBlock(M,a,this._subKeys)},decryptBlock:function(M,a){this._doCryptBlock(M,a,this._invSubKeys)},_doCryptBlock:function(M,a,b){this._lBlock=M[a];this._rBlock=M[a+1];exchangeLR.call(this,4,0x0f0f0f0f);exchangeLR.call(this,16,0x0000ffff);exchangeRL.call(this,2,0x33333333);exchangeRL.call(this,8,0x00ff00ff);exchangeLR.call(this,1,0x55555555);for(var c=0;c<16;c++){var d=b[c];var e=this._lBlock;var g=this._rBlock;var f=0;for(var i=0;i<8;i++){f|=s[i][((g^d[i])&u[i])>>>0]}this._lBlock=g;this._rBlock=e^f}var t=this._lBlock;this._lBlock=this._rBlock;this._rBlock=t;exchangeLR.call(this,1,0x55555555);exchangeRL.call(this,8,0x00ff00ff);exchangeRL.call(this,2,0x33333333);exchangeLR.call(this,16,0x0000ffff);exchangeLR.call(this,4,0x0f0f0f0f);M[a]=this._lBlock;M[a+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function exchangeLR(a,b){var t=((this._lBlock>>>a)^this._rBlock)&b;this._rBlock^=t;this._lBlock^=t<<a}function exchangeRL(a,b){var t=((this._rBlock>>>a)^this._lBlock)&b;this._lBlock^=t;this._rBlock^=t<<a}C.DES=n._createHelper(v);var w=o.TripleDES=n.extend({_doReset:function(){var a=this._key;var b=a.words;this._des1=v.createEncryptor(m.create(b.slice(0,2)));this._des2=v.createEncryptor(m.create(b.slice(2,4)));this._des3=v.createEncryptor(m.create(b.slice(4,6)))},encryptBlock:function(M,a){this._des1.encryptBlock(M,a);this._des2.decryptBlock(M,a);this._des3.encryptBlock(M,a)},decryptBlock:function(M,a){this._des3.decryptBlock(M,a);this._des2.encryptBlock(M,a);this._des1.decryptBlock(M,a)},keySize:192/32,ivSize:64/32,blockSize:64/32});C.TripleDES=n._createHelper(w)}(Edbox));(function(u,v){function SuccessHandler(a,b,c){if(b)b(a)}function ErrorHandler(a,b,c){if(a.status===200){if(b)b({status:a.status,statusText:a.statusText});return}if(c){c({status:a.status,statusText:a.statusText,responseJSON:a.responseJSON})}}var w=60;function GetRandomString(a){var b="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";var t='';if(a===null||a===undefined)a=8;for(var i=0;i<a;i++){var r=Math.floor(Math.random()*62);t=t+b[r]}return t}function GetTimeStamp(){var a=new Date();return a.getTime()-Math.round(u.TimeStamp)}function GetMac(m,n,o,p,q){var r=n+"\n"+o.toUpperCase()+"\n"+p+"\n"+q+"\n";var s=u.CryptoJS.HmacSHA256(r,m);function base64stringify(a){var b=a.words;var c=a.sigBytes;var d='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';a.clamp();var e=[];for(var i=0;i<c;i+=3){var f=(b[i>>>2]>>>(24-(i%4)*8))&0xff;var g=(b[(i+1)>>>2]>>>(24-((i+1)%4)*8))&0xff;var h=(b[(i+2)>>>2]>>>(24-((i+2)%4)*8))&0xff;var k=(f<<16)|(g<<8)|h;for(var j=0;(j<4)&&(i+j*0.75<c);j++){e.push(d.charAt((k>>>(6*(3-j)))&0x3f))}}var l=d.charAt(64);if(l){while(e.length%4){e.push(l)}}return e.join('')}var t=base64stringify(s);return t}var x={GetValidData:function(){var a=GetTimeStamp()+":"+GetRandomString(8);var b=window.location.host;var c="GET";var d="/";var e=GetMac(u.MacKey,a,"Get",d,b);var f=new Object();f.access_token=u.AccessToken;f.mac=e;f.nonce=a;f.http_method=c;f.request_uri=d;f.host=b;return f},GetAuthorization:function(a,b,c){var d=GetTimeStamp()+":"+GetRandomString(8);var e=c.indexOf(":");if(e>0){c=c.substring(0,e)}var f=GetMac(u.MacKey,d,a,b.replace(/'/g,"%27"),c);return"MAC id=\""+u.AccessToken+"\",nonce=\""+d+"\",mac=\""+f+"\""},GetAuthorizationWithoutLogin:function(a,b,c){var d=GetTimeStamp()+":"+GetRandomString(8);var e=c.indexOf(":");if(e>0){c=c.substring(0,e)}var f="7F938B205F876FC3411849E1BB2F359B4A44489BB221C71A418A02E7C07908C3717496C4E5E964FF13B05B90D97D0B89";var g=GetMac("XA5zcG72la",d,a,b.replace(/'/g,"%27"),c);return"APPMAC id=\""+f+"\",nonce=\""+d+"\",mac=\""+g+"\""},Get:function(a,b,c,d,e){return x.GetWithHeader(a,b,c,null,d,e)},GetWithProtocol:function(a,b,c,d,e,f){return x.GetWithHeader(a,b,c,null,d,e,f)},GetWithLanguage:function(a,b,c,d,e){var f=u.GetLanguageCode();if(f==="zh-TW"){f="zh-HK"}return x.GetWithHeader(a,b,c,{language:f},d,e)},GetWithEnv:function(a,b,c,d,e){return x.GetWithHeader(a,b,c,{env:u.Mode},d,e)},GetWithHeader:function(a,b,c,d,e,f,g){var h="Get";return x.Send(h,g,a,b,c,d,true,e,f)},GetWithoutHeader:function(a,b,c,d,e,f){var g="Get";return x.Send(g,f,a,b,c,null,false,d,e)},Post:function(a,b,c,d,e,f){return x.PostWithHeader(a,b,c,null,d,e,f)},PostWithLanguage:function(a,b,c,d,e,f){var g=u.GetLanguageCode();if(g==="zh-TW"){g="zh-HK"}return x.PostWithHeader(a,b,c,{language:g},d,e,f)},PostWithEnv:function(a,b,c,d,e,f){return x.PostWithHeader(a,b,c,{env:u.Mode},d,e,f)},PostWithHeader:function(a,b,c,d,e,f,g){var h="Post";if(c){c=JSON.parse(c)}return x.Send(h,g,a,b,c,d,true,e,f)},PostWithoutHeader:function(a,b,c,d,e,f){var g="Post";if(c){c=JSON.parse(c)}return x.Send(g,f,a,b,c,null,false,d,e)},Put:function(a,b,c,d,e,f){return x.PutWithHeader(a,b,c,null,d,e,f)},PutWithHeader:function(a,b,c,d,e,f,g){var h="Put";if(c){c=JSON.parse(c)}return x.Send(h,g,a,b,c,d,true,e,f)},PatchWithHeader:function(a,b,c,d,e,f,g){var h="Patch";if(c){c=JSON.parse(c)}return x.Send(h,g,a,b,c,d,true,e,f)},DeleteWithHeader:function(a,b,c,d,e,f,g){var h="Delete";if(c){c=JSON.parse(c)}return x.Send(h,g,a,b,c,d,true,e,f)},GetWithTextType:function(b,c,d,e,f,g,h,i){if(!c){c=u.Protocol}var j=c+"://"+d+e;var k={url:j,type:b.toUpperCase(),data:f,dataType:"text",success:function(a){if(h)h(a)},error:function(a){if(i)i(a)}};if(f){if(typeof f==="string"){if(f.trim().length>0){k.data=f}}else{k.data=JSON.stringify(f)}}return $.ajax(k)},Send:function(b,c,d,e,f,g,h,i,j){var k=e;if(b.toLowerCase()==="get"&&f&&f.trim().length>0){k=e+"?"+f}var l=x.GetAuthorization(b,k,d);if(!c){c=u.Protocol}var m=c+"://"+d+e;var n={url:m,async:true,type:b.toUpperCase(),data:f,dataType:"json",success:function(a){SuccessHandler(a,i,j)},error:function(a){ErrorHandler(a,i,j)}};if(!g)g=new Object();if(h){g.Authorization=l}n.headers=g;if(f){if(typeof f==="string"){if(f.trim().length>0){n.data=f}}else{n.data=JSON.stringify(f);n.processData=false;n.contentType=false;g["Content-Type"]="application/json"}}if(w>0){n.timeout=w*1000}return $.ajax(n)}};if(u&&v&&!u[v]){u[v]=x}}(Edbox,"Request"));(function(b,c){var d={IsWindowsPhone:false,IsSymbian:false,IsAndroid:false,IsIPhone:false,IsIpad:false,IsIOS:false,IsPC:false,IsWin64:false,IsWin32:false,IsMac:false,IsQQ:false,IsWechat:false,IsAlipay:false,Is99U:false,IsEdbox:false,IsEdge:false,IsWebKit:false,IsIE:false,IsChrome:false,IsFirefox:false,IsSafari:false,IsOpera:false,IsUC:false};function Init(){var a=navigator.userAgent;d.IsWindowsPhone=/(?:Windows Phone)/.test(a);d.IsSymbian=/(?:SymbianOS)/.test(a)||d.IsWindowsPhone;d.IsAndroid=/(?:Android)/.test(a);d.IsIPhone=/(?:iPhone)/.test(a);d.IsIpad=/(?:iPad|PlayBook)/.test(a);d.IsIOS=d.IsIpad||d.IsIPhone;d.IsPC=!d.IsIOS&&!d.IsAndroid&&!d.IsSymbian;d.IsMac=/(?:Macintosh|Mac OS X)/.test(a);if(a.indexOf("win32")>=0||a.indexOf("wow32")>=0){d.IsWin32=true}if(a.indexOf("win64")>=0||a.indexOf("wow64")>=0){d.IsWin64=true}d.IsQQ=/(?:MQQBrowser|QQ)/.test(a);d.IsWechat=/(?:MicroMessenger)/.test(a);d.IsAlipay=/(?:Alipay)/.test(a);d.Is99U=/(?:99u)/.test(a);d.IsEdbox=/(?:edbox)/.test(a);d.IsEdge=/(?:Edge)/.test(a);d.IsWebKit=/(?:WebKit)/.test(a);if(!!window.ActiveXObject||"ActiveXObject"in window||/(?:MSIE)/.test(a)){d.IsIE=true}d.IsChrome=/(?:Chrome|CriOS)/.test(a);d.IsFirefox=/(?:Firefox)/.test(a);d.IsSafari=/(?:Safari)/.test(a);d.IsOpera=/(?:Opera Mini)/.test(a);d.IsUC=/(?:UCWEB|UCBrowser)/.test(a)}Init();if(b&&c&&!b[c]){b[c]=d}}(Edbox,"Platform"));(function(m,n){var o=false;var p=null;var q={};var r=null;var s="";var t="";var u=true;var v=0;var w="";function GetServerKey(){var d="QA";var e=window.location.hostname.replace("component","").replace("game","").replace("api","");var f=Object.keys(Edbox.Host.Game);for(var i=0;i<f.length;i++){var g=f[i];var h=Edbox.Host.Game[g].replace("component","").replace("game","").replace("api","");if(e.indexOf(h)>=0){d=g;return d}}e=window.location.hostname;function Test(a){var b=Object.keys(a);for(var i=0;i<b.length;i++){var c=b[i];if(e===a[c]){d=c;return true}}}if(Test(Edbox.Host.Login))return d;e=Edbox.ComponentRootPath;for(i=0;i<f.length;i++){g=f[i];var j=Edbox.Host.Game[g].replace("component","").replace("game","").replace("api","");if(e.indexOf(j)>0){d=g;return d}}return d}var x={QA:"6d4ef39cfdc04dba99f9e508208ce7c8",CN:"0885f95475f8429f842008c26bd2d2b5",US:"d597cf288c904f87a3937e82e92bbf5b"};var y="1.0.0.0";var z=true;var A=1;var B=true;var C=false;var D="PRODUCTION";var E=Edbox.ComponentRootPath+"ThirdParty/cloud-alas/cloud-atlas.min.js?v=20190902";var F=null;function initYunTu(){function GetAppKey(){switch(Edbox.ServerKey){case'CN':return x.CN;case'US':return x.US;default:return x.QA}}if(typeof CloudAtlas==='undefined'||!CloudAtlas){dlog("DataStatistic not Init YunTu");return}new CloudAtlas({appKey:GetAppKey(),appVer:y,channelId:Edbox.Channel,isLog:C,env:D,isHttps:z,limitNumber:A,isImmediately:B});F=CloudAtlas;F.onProfileSignIn(Edbox.EbUserId+'');dlog("DataStatistic Init YunTu Succ")}var G={Dev:"UA-132188429-2",QA:"UA-132188429-3",BetaCN:"UA-132188429-2",Beta:"UA-132188429-4",CN:"UA-132188429-2",US:"UA-132188429-5"};var H=Edbox.ComponentRootPath+"ThirdParty/google/gtag.js?id=";var I=null;function GetGoogleKey(a){a=a?a:Edbox.ServerKey;if(G[a]){return G[a]}else{return G.QA}}function initGA(){if(typeof gtag==='undefined'||!gtag){dlog("DataStatistic Init GA Failed");return}else{dlog("DataStatistic not Init GA");I=gtag;gtag('js',new Date());gtag('config',GetGoogleKey(),{'custom_map':{'dimension1':'account_type','dimension2':'gameId','dimension3':'channel','dimension4':'area','dimension5':'gameName','dimension6':'access'}})}}var J=Edbox.ComponentRootPath+"ThirdParty/facebook/Loader.js?v=20191002";function GetAccess(){var a="个人库";switch(Edbox.Access){case 1:a="模板";break;case 2:a="个人库";break;case 3:a="体验库";break}return Edbox.GameId===""?"":a}function getGameDetail(b,c){if(Edbox.Access===1){Edbox.Api.MMO.GetBaseAppInfo(Edbox.GameId,Edbox.Version,function(a){w=a.app_name;s=Edbox.GameId;t=Edbox.Version;if(b)b(w)},c)}else if(Edbox.Access===2){Edbox.Api.MMO.GetPersonalAppInfo(Edbox.GameId,function(a){w=a.app_name;s=a.baseid;t=a.base_version;if(b)b(w)},c)}else if(Edbox.Access===3){Edbox.Api.MMO.GetAppInfo(Edbox.GameId,function(a){w=a.app_name;s=a.baseid;t=a.base_version;if(b)b(w)},c)}}function GetTagsMap(b,c){Edbox.Api.MMO.GetTagMap(function(a){r=new Dictionary();if(a&&a.taglist){for(var i=0;i<a.taglist.length;i++){if(!r.ContainsKey(a.taglist[i].fatherid)){r.Set(a.taglist[i].fatherid,a.taglist[i])}}}if(b)b()},function(a){dlog('GetTagMap failed : '+a);if(c)c('GetTagMap failed : '+a)})}function GetAppTags(f,g,h){if(f===p){if(g)g(q)}else if(r===null){GetTagsMap(function(){GetTags(f,g,h)})}else{GetTags(f,g,h)}function GetTags(b,c,d){Edbox.Api.MMO.GetTags(b,function(a){if(a){q=GetTagsFormatData(b,a);p=b;if(c)c(q)}else{if(d)d("GetTags null")}},function(e){if(d)d(e)})}}function GetTagsFormatData(a,b){var c=GetTagsByCodes(b.edutags);var d=GetTagsByCodes(b.gametags);var e=GetTagsByCodes(b.othertags);var f=GetTagsByCodes(b.customededutags);var g=GetTagsByCodes(b.modelgametag);var h=GetTagsByCodes(b.modeledutag);var j=c.concat(h).concat(d).concat(g).concat(e).concat(f);var k={};for(var i=0;i<j.length;++i){if(j[i].id===undefined){continue}var l=j[i].id+" "+j[i].value;k[l]=a}k["gameId"]=a;return k}function GetTagsByCodes(a){var b=[];if(r&&a){for(var i=0;i<a.length;i++){var c=false;for(var j=0;j<r.Keys.length;j++){var d=r.Keys[j];if(d===a[i]){c=true;var e=new Object;e.id=d;e.value=r.Get(d).lvl2name;b.push(e)}}if(!c){b.push(a[i])}}}return b}function GetLoginInfo(){var a="";if(location.host.indexOf('game.')>=0){a="Game"}else if(location.host===Edbox.GetHost("Lobby")){a="Lobby"}else if(location.host===Edbox.GetHost("Component")){a="Editor"}v=Edbox.EbUserId+'';var b={"gameId":Edbox.GameId,"userId":v,"account_type":Edbox.AccountType,"channel":Edbox.Channel,"access":GetAccess(),"version":Edbox.Version,"area":Edbox.Area,"server_key":Edbox.ServerKey,"loginMode":a};return b}function YuntuEvent(a,b){if(!F)return;F.onEvent({eventId:a+'_'+Edbox.ServerKey,info:b});dlog(a,b)}function GAEvent(a,b,c,d){if(!I){if(d)d();return}if(!b)b="";if(!c)c="";gtag('event',a,{'event_category':b,'event_label':c,'send_to':GetGoogleKey(),'event_callback':createFunctionWithTimeout(function(){if(d)d()})})}function createFunctionWithTimeout(a,b){var c=false;function fn(){if(!c){c=true;a()}}setTimeout(fn,b||10000);return fn}function gtag(){window.dataLayer=window.dataLayer||[];dataLayer.push(arguments)}function GoogleLogin(){if(!I)return;if(location.host.indexOf(Edbox.GetHost("Component"))===0){return}var a="defalut";if(location.host.indexOf(Edbox.GetHost("Lobby"))===0){a="lobby"}else{a="game";getGameDetail(function(){gtag('event','gameName_dimension',{'gameName':w})})}gtag('event','account_type_dimension',{'account_type':Edbox.AccountType});gtag('event','channel_dimension',{'channel':Edbox.Channel});gtag('event','area_type_dimension',{'area':Edbox.Area});gtag('event','gameId_dimension',{'gameId':Edbox.GameId});gtag('event','access_dimension',{'access':Edbox.Access+""});GAEvent("login_"+a,Edbox.AccountType+"_login",Edbox.EbUserId+"")}function signInGoogle(a){GAEvent("signin",Edbox.AccountType+"_signin",Edbox.EbUserId+"",a)}function signUpGoogle(a){GAEvent("signup",Edbox.AccountType+"_signup",Edbox.EbUserId+"",a)}function signInFacebook(a){if(Edbox.AccountType!=="Facebook")return;Require(J,function(){dlog("Sign In Facebook");if(typeof fbq('trackCustom','SignIn',{promotion:Edbox.EbUserId})==='undefined')if(a)a()})}function signUpFacebook(a){if(Edbox.AccountType!=="Facebook")return;Require(J,function(){dlog("Sign Up Facebook");if(typeof fbq('track','CompleteRegistration',{content_name:Edbox.EbUserId,currency:'USD',value:1})==='undefined')if(a)a()})}var K=1;var L=2;var M=4;function Init(){if(Edbox.ServerKey==="Beta"||Edbox.ServerKey==="US"){initGA();Edbox.Action.User.GetUserInfo(function(a){if(a.statistics_flag===0){Edbox.Api.MMO.SetStatisticsFlag(K|L|M);signInGoogle();signInFacebook();return}if(a.statistics_flag&L){signInGoogle()}else{signUpGoogle(function(){Edbox.Api.MMO.SetStatisticsFlag(a.statistics_flag|L)})}if(a.statistics_flag&M){signInFacebook()}else{signUpFacebook(function(){Edbox.Api.MMO.SetStatisticsFlag(a.statistics_flag|M)})}})}if(Edbox.ServerKey==="Feature"||Edbox.ServerKey==="Dev"||Edbox.ServerKey==="QA"){C=true}initYunTu();o=true}function dlog(a,b){if(N.OnLog){if(a)N.OnLog(a);if(b)N.OnLog(b)}}var N={OnLog:null,Login:function(){if(!u)return;function loginEvent(){GoogleLogin();YuntuEvent("edbox_Login",GetLoginInfo());Edbox.WindowEvent.AddExitEvent(N.Exit)}if(!o)Init();loginEvent()},SignUp:function(a){var b=window.location.host;if(b.indexOf(Edbox.GetHost("Lobby"))>=0||b.indexOf(Edbox.GetHost("Game"))>=0){if(!o)Init();signUpFacebook();signUpGoogle(a)}else{if(a)a()}},SignIn:function(a){var b=window.location.host;if(b.indexOf(Edbox.GetHost("Lobby"))>=0||b.indexOf(Edbox.GetHost("Game"))>=0){if(!o)Init();signInFacebook();signInGoogle(a)}else{if(a)a()}},StartGame:function(b){GetAppTags(b,function(a){YuntuEvent("edbox_StartGame",a)})},PublishGame:function(b){GetAppTags(b,function(a){YuntuEvent("edbox_PublishGame",a)})},CollectGame:function(b){GetAppTags(b,function(a){YuntuEvent("edbox_CollectGame",a)})},ShareGame:function(a,b){var c={"gameId":a,"share":b};YuntuEvent("edbox_ShareGame",c)},ExportGame:function(a,b){var c={"gameId":a,"type":b};YuntuEvent("edbox_ExportGame",c)},ExportEditorTemplate:function(b){GetAppTags(b,function(a){YuntuEvent("edbox_ExportEditorTemplate",a)})},FeedBack:function(){YuntuEvent("edbox_FeedBack",{})},Logout:function(){var a={userid:v};YuntuEvent("edbox_Logout",a);if(F){F.onProfileSignOff()}},Exit:function(){YuntuEvent("edbox_Exit",{userid:v});if(F){F.onProfileSignOff()}if(location.host===Edbox.GetHost("Lobby")){N.ClickEvent("CloseLobby")}},SetOpen:function(a){u=a},GetOpen:function(){return u},EditStart:function(){if(!F){Init(CloudLogin)}else{CloudLogin()}function CloudLogin(){F.onProfileSignIn(Edbox.EbUserId+'');GetAppTags(Edbox.GameId,function(a){a['access']=GetAccess();YuntuEvent("edbox_EditorGame",a)},null);Edbox.WindowEvent.AddExitEvent(N.EditExit)}},EditSave:function(b){if(!F)return;GetAppTags(b,function(a){a['access']=GetAccess();YuntuEvent("edbox_EditorSave",a)})},EditPlay:function(){if(!F)return;GetAppTags(Edbox.GameId,function(a){a['access']=GetAccess();YuntuEvent("edbox_EditorPlay",a)})},EditExit:function(){if(!F)return;GetAppTags(Edbox.GameId,function(a){a['access']=GetAccess();YuntuEvent("edbox_EditorExit",a)})},ClickEvent:function(a,b,c,d){GAEvent("click"+a,b,c,d)},CustomEvent:function(b,c){function GetTemplateID(a){if(s===""){getGameDetail(a)}else{a()}}if(Edbox.GameId==="")return;GetTemplateID(function(){if(!c||typeof c!=="object"){c=new Object()}c.GameName=w;c.GameId=Edbox.GameId;c.Version=Edbox.Version;YuntuEvent(Edbox.GameId+"_"+b,c)})},GoogleEvent:function(a,b,c){if(!I)return;if(!c)c="";gtag('event',b,{'event_category':a+"_custom",'event_label':c,'send_to':GetGoogleKey()})}};if(m&&n&&!m[n]){m[n]=N}function Loader(){var b=GetServerKey();function GetHost(a){if(Edbox.Host&&Edbox.Host[a])return Edbox.Host[a][b];return""}var c=window.location.host;if(c.indexOf(GetHost("Lobby"))>=0||c.indexOf(GetHost("Game"))>=0||c.indexOf(GetHost("Component"))>=0){if(b==="Beta"||b==="US"){Edbox.InitRequire(H+GetGoogleKey())}else{Edbox.InitRequire(E)}}}Loader()}(Edbox,"DataStatistic"));(function(k,l){var m=function(a){var b=a.split(';base64,');var c=b[0].split(':')[1];var d=window.atob(b[1]);var e=d.length;var f=new Uint8Array(e);for(var i=0;i<e;++i){f[i]=d.charCodeAt(i)}return new Blob([f],{type:c})};var n=function(a){if(a.indexOf('data:')!==-1&&a.indexOf('base64')!==-1){return true}else{return false}};var o=function(a){return a.split(";")[0].split("/")[1]};var p=function(a,b,c){var d=['bmp','png','jpg','jpeg','gif','mp3','ogg'];if(c){if(d.indexOf(c.slice(c.lastIndexOf('.')+1,c.length))>=0)return c;else{if(b==="src"){a=a.replace(/\\/g,"/");var e=a.lastIndexOf("/");a=a.substring(e+1);a=a.split("?")[0];a=a.split(".")[1];return c+"."+a}if(b==="base64"){return c+"."+o(a)}}}else{if(b==="src"){a=a.replace(/\\/g,"/");var f=a.lastIndexOf("/");a=a.substring(f+1);a=a.split("?")[0];return a}if(b==="base64"){return new Date().getTime()+"."+o(a)}}};var q=function(b,c){var d=typeof b==='string'?m(b):b;var f=new FileReader();f.readAsDataURL(d);f.onload=function(e){var a=document.createElement("a");a.download=c;a.href=window.URL.createObjectURL(d);a.click();window.URL.revokeObjectURL(a.href)}};var r=function(d,f,g,h,i){if(n(d)){f=p(d,"base64",f);q(d,f,g,h);if(g)g()}else{f=p(d,"src",f);var j=new XMLHttpRequest();j.open("GET",d,true);j.responseType="blob";j.addEventListener("progress",function(e){if(e.lengthComputable){var a=e.loaded;var b=e.total;var c=Math.floor(100*a/b);if(i){i(c,a,b)}}},false);j.onload=function(){q(this.response,f);if(g)g()};j.ontimeout=function(e){if(h)h(e)};j.onerror=function(e){var a=document.createElement("a");a.download=f;a.href=d;a.click();window.URL.revokeObjectURL(a.href);if(h)h(e)};j.send()}};if(k&&l&&!k[l]){k[l]=r}})(Edbox,"DownLoad");(function(M,N){var O="1671520477";var P={key:'',offset:0,data:{offset:0,items:[]}};var Q="";window.addEventListener('message',function(d){var e=d.data;function sendMess(a,b){var c={Type:a,Datas:b};d.source.postMessage(c,"*")}if(e.Type==='getShareUrl'){Edbox.MMO.GetGameLink(Edbox.GameId,Edbox.Version,Edbox.Access,2,function(a){sendMess("refShareUrl",a)})}else if(e.Type==="ShareNdr"){Edbox.NDR.GetList(e.Datas,function(a){sendMess("GetShareGuid",a)})}},false);offsetHeight=584;function GetHost(){if(Edbox.ServerKey==="Dev"||Edbox.ServerKey==="QA"){return Edbox.Host.Login.Beta}return Edbox.GetHost("Login")}function GetShareInfo(b,c,d,e){if(typeof e==="undefined"||e===3){Edbox.Api.MMO.GetAppInfo(b,function suc(a){if(c)c(a)},d)}else if(e===2){Edbox.Api.MMO.GetPersonalAppInfo(b,function suc(a){if(c)c(a)},d)}}function GetInfoByKey(b,c,d){function getData(a){if(!d){return a}else{if(a[d])return a[d];return""}}if(!b){return null}if(b.Name&&b.Name===c){return getData(b)}if(b.Datas){for(let index=0;index<b.Datas.length;index++){var e=b.Datas[index];var f=GetInfoByKey(e,c);if(f){return getData(f)}}}else{return null}}function GetShareArgs(L){Edbox.Resource.GetConfig("DatasConfig",function(c){var d=c.StaticData.Share;var e=GetInfoByKey(c.StaticData.Share,"share_switch");if(!e){e=false}else{e=e.Value}var f=GetInfoByKey(d,"share_bg","GUID");var g=GetInfoByKey(d,"share_qrbg","GUID");var h=GetInfoByKey(d,"share_back","GUID");var i=GetInfoByKey(d,"share_friend","GUID");var j=GetInfoByKey(d,"share_facebook","GUID");var k=GetInfoByKey(d,"share_twitter","GUID");var l=GetInfoByKey(d,"share_weixin","GUID");var m=GetInfoByKey(d,"share_moments","GUID");var n=GetInfoByKey(d,"share_qq","GUID");var o=GetInfoByKey(d,"share_weibo","GUID");var p=GetInfoByKey(d,"share_link","GUID");var q=GetInfoByKey(d,"share_title");var r=GetInfoByKey(d,"share_save");var s=GetInfoByKey(d,"share_tip");var t=GetInfoByKey(d,"share_copytip","Value");var u=GetInfoByKey(d,"share_words","Value");var v=GetInfoByKey(d,"share_accseetip","Value");var w=GetInfoByKey(d,"share_weixin_tip","Value");var x=GetInfoByKey(d,"share_moments_tip","Value");var y=GetInfoByKey(d,"share_webchatbrowser_tip","Value");var z=GetInfoByKey(d,"share_weixin_failtip","Value");var A=GetInfoByKey(d,"share_iossafari_tip","Value");var B=GetInfoByKey(d,"share_android_tip","Value");var C=GetInfoByKey(d,"share_apk_tip","Value");var D=GetInfoByKey(d,"share_cancelapk_tip","Value");var E=GetInfoByKey(d,"share_okapk_tip","Value");Q=!u?Edbox.GetTip("QQ_SHARE_JOIN"):u;var F=d.Height>d.Width?1:0;var G=GetInfoByKey(d,"share_type","Key");var H="";var I="";var J="";var K="pc";if(Edbox.Platform.IsIOS){K="ios"}else if(Edbox.Platform.IsIAnroid){K="android"}function sendDatas(){Edbox.MMO.GetGameLink(Edbox.GameId,Edbox.Version,Edbox.Access,2,function(a){if(L){var b={isopen:e,width:d.Width,height:d.Height,bg:H,qrbg:I,backImg:J,title:q,save:r,tip:s,channelLst:G,url:a,platform:K,channelIcon:{},cptip:t,wdtip:u,actip:v,wxtip:w,mmtip:x,bwebchattip:y,weixinfailtip:z,biostip:A,tandroidtip:B,tandroidtitle:C,okandroidtip:E,noandroidtip:D,mode:F,productname:Edbox.ServerInfo.app_name,language:Edbox.Language,access:Edbox.Access,showqr:Edbox.Platform.IsIOS||Edbox.Platform.IsAndroid};b.channelIcon={friend:i,facebook:j,twitter:k,weixin:l,moments:m,qq:n,weibo:o,link:p};L(b)}})}Edbox.NDR.GetList([f,g,h,i,j,k,l,m,n,o,p],function(a){if(f!=="")H=a[f].Url;if(g!=="")I=a[g].Url;if(h!=="")J=a[h].Url;if(i!==undefined&&i!=="")i=a[i].Url;if(j!==undefined&&j!=="")j=a[j].Url;if(k!==undefined&&k!=="")k=a[k].Url;if(l!==undefined&&l!=="")l=a[l].Url;if(n!==undefined&&n!=="")n=a[n].Url;if(m!==undefined&&m!=="")m=a[m].Url;if(o!==undefined&&o!=="")o=a[o].Url;if(p!==undefined&&p!=="")p=a[p].Url;sendDatas()},function(){sendDatas()})})}function OpenWindow(a){var b=400;var c=600;var d=(window.screen.availHeight-30-b)/2;var e=(window.screen.availWidth-10-c)/2;window.open(a,"ShareGame",'height='+b+',innerHeight='+b+',width='+c+',innerWidth='+c+',top='+d+',left='+e+',status=no,toolbar=no,menubar=no,location=no,resizable=no,scrollbars=0,titlebar=no')}function GetIMFriendsLst(h,j,k,l,m,n){var o=function(d){P.data.total=d.total;var e=[];d.items.forEach(function(a){var b=new Object();b.uri=a.uri;b.iconUrl=Edbox.Api.CS.GetAvatar(a.uri,80);e.push(b)});var f="[";for(var i=0;i<e.length;i++){f+="{\"user_id\":\""+e[i].uri+"\"}";if(i<e.length-1)f+=","}f+="]";var g=function(c){c.items.forEach(function(b){e.forEach(function(a){if(a.uri===b.user_id+''){if(P.data.items.length<k&&(P.key.length<1||b.nick_name.indexOf(P.key)>-1)){a.nickname=b.nick_name;P.data.items.push(a)}}})});P.offset+=c.items.length;if(c.items.length!==0&&P.data.items.length<k){GetIMFriendsLst(h,P.offset,k,false,m,n)}else{P.data.offset=P.offset;if(m)m(P.data)}};Edbox.Api.UC.GetIMFriendsDetail(f,g,n)};k=Math.min(k,50);if(P.key!==h){P.key=h;P.offset=0}if(l){P.data.total=0;P.data.items=[]}P.offset=j;Edbox.Api.IM.GetIMFriendList(P.offset,k,o,n)}function fillArgs(a){var b={appkey:Edbox.AppKey,lan:Edbox.Language,area:Edbox.Area};var c=a+"?edboxargs="+Edbox.Encode(JSON.stringify(b));return c}function AndroidInstallApp(a,b,c,d){window.location.href="uniwebview://"+"action?share="+a+"&url="+b+"&scheme="+c+"&pkg="+d}function clickUrl(b,c){var a=document.createElement('a');a.id="sharedurl";a.download='sharedurl';a.href=b;a.target="_blank";a.rel="noopener noreferrer";a.onclick=c;a.click()}var R={OpenUrlScheme:function(a){window.location.href=a},ShareFacebook:function(a){var b="https://www.facebook.com/sharer.php?title=Edbox&u=";var c=Edbox.Protocol+"://"+GetHost()+"/edbox/share/"+"facebook"+"/"+a+".html";var d=b+encodeURIComponent(c);d=fillArgs(d);if(Edbox.Platform.IsIOS){clickUrl(d)}else if(Edbox.Platform.IsAndroid){if(window.isH5Shell){AndroidInstallApp("facebook",d,c,"com.facebook.katana")}else{clickUrl(d)}}else{OpenWindow(d)}},ShareTwitter:function(b,c){_appId=b;c=c?c:"";var d=encodeURIComponent(c);var e="https://twitter.com/share?text="+d+"&url=";var f=encodeURIComponent(Edbox.Protocol+"://"+GetHost()+"/edbox/share/"+"twitter"+"/"+_appId+".html");var g=e+f;g=fillArgs(g);if(Edbox.Platform.IsIOS){clickUrl(g)}else if(Edbox.Platform.IsAndroid){if(window.isH5Shell){var h="twitter://post?message="+d+"&url="+f;AndroidInstallApp("twitter",g,h,"com.twitter.android")}else{clickUrl(g)}}else{if(c!==""){OpenWindow(g)}else{Edbox.MMO.GetInfo(Edbox.GameId,function(a){c=a.productname;d=encodeURIComponent(c);e="https://twitter.com/share?text="+d+"&url=";f=encodeURIComponent(Edbox.Protocol+"://"+GetHost()+"/edbox/share/"+"twitter"+"/"+_appId+".html");g=e+f;g=fillArgs(g);OpenWindow(g)})}}},ShareWeibo:function(h,i){GetShareInfo(h,function(g){Edbox.Resource.GetImage(g.icon,function(a){var b=Edbox.Protocol+"://"+GetHost()+"/edbox/share/"+"weibo"+"/"+h+".html";var c="https://service.weibo.com/share/share.php?appkey="+encodeURIComponent(O)+"&title="+encodeURIComponent(Q+"《"+g.app_name+"》")+"&url="+encodeURIComponent(b)+"&pic="+encodeURIComponent(a);c=fillArgs(c);if(Edbox.Platform.IsPC){OpenWindow(c)}else{var d="share";if(i===2){d="share_s"}var e=Edbox.Protocol+"://"+Edbox.GetHost("Login")+"/edbox/"+d+"/"+"weibo"+"/"+h+".html";e=fillArgs(e);var f="https://service.weibo.com/share/share.php?appkey="+encodeURIComponent(O)+"&title="+encodeURIComponent(Q+"《"+g.app_name+"》")+"&url="+encodeURIComponent(e)+"&pic="+encodeURIComponent(a);Edbox.MShare.MShareWeibo(g.app_name,e,g.introduction,a,Q+"《"+g.app_name+"》",f)}},function(){})},function(e){},i)},ShareQQ:function(h,i,j,k){GetShareInfo(h,function(g){Edbox.Resource.GetImage(g.icon,function(b){if(Edbox.Platform.IsPC){var c=Edbox.Protocol+"://"+GetHost()+"/edbox/share/"+"qq"+"/"+h+".html";var d="https://connect.qq.com/widget/shareqq/index.html?url="+encodeURIComponent(c)+"&summary="+encodeURIComponent(g.introduction)+"&title="+encodeURIComponent(g.app_name)+"&desc="+encodeURIComponent(Q)+"&pics="+encodeURIComponent(b);d=fillArgs(d);var a='height=540,width=720, top = '+(window.screen.height-540)/2+', left = '+(window.screen.width-720)/2+', toolbar=no,menubar=no,resizable=yes,location=yes,status=no';window.open(d,"shareQQ",a);if(j)j()}else{var e="share";if(i===2){e="share_s"}var f=Edbox.Protocol+"://"+Edbox.GetHost("Login")+"/edbox/"+e+"/"+"qq"+"/"+h+".html";f=fillArgs(f);Edbox.MShare.MShare(g.app_name,f,g.introduction,b,h,"","QQ",i,j,k)}})},function(e){},i)},ShareWX:function(f,g,h,i,j){GetShareInfo(f,function(d){Edbox.Resource.GetImage(d.icon,function(a){var b;var c="share";if(h===2){c="share_s"}if(!g){g=1}b=Edbox.Protocol+"://"+Edbox.GetHost("Login")+"/edbox/"+c+"/"+"wechat"+"/"+f+".html";b=fillArgs(b);Edbox.MShare.MShare(d.app_name,b,d.introduction,a,f,g,"WeChat",h,i,j)})},function(e){},h)},ShareIM:function(){var c=document.createElement("iframe");c.id="shareIM";c.setAttribute("src",getUrl());c.style.width="100%";c.style.height="100%";c.style.overflow="hidden";c.style.position="fixed";c.style.top="0";c.style.left="0";c.style.height="100%";c.style.width="100%";c.style.margin="0";c.style.padding="0";c.style.border="0";c.style.zIndex="9999";window.onresize=function(){c.style.top=getPosTop()};window.addEventListener('message',function(a){if(a.data==='closeIM'){$("#shareIM").remove()}},false);document.body.appendChild(c);function getPosTop(){return Math.max(0,(top.window.innerHeight-644)/2+top.pageYOffset)+"px"}function getUrl(){var a=Edbox.Protocol+"://"+Edbox.GetHost("Component")+"/coms/IM/index.html";var b="?EdboxArgs="+Edbox.DataSet.Get("EdboxArgs");a=a+b;return a}},GetIMFriendsInfo:function(a,b,c){var d=a.pagesize?a.pagesize:10;d=Math.min(d,50);GetIMFriendsLst(a.key,a.offset,d,true,b,c)},ShareApp2IM:function(d,e,f){var g=Edbox.GetTip('IM_SHARE_SUMMARY');var h=d.appName+Edbox.GetTip('IM_SHARE_ICONALT');var i=Edbox.GetTip('IM_SHARE_JOIN');Edbox.Action.MMO.GetTryPlayingInfo(d.appId,d.access,d.get_type,d.version,function(c){Edbox.DataStatistic.ShareGame(d.appId,'Friends');d.appDesc=d.appDesc.replace(/\n/g," ");d.appDesc=d.appDesc.replace(/\\/g,'\\\\');Edbox.MMO.CutString(d.appName,20,"...",function(b){Edbox.MMO.CutString(d.appDesc,100,"...",function(a){Edbox.Api.IM.SharePersonalApp(d.appId,d.receiver,g,h,d.iconUrl,b,a,i,c.web_resid,e,f)})})})},ShareAppToIM:function(e,f,g){if(Edbox.Access===1){Edbox.MMO.GetTemplateInfo(Edbox.GameId,Edbox.Version,function(a){ShareTo(a.app_name,a.icon,a.introduction)})}else if(Edbox.Access===2){Edbox.MMO.GetProductInfo(Edbox.GameId,function(a){ShareTo(a.app_name,a.icon,a.introduction)})}else if(Edbox.Access===3){Edbox.MMO.GetAppInfo(Edbox.GameId,function(a){ShareTo(a.app_name,a.icon,a.introduction)})}function ShareTo(a,b,c){var d={appId:Edbox.GameId,receiver:e,appName:a,access:Edbox.Access,version:Edbox.Version,iconUrl:b,appDesc:c,get_type:2};R.ShareApp2IM(d,f,g)}},OpenShareUrl:function(h,i){function getPosTop(a){return 0}function getUrl(){var a=Edbox.Protocol+"://"+Edbox.GetHost("Component")+"/coms/Share/index.html";var b="?type=1";a=a+b;return a}if(!Edbox.Guest.CheckShare()){return}Edbox.GetFunctionConfig(function(g){if(Edbox.AppKey!=='HK'&&g.LimitFunctions.indexOf("SHARE")>=0){if(i)i("age limit");return}GetShareArgs(function(e){if(!e.isopen){if(i)i();return}mode=e.width>e.height?0:1;var f=document.createElement("iframe");f.id="shareFrame";f.setAttribute("src",getUrl(e));f.setAttribute("allowTransparency",true);f.style.width=window.innerWidth+"px";f.style.height=window.innerHeight+"px";f.style.overflow="hidden";f.style.position="fixed";f.style.top=getPosTop(e.height);f.style.left="0";f.style.margin="0";f.style.padding="0";f.style.border="0";f.style.zIndex="9999";window.onresize=function(){f.style.top=getPosTop(e.height)};document.body.appendChild(f);f.onload=function(){GetShareArgs(function(d){function Send(a,b){if(!f)return;var c={Type:a,Datas:b};obj=JSON.parse(JSON.stringify(c));f.contentWindow.postMessage(obj,"*")}Send("refreshShare",d)})};window.addEventListener('message',function(a){var b=a.data;if(b.Type==='closeShare'){$("#shareFrame").remove()}else if(b.Type==='initShare'){}else if(b.Type==="ShareTo"){switch(b.Datas){case"Weibo":R.ShareWeibo(Edbox.GameId);break;case"QQ":R.ShareQQ(Edbox.GameId);break;case"Facebook":R.ShareFacebook(Edbox.GameId);break;case"Twitter":R.ShareTwitter(Edbox.GameId);break;case"IM":R.ShareIM();break}}},false);if(h)h()})},function(a){if(i)i(a)})},GetEnableShare:function(){if(Edbox.ServerKey==="US"||Edbox.ServerKey==="Beta"){return['facebook','friend','twitter','link']}else{return['friend','qq','weibo','link']}}};if(M&&N&&!M[N]){M[N]=R}}(Edbox,"Share"));(function(k,l){function MMOGet(a,b,c,d,e){var f="";var g='ANDROID';if(Edbox.Platform.IsPC){g='WINDOWS'}var h=Edbox.GetLanguageCode();var i={language:h,platform:g};if(Edbox.SDPAppId&&Edbox.SDPAppId.trim().length>0){i.sdp_app_id=Edbox.SDPAppId}if(e){var j="";if(b&&b.trim().length>0){j=a+"?"+b}i.Authorization=Edbox.Request.GetAuthorizationWithoutLogin("Get",j,Edbox.GetHost("MMO"));Edbox.Request.Send("Get",Edbox.Protocol,Edbox.GetHost("MMO"),a,b,i,false,c,d)}else{Edbox.Request.GetWithHeader(Edbox.GetHost("MMO"),a,b,i,c,d)}}function MMOPost(a,b,c,d){var e=null;if(Edbox.SDPAppId&&Edbox.SDPAppId.trim().length>0){e={sdp_app_id:Edbox.SDPAppId}}Edbox.Request.PostWithHeader(Edbox.GetHost("MMO"),a,b,e,c,d)}function Precheck(a,b,c){var d="/v1.0/api/product/product/actions/get_precheck_status";var e="action_type="+a;MMOGet(d,e,b,c)}var m={ReportApp:function(a,b,c){var d="/edbox.php?c=api_v1_report&a=index";Edbox.Request.Post(Edbox.GetHost("Login"),d,JSON.stringify(a),b,c)},GetAppInfo:function(a,b,c){var d="/v0.1/api/product/product/actions/get_app_detail";var e="app_id="+a;MMOGet(d,e,b,c)},MMOGetWithoutLogin:function(a,b,c,d){MMOGet(a,b,c,d,true)},GetPersonalAppInfo:function(a,b,c){var d="/v0.1/api/product/personal/actions/get_app_detail";var e="app_id="+a;MMOGet(d,e,b,c)},GetBaseFitAppInfo:function(a,b,c,d,e){var f="/v0.1/api/product/base/actions/get_fit_app_detail";var g="app_id="+a+"&editorTypes="+b+"&version="+c;MMOGet(f,g,d,e)},GetPersonalApps:function(a,b,c,d,e,f){var g="/v0.1/api/product/personal/actions/get_app_list";var h="page="+(a||1)+"&size="+(b||20)+"&sorts="+(c||"")+"&status="+(d||0);MMOGet(g,h,e,f)},GetPersonalReleaseApps:function(a,b,c,d,e){var f="/v0.1/api/product/personal/actions/get_released_list";var g="page="+(a||1)+"&size="+(b||20)+"&sorts="+(c||"");MMOGet(f,g,d,e)},GetAppResInfo:function(a,b,c,d){if(!b)b=2;var e="/v0.1/api/product/product/actions/get_pkg_res_info";var f="app_id="+a+"&access_type="+b;MMOGet(e,f,c,d)},GetTryPlayingInfo:function(a,b,c,d,e,f){if(!b)b=2;if(!c){if(Edbox.Platform.IsPC){c=7}else{c=1}}var g="/v0.1/api/product/product/actions/get_app_res_info";var h="app_id="+a+"&access_type="+b+"&get_type="+c+"&version="+d;MMOGet(g,h,e,f,true)},HeartBeating:function(a,b){var c="/v0.1/api/product/stat/actions/add_online";var d=new Object();d.app_id=Edbox.GameId;d.version=Edbox.Version;d.access_type=Edbox.Access;d.get_type=Edbox.Mode;d=JSON.stringify(d);MMOPost(c,d,a,b)},SearchExperienceApps:function(a,b,c,d,e,f,g,h){var i="/v0.1/api/product/product/actions/search_app";var j="word="+(encodeURIComponent(a)||"")+"&page="+(b||1)+"&size="+(c||20)+"&sorts="+(d||"")+"&type="+e+"&searchPlatforms="+f;MMOGet(i,j,g,h)},GetHeatApp:function(a,b,c){var d="/v0.1/api/product/product/actions/get_app_by_heat";var e="count="+a;MMOGet(d,e,b,c)},GetAppScoreInfo:function(a,b,c){var d="/v0.1/api/product/product/actions/get_app_score_info";var e="app_id="+a;MMOGet(d,e,b,c)},SetAppScore:function(a,b,c){var d="/v0.1/api/review/review/actions/set_app_score";MMOPost(d,JSON.stringify(a),b,c)},GetUserScoreInfo:function(a,b,c,d,e){var f="/v0.1/api/product/product/actions/get_user_score_info";var g="app_id="+a+"&target_user_id="+b+"&version="+(c||"");MMOGet(f,g,d,e)},SetTag:function(a,b,c){var d="/v1.1/api/product/product/actions/set_tag";MMOPost(d,JSON.stringify(a),b,c)},GetTags:function(a,b,c){if(!a){if(c)c("App_id ID Error");return}var d="/v1.1/api/product/product/actions/get_customed_tag";var e="app_id="+a;MMOGet(d,e,b,c)},GetTagMap:function(a,b){var c=Edbox.GetLanguageCode();var d="/v0.1/api/product/product/actions/get_official_tagmap";var e="lang="+c;MMOGet(d,e,a,b)},CollectApp:function(a,b,c){var d="/v0.1/api/product/product/actions/collect_app";var e={'app_id':a};MMOPost(d,JSON.stringify(e),b,c)},CancelCollectApp:function(a,b,c){var d="/v0.1/api/product/product/actions/cancel_collect_app";var e={'app_id':a};MMOPost(d,JSON.stringify(e),b,c)},GetUserCollectApps:function(a,b,c,d){var e="/v0.1/api/product/product/actions/get_collect_app_list";var f="page="+(a||1)+"&size="+(b||20);MMOGet(e,f,c,d)},GetAppHistory:function(a,b,c){var d="/v0.1/api/product/product/actions/get_introduction_list";var e="app_id="+a;MMOGet(d,e,b,c)},GetRecommandApps:function(a,b,c,d,e){var f="/v0.1/api/product/recommand/actions/get_app_list";var g="recommand_type="+a+"&page="+(b||1)+"&size="+(c||20);MMOGet(f,g,d,e)},GetRecommandAppsByAppId:function(a,b,c,d){var e="/v0.1/api/product/product/actions/get_recommand_list";var f="app_id="+a+"&access_type="+b;MMOGet(e,f,c,d)},AddPlayRecord:function(a,b,c){var d="/v0.1/api/product/product/actions/add_play_record";var e="app_id="+a;MMOGet(d,e,b,c)},GetPlayRecord:function(a,b){var c="/v0.1/api/product/product/actions/get_play_record";MMOGet(c,"",a,b)},RenameApp:function(a,b,c,d){var e="/v0.1/api/product/personal/actions/rename_app";var f={'app_id':a,'new_name':b};MMOPost(e,JSON.stringify(f),c,d)},DeleteApp:function(a,b,c){var d="/v0.1/api/product/personal/actions/delete_app";var e="app_id="+a;MMOGet(d,e,b,c)},SoldoutApp:function(a,b,c){var d="/v0.1/api/product/product/actions/soldout_app";var e={'app_id':a};MMOPost(d,JSON.stringify(e),b,c)},CancelPublishApp:function(a,b,c,d){var e="/v1.0/api/product/personal/actions/cancel_release_app";var f={'app_id':a,'version':b};MMOPost(e,JSON.stringify(f),c,d)},SearchBaseApps:function(a,b,c,d,e,f,g){var h="/v0.1/api/product/base/actions/search_app";var i="word="+(encodeURIComponent(a)||"")+"&page="+(b||1)+"&size="+(c||20)+"&sorts="+(d||"")+"&editorTypes="+e;MMOGet(h,i,f,g)},SetLike:function(a,b,c){var d="/v0.1/api/product/base/actions/like";MMOPost(d,JSON.stringify(a),b,c)},IsNameDuplicate:function(a,b,c){var d="/v0.1/api/product/product/actions/check_name_duplicate";MMOPost(d,JSON.stringify(a),b,c)},PublishCountDown:function(a,b){var c="/v0.1/api/product/product/actions/get_countdown";MMOGet(c,"",a,b)},ReleaseApp:function(a,b,c){var d="/v0.1/api/product/product/actions/release_app";MMOPost(d,JSON.stringify(a),b,c)},IsSensitive:function(a,b,c){var d="/v0.1/api/product/verify/actions/sensitive";var e="word="+encodeURIComponent(a);e=e.replace("'","%27");if(b)b({is_sensitive:false})},CreateProduct:function(a,b,c){var d="/v0.1/api/product/personal/actions/create_app";MMOPost(d,JSON.stringify(a),b,c)},UpdateApp:function(a,b,c){var d="/v0.1/api/product/personal/actions/update_app";MMOPost(d,JSON.stringify(a),b,c)},CopyPersonalApp:function(a,b,c,d,e){var f="/v0.1/api/product/personal/actions/copy_app";var g="app_id="+a+"&version="+b+"&app_name="+encodeURI(c);MMOGet(f,g,d,e)},AddEmailVerify:function(a,b,c){var d="/v0.1/api/user/user/actions/add_email_verify";var e={'send_to_address':a};MMOPost(d,JSON.stringify(e),b,c)},ResendEmail:function(a,b){var c="/v0.1/api/user/user/actions/resend_email";MMOPost(c,'',a,b)},UpdateEmailVerify:function(a,b,c){var d="/v0.1/api/user/user/actions/update_user_email_address";var e={'send_to_address':a};MMOPost(d,JSON.stringify(e),b,c)},UpdateUserInfo:function(a,b,c){var d="/v0.1/api/user/user/actions/update_user_info";MMOPost(d,a,b,c)},CreateUser:function(a,b){var c="/v0.1/api/user/user/actions/get_user";MMOGet(c,'',a,b)},GetUser:function(a,b){var c="/v0.1/api/userCenter/user/actions/get_detail_info";MMOGet(c,'',a,b)},Logout:function(a,b){var c="/v1.0/api/user/user/actions/logout";MMOGet(c,null,a,b)},GetLoadGuideNodeInfo:function(a,b,c){var d="/v0.1/api/guide/guide/actions/load_guides";var e="app_id="+a;MMOGet(d,e,b,c)},FinishGuideNode:function(a,b,c,d){var e="/v0.1/api/guide/guide/actions/finish_guide_node";var f={app_id:a,node_id:b};MMOPost(e,JSON.stringify(f),c,d)},GetEditRecordInfo:function(a,b,c,d){var e="/v1.0/api/product/personal/actions/get_edit_history";var f="page="+a+"&size="+b;MMOGet(e,f,c,d)},PostChangeNumEditRecord:function(a,b,c){var d="/v1.0/api/product/personal/actions/set_recent_edit_num";var e="app_id="+a;MMOGet(d,e,b,c)},GetTempAppId:function(a,b,c){var d="/v0.1/api/product/product/actions/get_temp_app_id";var e="access_type="+a;MMOGet(d,e,b,c)},GetHotWords:function(a,b,c){var d="/v0.1/api/product/product/actions/get_hot_word_list";var e="product_type="+a;MMOGet(d,e,b,c)},CreateBaseApp:function(a,b,c){var d="/v1.1/api/product/base/actions/create_app";MMOPost(d,JSON.stringify(a),b,c)},UpdateBaseApp:function(a,b,c){var d="/v1.1/api/product/base/actions/update_app";MMOPost(d,JSON.stringify(a),b,c)},CoverBaseApp:function(a,b,c){var d="/v1.1/api/product/base/actions/cover_update_app";MMOPost(d,JSON.stringify(a),b,c)},GetBaseAppInfo:function(a,b,c,d){var e="/v1.1/api/product/base/actions/get_app_detail";var f="app_id="+a+"&version="+b;MMOGet(e,f,c,d)},GetBaseAppHistoryList:function(a,b,c,d,e,f){var g="/v0.1/api/product/base/actions/get_history_list";var h="app_id="+a+"&page="+(b||1)+"&size="+(c||20)+"&sorts="+(d||"");MMOGet(g,h,e,f)},ReleaseBaseApp:function(a,b,c,d){var e="/v0.1/api/product/base/actions/release_app";var f={app_id:a,version:b};MMOPost(e,JSON.stringify(f),c,d)},SoldoutBaseApp:function(a,b,c,d){var e="/v0.1/api/product/base/actions/soldout_app";var f={app_id:a,version:b};MMOPost(e,JSON.stringify(f),c,d)},SetHelpDoc:function(a,b,c,d,e,f){var g="/v0.1/api/product/base/actions/set_help_doc";var h={app_id:a,version:b,docurl:c,isopen:d};MMOPost(g,JSON.stringify(h),e,f)},SetStatisticsFlag:function(a,b,c){var d="/v0.1/api/user/user/actions/setStatisticsFlag";var e={user_id:Edbox.EbUserId,statistics_flag:a};MMOPost(d,JSON.stringify(e),b,c)},GetBaseAppList:function(a,b,c,d,e){var f="/v1.0/api/product/base/actions/get_app_list";var g="page="+(a||1)+"&size="+(b||20)+"&sorts="+(c||"");MMOGet(f,g,d,e)},GetHelpDoc:function(a,b,c,d){var e="/v0.1/api/product/base/actions/get_help_doc";var f="app_id="+a+"&version="+(b||"");MMOGet(e,f,c,d)},SearchPersonalApps:function(a,b,c,d,e,f,g,h){var i="/v0.1/api/product/product/actions/get_hot_word_list";var j="word="+a+"page="+b+"size="+c+"sorts="+d+"status="+e+"searchPlatforms="+f;MMOGet(i,j,g,h)},GetBalance:function(a,b){var c="/v1.0/api/user/user/actions/get_balance";MMOGet(c,"",a,b)},GetVipInfos:function(a,b){var c="/v1.0/api/vip/vip/actions/get_config_list";var d="app_id="+Edbox.SDPAppId;MMOGet(c,d,a,b)},GetVipInfo:function(a,b,c){var d="/v1.0/api/vip/vip/actions/get_config";var e="app_id="+Edbox.SDPAppId+"&vip_level="+a;MMOGet(d,e,b,c)},CreateOrder:function(a,b,c,d,e,f){var g="/v1.0/api/vip/vip/actions/create_order";var h={item_id:a,quantity:b,item_subject:c,app_id:d};MMOPost(g,JSON.stringify(h),e,f)},PurchaseGame:function(a,b,c,d){var e="/v0.1/api/product/product/actions/purchase_game";var f={app_id:a,pay_source:b};MMOPost(e,JSON.stringify(f),c,d)},CheckPurchaseGame:function(a,b,c){var d="/v0.1/api/product/product/actions/check_purchase_game";var e="app_id="+a;MMOGet(d,e,b,c)},GetAppIncome:function(a,b,c,d){var e="/v1.0/api/product/personal/actions/get_app_profit_info";var f="app_id="+a;MMOGet(e,f,c,d)},GetExportPayInfo:function(a,b){var c="/v1.0/api/product/product/actions/get_export_pay_info";MMOPost(c,'',a,b)},PrecheckPublish:function(a,b){Precheck(1,a,b)},PrecheckCreate:function(a,b){Precheck(0,a,b)},GetUserLimits:function(a,b){var c="/v1.0/api/user/user/actions/get_limit_detail";MMOGet(c,null,a,b)},GetShareLink:function(a,b,c,d,e){var f="/v1.0/api/product/product/actions/get_share_info";var g="app_id="+a+"&access_type="+(b||3)+"&shareType="+c;MMOGet(f,g,d,e)}};if(k&&l&&!k[l]){k[l]=m}}(Edbox.Api,"MMO"));(function(l,m){var n='2353d7e4-cbdc-4962-aadf-16b80a325bf4';var o='e671d549-b827-44da-a677-62f1c4f3a767';function UCGet(a,b,c,d){Edbox.Request.GetWithHeader(Edbox.GetHost("UC"),a,b,'',c,d,"https")}function UCPost(a,b,c,d){var e=n;if(Edbox.ServerKey==="Beta"||Edbox.ServerKey==="US"||Edbox.ServerKey==="HK"){e=o}var f={'sdp-app-id':e};Edbox.Request.PostWithHeader(Edbox.GetHost("UC"),a,b,f,c,d,"https")}function UCPatch(a,b,c,d){var e=n;if(Edbox.ServerKey==="Beta"||Edbox.ServerKey==="US"||Edbox.ServerKey==="HK"){e=o}var f={'sdp-app-id':e};Edbox.Request.PatchWithHeader(Edbox.GetHost("UC"),a,b,f,c,d,"https")}var p={GetIMFriendsDetail:function(a,b,c){var d="/v1.1/public/users/actions/batch";var e=new Object();e.user_ids=new Array();var f=JSON.parse(a);if(f.length===0){if(b)b({items:[]})}else{for(var i=0;i<f.length;i++){e.user_ids.push(f[i].user_id)}e=JSON.stringify(e);UCPost(d,e,b,c)}},SetUserNickName:function(a,b,c,d){var e="/v1.1/users/"+a;var f=new Object();f.nick_name=b;UCPatch(e,JSON.stringify(f),c,d)},GetUserInfo:function(a,b,c){var d="/v1.1/users/"+a;UCGet(d,null,b,c)},GetPersonalInfo:function(a,b,c){var d="/v1.1/person_accounts/"+a;UCGet(d,null,b,c)},GetOrganizationInfo:function(a,b,c){var d="/v1.1/organizations/"+a;UCGet(d,null,b,c)},ValidCheck:function(a,b,c,d,e,f,g,h){var i="/v1.1/tokens/"+a+"/actions/valid";var j={"mac":b,"nonce":c,"http_method":d.toUpperCase(),"request_uri":e,"host":f};var k="Post";Edbox.Request.Send(k,"https",Edbox.GetHost("UC"),i,j,'',false,g,h)},Logout:function(a,b,c){var d="/v1.1/tokens/"+a;var e=n;if(Edbox.ServerKey==="Beta"||Edbox.ServerKey==="US"||Edbox.ServerKey==="HK"){e=o}var f={'sdp-app-id':e};Edbox.Request.DeleteWithHeader(Edbox.GetHost("UC"),d,null,f,b,c,"https")},CreateSession:function(a,b,c){var d="/v1.1/sessions";UCPost(d,JSON.stringify(a),b,c)},JoinEdbox:function(a,b,c){var d="/v1.1/person_accounts/"+a.account_id+"/actions/join_org";UCPost(d,JSON.stringify(a),b,c)},GetPersonOrgInfo:function(a,b,c){var d="/v1.1/person_accounts/"+a.account_id+"/binded/users";var a="is_filter=true";UCGet(d,a,b,c)},Exchange:function(a,b,c){var d="v1.1/tokens/"+a.access_token+"/actions/exchange";UCPost(d,JSON.stringify(a),b,c)}};if(l&&m&&!l[m]){l[m]=p}}(Edbox.Api,"UC"));(function(o,p){var q={GetAvatar:function(a,b){if(!b)b=160;return Edbox.Protocol+"://"+Edbox.GetHost("CS")+"/v0.1/static/cscommon/avatar/"+a+"/"+a+".jpg?size="+b},UpLoadToCS:function(d,f,g,h,i,j,k){var l='/v0.1/upload?session='+d+'&rename=false';var m=Edbox.Protocol+"://"+Edbox.GetHost("CS")+l;var n=new FormData();n.append("path",f);n.append("name",g);n.append("scope",1);n.append("file",h);return $.ajax({processData:false,contentType:false,url:m,async:true,type:"post",data:n,dataType:"json",success:j,error:k,xhr:function(){myXhr=$.ajaxSettings.xhr();if(myXhr.upload){myXhr.upload.addEventListener('progress',function(e){var a=e.loaded;var b=e.total;var c=Math.floor(100*a/b);if(i){i(c,a,b)}},false)}return myXhr}})}};if(o&&p&&!o[p]){o[p]=q}}(Edbox.Api,"CS"));(function(o,p){function MakeShareUrl(a){var b='http://'+Edbox.GetHost("Lobby")+"/?channel=Default#/Detail/"+a;return b}var q={SharePersonalApp:function(a,b,c,d,e,f,g,h,i,j,k){var l="/v0.2/api/agents/messages";var m='["'+Edbox.AccountId+'", "'+b+'"]';g=g.replace("\r"," ");var n="{\"filter\":[{\"name\": \"p2p\", \"args\": {\"p2p_uri\": ["+m+"]}}],\"body\":{\"content\":\"Content-Type:box/xml\\r\\n\\r\\n<box data-summary=\\\""+c+"\\\">"+"<div class=\\\"row\\\"> <div class=\\\"col-2\\\" data-href=\\\"http://com.nd.social.me/me_HomePage?uid=1223\\\">  <img src=\\\""+e+"\\\" class=\\\"img-square\\\" mime=\\\"jpeg\\\" width=\\\"240px\\\" height=\\\"320px\\\" size=\\\"1201024\\\" alt=\\\""+d+"\\\"/> </div> <div class=\\\"col-4\\\"> <span>"+f+"</span>"+"<br/>"+"<span>"+g+"</span>     </div>   </div>   <hr/>   <div class=\\\"row\\\">     <div class=\\\"col-1\\\"></div>     <div class=\\\"col-2\\\">       <button class=\\\"btn-default\\\" data-href=\\\""+i+"\\\">"+h+"</button>     </div>    <div class=\\\"col-1\\\"></div>  <div class=\\\"col-2\\\"></div>  </div> </box>\", \"flag\": 0, \"hide_sender\": 0 }, 	\"sender\": 123456, \"send_msg_sync\": 0 }";Edbox.Request.PostWithHeader(Edbox.GetHost("IMMsg"),l,n,null,j,k,"https")},GetIMFriendList:function(a,b,c,d){var e="/v0.1/friends?"+"$offset="+a+"&$limit="+b;var f=Edbox.Protocol.toLowerCase()==='https'?Edbox.GetHost("IM_HTTPS"):Edbox.GetHost("IM");Edbox.Request.Get(f,e,null,c,d)}};if(o&&p&&!o[p]){o[p]=q}}(Edbox.Api,"IM"));(function(g,h){var j='https';var k={Get:function(a,b,c){var d='/v0.6/assets/'+a;var e="include=TI";return Edbox.Request.GetWithoutHeader(Edbox.GetHost("NDR"),d,e,b,c,j)},GetList:function(a,b,c){var d='/v0.6/assets/list';var e="include=TI";for(var i=0;i<a.length;i++){var f=a[i];if(f){e+="&rid="+f}}return Edbox.Request.GetWithoutHeader(Edbox.GetHost("NDR"),d,e,b,c,j)},GetSession:function(a,b,c){var d="/v0.6/assets/none/uploadurl";var e="uid="+a+"&renew=false&coverage=App/cf7ce674-9dde-4bb3-8f54-1f1ab4f2bcf0/OWNER";return Edbox.Request.GetWithProtocol(Edbox.GetHost("NDR"),d,e,b,c,j)},GetSessionSelfCoverage:function(a,b,c,d){var e="/v0.6/assets/"+b+"/uploadurl";var f="uid="+a+"&renew=false&coverage=User/"+a;return Edbox.Request.GetWithProtocol(Edbox.GetHost("NDR"),e,f,c,d,j)},GetUpdateSession:function(a,b,c,d){var e="/v0.6/assets/"+b+"/uploadurl";var f="uid="+a+"&renew=true&coverage=Org/nd/";return Edbox.Request.GetWithProtocol(Edbox.GetHost("NDR"),e,f,c,d,j)},GetUpdateSession:function(a,b,c,d){var e="/v0.6/assets/"+b+"/uploadurl";var f="uid="+a+"&renew=true&coverage=Org/nd/";return Edbox.Request.GetWithProtocol(Edbox.GetHost("NDR"),e,f,c,d,j)},Post:function(a,b,c,d){var e='/v0.6/assets/'+a;return Edbox.Request.Post(Edbox.GetHost("NDR"),e,JSON.stringify(b),c,d,j)},Update:function(a,b,c,d){var e='/v0.6/assets/'+a;return Edbox.Request.Put(Edbox.GetHost("NDR"),e,JSON.stringify(b),c,d,j)}};if(g&&h&&!g[h]){g[h]=k}}(Edbox.Api,"NDR"));(function(j,k){function Get(a,b,c,d){Edbox.Request.GetWithLanguage(Edbox.GetHost(k),a,b,c,d)}var l={GetSortTree:function(a,b,c,d){var e="/v1.0/front_end_categories/children";var f="tag_dimension_id="+a+"&parent_tag_id="+b;Get(e,f,c,d)},GetResources:function(a,b,c,d,e,f,g){var h="/v1.0/front_end_categories/resources";var i="tag_dimension_id="+a+"&tag_id="+b+"&words="+encodeURIComponent(c)+"&page="+d+"&size="+e;Get(h,i,f,g)}};if(j&&k&&!j[k]){j[k]=l}}(Edbox.Api,"FrontendLib"));(function(l,m){function Get(a,b,c,d){Edbox.Request.GetWithLanguage(Edbox.GetHost(m),a,b,c,d)}function Post(a,b,c,d){Edbox.Request.Post(Edbox.GetHost(m),a,JSON.stringify(b),c,d)}var n={GetSortTree:function(a,b,c,d){var e="/v1.0/front_end_categories/children";var f="tag_dimension_id="+a+"&parent_tag_id="+b;Get(e,f,c,d)},GetResources:function(a,b,c,d,e,f,g){var h="/v1.0/front_end_categories/resources";var i="tag_dimension_id="+a+"&tag_id="+b+"&words="+encodeURIComponent(c)+"&page="+d+"&size="+e;Get(h,i,f,g)},GetGroupResouces:function(a,b,c,d,e,f,g,h,i){var j=new Object();j.pro_alias=a;j.ndr_guid=b;j.dimension_guid=c;j.type=d;j.keyword=e;j.page=f;j.size=g;var k='/service/v1.0/relation/group/selectable_resource';Post(k,j,h,i)},UploadGroupResource:function(a,b,c,d,e,f){var g=new Object();g.pro_alias=a;g.ndr_guid=b;g.dimension_guid=c;g.self_ndr_guid=d;var h='/service/v1.0/relation/group/add_selectable_resource';Post(h,g,e,f)},BindGroupResources:function(a,b,c,d,e,f){var g=new Object();g.pro_alias=a;g.ndr_guid=b;g.dimension_guid=c;g.select_ndr_guid=d;var h='/service/v1.0/relation/group/select_resource';Post(h,g,e,f)}};if(l&&m&&!l[m]){l[m]=n}}(Edbox.Api,"NewFrontendLib"));(function(m,n){function TransferLanguage(a){if(a){if(a==="English"){return"en"}else if(a==="SimplifiedChinese"){return"zh-CN"}else if(a==="TraditionalChinese"){return"zh-HK"}else if(a==="TraditionalChinese_TW"){return"zh-TW"}else if(a==="Arabic_EG"){return"ar-EG"}}return"zh-CN"}function FeedBackGet(a,b,c,d){var e=new Object();e["vorg"]="edbox";e["accept-language"]=TransferLanguage(Edbox.Language);Edbox.Request.GetWithHeader(Edbox.GetHost("FeedBack"),a,b,e,c,d,"https")}function FeedBackPost(a,b,c,d){var e=new Object();e["vorg"]="edbox";e["accept-language"]=TransferLanguage(Edbox.Language);Edbox.Request.PostWithHeader(Edbox.GetHost("FeedBack"),a,b,e,c,d,"https")}function FeedBackPatch(a,b,c,d){var e=new Object();e["vorg"]="edbox";e["accept-language"]=TransferLanguage(Edbox.Language);Edbox.Request.PatchWithHeader(Edbox.GetHost("FeedBack"),a,b,e,c,d,"https")}var o={GetModelData:function(a,b,c){var d=a;var e="filter="+"app_name eq "+d+" and disable eq false";e=encodeURI(e);FeedBackGet("/v0.1/c/models",e,b,c)},PostFeedBack:function(b,c,d,e,f,g,h,i,j){var k=new Object();k.model_id=b;k.nick_name=Edbox.UserName;k.contact=c;k.content=e;k.feedback_type=d;k.model_field=new Object();k.model_field.scene=f;k.model_field.subscript=g;k.model_field.screenshot=h;var l=JSON.stringify(k);FeedBackPost("/v0.1/c/feedbacks",l,function(a){Edbox.DataStatistic.FeedBack();if(i)i(a)},j)},GetFeedBacks:function(a,b,c){var d=(a-1)*15;var e="offset="+d+"&limit=15&count=true";FeedBackGet("/v0.1/c/feedbacks",e,b,c)},GetUnReplyFeedBacks:function(a,b,c){var d=(a-1)*15;var e="offset="+d+"&limit=1&count=true"+"&filter=reply_status eq 1";e=encodeURI(e);FeedBackGet("/v0.1/c/feedbacks",e,b,c)},RefreshFeedBackState:function(a,b,c){var d="/v0.1/c/feedbacks/"+a+"/reply_status/actions/read";FeedBackPatch(d,null,b,c)},GetFeedBackReply:function(a,b,c,d){var e="/v0.1/c/feedbacks/"+a+"/replies";var f=(b-1)*15;var g="feedback_id="+a+"&offset="+f+"&limit=15&count=true";FeedBackGet(e,g,c,d)},PostFeedBackReply:function(a,b,c,d){var e="/v0.1/c/feedbacks/"+a+"/replies";var f=new Object();f.content=b;var g=JSON.stringify(f);FeedBackPost(e,g,c,d)}};if(m&&n&&!m[n]){m[n]=o}}(Edbox.Api,"FeedBack"));(function(l,m){var n={AddDraft:function(a,b,c,d,e,f,g,h,i){var j='/v1.0/api/product/personal/actions/add_draft';var k={user_id:g,baseid:a,resid:b,app_id:h,name:i,extInfo:d,version:c};Edbox.Request.Post(Edbox.GetHost('MMO'),j,JSON.stringify(k),e,f)},GetDraftList:function(a,b,c,d,e,f,g,h){var i='/v1.0/api/product/personal/actions/get_draft_list';var j={user_id:g,page:e,size:f,baseid:a,app_id:h,version:b};Edbox.Request.Post(Edbox.GetHost('MMO'),i,JSON.stringify(j),c,d)},DeleteDrafts:function(a,b,c,d){var e='/v1.0/api/product/personal/actions/delete_drafts';var f={user_id:a,records:b};Edbox.Request.Post(Edbox.GetHost('MMO'),e,JSON.stringify(f),c,d)}};if(l&&m&&!l[m]){l[m]=n}}(Edbox.Api,"DraftBox"));(function(g,h){var i={LoadTaskInfos:function(a,b,c){var d="/v0.1/api/task/role_task/actions/load_task";var e=new Object();e.owner_id=a;Edbox.Request.Post(Edbox.GetHost('MMO'),d,JSON.stringify(e),b,c)},StartTask:function(a,b,c,d){var e="/v0.1/api/task/role_task/actions/start_task";var f=new Object();f.owner_id=a;f.task_id=b;Edbox.Request.Post(Edbox.GetHost('MMO'),e,JSON.stringify(f),c,d)},StartTaskNode:function(a,b,c,d){var e="/v0.1/api/task/role_task/actions/start_task_node";var f=new Object();f.owner_id=a;f.task_inst_id=b;Edbox.Request.Post(Edbox.GetHost('MMO'),e,JSON.stringify(f),c,d)},ProcessTask:function(a,b,c,d){var e="/v0.1/api/task/role_task/actions/process_task";var f=new Object();f.owner_id=a;f.task_inst_id=b;Edbox.Request.Post(Edbox.GetHost('MMO'),e,JSON.stringify(f),c,d)},FinishTask:function(a,b,c,d){var e="/v0.1/api/task/role_task/actions/finish_task";var f=new Object();f.owner_id=a;f.task_inst_id=b;Edbox.Request.Post(Edbox.GetHost('MMO'),e,JSON.stringify(f),c,d)},SetTaskSchedule:function(a,b,c,d){var e="/v0.1/api/task/role_task/actions/set_task_schedule";var f=new Object();f.task_inst_id=a;f.schedule=b;Edbox.Request.Post(Edbox.GetHost('MMO'),e,JSON.stringify(f),c,d)},GetTaskSchedule:function(a,b,c){var d="/v0.1/api/task/role_task/actions/get_task_schedule";var e=new Object();e.task_inst_id=a;Edbox.Request.Post(Edbox.GetHost('MMO'),d,JSON.stringify(e),b,c)},GetTaskFinishCountList:function(a,b,c,d){var e="/v0.1/api/task/role_task/actions/get_task_finish_count_list";var f=new Object();f.count_type=a;f.task_id=b;Edbox.Request.Post(Edbox.GetHost('MMO'),e,JSON.stringify(f),c,d)},GetTaskListByStatus:function(a,b,c,d){var e="/v0.1/api/task/role_task/actions/get_task_list_by_status";var f=new Object();f.owner_id=a;f.status=b;Edbox.Request.Post(Edbox.GetHost('MMO'),e,JSON.stringify(f),c,d)}};if(g&&h&&!g[h]){g[h]=i}}(Edbox.Api,"Task"));(function(l,m){var n="192.168.212.78:80";function PrivateGet(a,b,c,d){var e=new Object();e["language"]=Edbox.GetLanguageCode();Edbox.Request.GetWithHeader(Edbox.GetHost("MMO"),a,b,e,c,d,Edbox.Protocol)}function PrivatePost(a,b,c,d){var e=new Object();e["language"]=Edbox.GetLanguageCode();Edbox.Request.PostWithHeader(Edbox.GetHost("MMO"),a,b,e,c,d,Edbox.Protocol)}var o={GetPrivateAssetInfo:function(a,b,c){var d="res_id="+a;d=encodeURI(d);PrivateGet("/v1.0/api/userStore/resource/actions/get_info",d,b,c)},GetUploadAssetsInfo:function(a,b,c,d,e,f,g,h){var i="category="+a+"&tags="+b+"&word="+c+"&page="+d+"&size="+e+"&upload_status="+f;i=encodeURI(i);PrivateGet("/v1.0/api/userStore/resource/actions/get_list",i,g,h)},GetCollectAssetsInfo:function(a,b,c,d,e,f,g){var h="category="+a+"&tech_key="+b+"&page="+c+"&size="+d+"&word="+e;h=encodeURI(h);PrivateGet("/v1.0/api/userStore/favorite/actions/get_list",h,f,g)},IsNameDup:function(a,b,c,d){var e="/v1.0/api/userStore/resource/actions/is_name_dup";var f=new Object();f.category=a;f.title=b;var g=JSON.stringify(f);PrivatePost(e,g,c,d)},CreateAssetsInfo:function(a,b,c,d,e,f,g,h){var i="/v1.0/api/userStore/resource/actions/create";var j=new Object();j.ndr_id=a;j.category=b;j.title=c;j.description=d;j.custom_properties=e;j.size=f;var k=JSON.stringify(j);PrivatePost(i,k,g,h)},UpdatePrivateAssetInfo:function(a,b,c,d,e,f){var g="/v1.0/api/userStore/resource/actions/update";var h=new Object();h.res_id=a;h.title=b;h.description=c;h.custom_properties=d;var i=JSON.stringify(h);PrivatePost(g,i,e,f)},UpdateAssetsInfo:function(a,b,c,d,e,f,g,h){var i="/v1.0/api/userStore/resource/actions/upload_success";var j=new Object();j.res_id=a;j.tech_key=b;j.md5=c;j.size=d;j.location=e;j.extension=f;var k=JSON.stringify(j);PrivatePost(i,k,g,h)},DeleteAssetsInfo:function(a,b,c){var d="/v1.0/api/userStore/resource/actions/remove";var e=new Object();e.res_ids=a;var f=JSON.stringify(e);PrivatePost(d,f,b,c)},AddTag:function(a,b,c,d,e){var f="/v1.0/api/userStore/tag/actions/create";var g=new Object();g.name=a;g.category=b;g.type=c;var h=JSON.stringify(g);PrivatePost(f,h,d,e)},DeleteTag:function(a,b,c){var d="/v1.0/api/userStore/tag/actions/remove";var e=new Object();e.tag_id=a;var f=JSON.stringify(e);PrivatePost(d,f,b,c)},UpdateTag:function(a,b,c,d){var e="/v1.0/api/userStore/tag/actions/update";var f=new Object();f.name=b;f.tag_id=a;var g=JSON.stringify(f);PrivatePost(e,g,c,d)},GetTags:function(a,b,c){var d="category="+a;PrivateGet("/v1.0/api/userStore/tag/actions/get_list",d,b,c)},AddAssetTags:function(a,b,c,d){var e="/v1.0/api/userStore/resource/actions/link_tag";var f=new Object();f.res_ids=a;f.tag_ids=b;var g=JSON.stringify(f);PrivatePost(e,g,c,d)},DeleteAssetTags:function(a,b,c,d){var e="/v1.0/api/userStore/resource/actions/unlink_tag";var f=new Object();f.res_ids=a;f.tag_ids=b;var g=JSON.stringify(f);PrivatePost(e,g,c,d)},CollectAsset:function(a,b,c,d){var e="/v1.0/api/userStore/favorite/actions/collect";var f=new Object();f.ndr_id=b;f.category=a;var g=JSON.stringify(f);PrivatePost(e,g,c,d)},CancelCollectAsset:function(a,b,c){var d="/v1.0/api/userStore/favorite/actions/cancel_collect";var e=new Object();e.ndr_ids=a;var f=JSON.stringify(e);PrivatePost(d,f,b,c)},CheckCollectState:function(a,b,c){var d="/v1.0/api/userStore/favorite/actions/verify";var e=new Object();e.ndr_ids=a;var f=JSON.stringify(e);PrivatePost(d,f,b,c)},GetMyCloudInfo:function(a,b,c){var d="category="+a;PrivateGet("/v1.0/api/userStore/catalog/actions/get_space",d,b,c)}};if(l&&m&&!l[m]){l[m]=o}}(Edbox.Api,"PrivateAsset"));(function(j,k){var l={AddScreenshots:function(a,b,c,d,e){var f="/v1.0/api/product/personal/actions/add_screenshots";var g={records:a,app_id:d,user_id:e};Edbox.Request.Post(Edbox.GetHost('MMO'),f,JSON.stringify(g),b,c)},GetList:function(a,b,c,d,e,f,g){var h="/v1.0/api/product/personal/actions/get_screenshot_list";var i={burying_point:a,page:b,size:c,app_id:f,user_id:g};Edbox.Request.Post(Edbox.GetHost('MMO'),h,JSON.stringify(i),d,e)},DeleteScreenShots:function(a,b,c,d,e){var f="/v1.0/api/product/personal/actions/delete_screenshots";var g={records:b,app_id:a,user_id:e};Edbox.Request.Post(Edbox.GetHost('MMO'),f,JSON.stringify(g),c,d)}};if(j&&k&&!j[k]){j[k]=l}}(Edbox.Api,"ScreenShot"));(function(g,h){var i={SaveConfig:function(a,b,c){var d="/v0.1/api/rank/rank/actions/save_config";Edbox.Request.Post(Edbox.GetHost('MMO'),d,JSON.stringify(a),b,c)},ReleaseConfig:function(a,b,c,d){var e="/v0.1/api/rank/rank/actions/release_config";var f=new Object();f.app_id=a;f.version=b;Edbox.Request.Post(Edbox.GetHost('MMO'),e,JSON.stringify(f),c,d)},GetConfigList:function(a,b,c,d){var e="/v0.1/api/rank/rank/actions/get_config_list";var f="app_id="+a+"&access_type="+b;Edbox.Request.Get(Edbox.GetHost('MMO'),e,f,c,d)},DeleteConfig:function(a,b,c){var d="/v0.1/api/rank/rank/actions/delete_config";var e=new Object();e.id=a;Edbox.Request.Post(Edbox.GetHost('MMO'),d,JSON.stringify(e),b,c)},SaveScore:function(a,b,c){var d="/v0.1/api/rank/rank/actions/save_score";Edbox.Request.Post(Edbox.GetHost('MMO'),d,JSON.stringify(a),b,c)},GetList:function(a,b,c){var d="/v0.1/api/rank/rank/actions/get_list";var e="id="+a.id;if(a.page){e+="&page="+a.page}if(a.size){e+="&size="+a.size}if(a.history_long){e+="&history_long="+a.history_long}Edbox.Request.Get(Edbox.GetHost('MMO'),d,e,b,c)}};if(g&&h&&!g[h]){g[h]=i}}(Edbox.Api,"Ranking"));(function(h,i){var j=Edbox.ComponentRootPath+"ThirdParty/md5/md5.min.js?v="+new Date().getTime();var k="cht99com";function SensitiveListGet(b,c,d){var e=Edbox.GetHost("Sensitive");var f="/chat";Require([j],function(){var a=b.id+(b.aid||"")+(b.sid||"")+(b.pt||"")+b.ct+b.ts+(b.la||"")+b.sig;a=md5(a);datas="action="+b.action+"&id="+b.id+"&ct="+b.ct+"&ts="+b.ts+"&sig="+a;Edbox.Request.GetWithTextType("Get","",e,f,datas,"",c,d)})}function SensitiveListGetCDN(a,b){var c="/des/common";Edbox.Request.GetWithTextType("Get","",Edbox.GetHost("SensitiveCDN"),c,"","",a,b)}var l={GetSensitiveList:function(d,e,f){if(!d)return;var g=function(a){var b=a.split('\n');var c=b.shift();if(e)e({id:parseInt(c),sensitiveList:b})};SensitiveListGet(d,g,f)},GetSensitiveListCDN:function(e,f){SensitiveListGetCDN(function(a){var b=Edbox.DecryptDesCBC(a,k).split('\n');var c=b.shift();var d=b;if(e)e({id:parseInt(c),sensitiveList:d})},f)}};if(h&&i&&!h[i]){h[i]=l}}(Edbox.Api,"Sensitive"));(function(h,i){var j={GetTryPlayingInfo:function(b,c,d,e,f,g){Edbox.Api.MMO.GetTryPlayingInfo(b,c,d,e,function(a){if(Edbox.Platform.IsPC){a.web_resid=a.web_pc_resid?a.web_pc_resid:a.web_resid}else{a.web_resid=a.web_resid?a.web_resid:a.web_pc_resid}if(f)f(a)},g)}};if(h&&i&&!h[i]){h[i]=j}}(Edbox.Action,"MMO"));(function(k,l){var m={QA:0,Dev:0,Feature:0,CN:0,BetaCN:0,HK:0,US:18};function GetArrayString(a){if(Array.isArray(a)){var b="";for(var i=0;i<a.length;i++){if(i!==0){b+=","}b+=a[i]}return b}else{return a}}function IsEmailValid(a){var b=new RegExp("^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$");return b.test(a)}var n=Edbox.Api.MMO;var o={CreateUserInfo:function(b,c){n.CreateUser(function(a){if(b)b(a)},function(e){if(c)c(e)})},GetUserInfo:function(b,c){n.GetUser(function(a){if(b)b(a)},function(e){if(c)c(e)})},UpdateUserInfo:function(b,c,d){var f={"birthday":"","sex":0,"head":"","nick_name":""};if(b.nick_name!==''&&!(typeof b.nick_name==="undefined")){f.nick_name=b.nick_name}if(b.sex!==''&&!(typeof b.sex==="undefined")){f.sex=b.sex}if(b.head!==''&&!(typeof b.head==="undefined")){f.head=b.head}if(b.birthday!==''&&!(typeof b.birthday==="undefined")){f.birthday=b.birthday.substring(0,4)+b.birthday.substring(5,7)+b.birthday.substring(8,10)}f=JSON.stringify(f);n.UpdateUserInfo(f,function(a){if(c)c(a)},function(a){if(d)d(e)})},AddEmail:function(b){b=b.replace(" ","");if(b!==''&&typeof b!=="undefined"&&this.IsEmailValid(b)){n.AddEmailVerify(b,function(a){console.log("send email successfully")},function(a){console.log("fail:"+a)})}else console.log("邮箱不合法!")},ResendEmail:function(){n.ResendEmail(function(a){console.log("resend email successfully")},function(a){console.log("fail:"+a)})},UpdateEmail:function(b){b=b.replace(" ","");if(b!==''&&typeof b!=="undefined"&&this.IsEmailValid(b)){n.UpdateEmailVerify(b,function(a){console.log("send email successfully")},function(a){console.log("fail:"+a)})}},UploadUserAvatar:function(g,h,i){var j="/v0.1/csession/avatar";function uploadToCS(a,b,c){var d='/v0.1/upload?session='+b;var e=Edbox.Protocol+"://"+Edbox.GetHost("CS")+d;var f=new FormData();f.append("filePath",a);f.append("scope",1);f.append("file",g);$.ajax({processData:false,contentType:false,url:e,async:true,type:"post",data:f,dataType:"json",success:c})}Edbox.Request.GetWithProtocol(Edbox.GetHost("CommonCS"),j,"",function(a){var b=a.path+"/"+Edbox.AccountId+".jpg";uploadToCS(b,a.session,function(){if(h)h(b)})},i,Edbox.Protocol)}};if(k&&l&&!k[l]){k[l]=o}}(Edbox.Action,"User"));(function(q,r){var s=Edbox.Api.UC;var t;const edbox_org_id=[481038521185,484200389615];var u={GetAvatar:function(c,d,f,g){var h=Edbox.Api.CS.GetAvatar(c,d);var i=new Image();i.crossOrigin="";i.src=h;i.onload=function(e){var a=document.createElement("canvas");a.width=i.width;a.height=i.height;var b=a.getContext('2d');b.drawImage(i,0,0,i.width,i.height);b.getImageData(0,0,i.width,i.height);if(f)f(a.toDataURL())};i.onerror=function(e){if(f)f("data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMvaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzA2NyA3OS4xNTc3NDcsIDIwMTUvMDMvMzAtMjM6NDA6NDIgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4QzczMTA4MEZDNEMxMUU5QUI2RkUzQzg4NDExNTA0QyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4QzczMTA4MUZDNEMxMUU5QUI2RkUzQzg4NDExNTA0QyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjhDNzMxMDdFRkM0QzExRTlBQjZGRTNDODg0MTE1MDRDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjhDNzMxMDdGRkM0QzExRTlBQjZGRTNDODg0MTE1MDRDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQABgQEBAUEBgUFBgkGBQYJCwgGBggLDAoKCwoKDBAMDAwMDAwQDA4PEA8ODBMTFBQTExwbGxscHx8fHx8fHx8fHwEHBwcNDA0YEBAYGhURFRofHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8f/8AAEQgAQABAAwERAAIRAQMRAf/EAGcAAAIDAQEBAAAAAAAAAAAAAAAEAgMFAQYIAQEAAAAAAAAAAAAAAAAAAAAAEAACAQIEBQMFAQAAAAAAAAABAgMABBEhMUFRcRIiBZEyUmGBwdFiExEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A+qaCi7vYLZMZD3H2oNTQY1x5i7lJCH/JOC6+tAm8sjZu5bmSaASWRc0cryJFA5b+Yu4iA5/1TcNr60GzaXsF0uMZ7h7kOooL6Ci9u0toDIc20ReJoPNzTSTSGSQ9TNqaAhiaWQIuW5PAUGhHbQRjAKCfk2ZoCS2gcYMgB+S5Ggz5omikKHPcHiKAilkhkEkZ6WXQ0HpLK7S6gEgyYZOvA0GN5i4Mt2UB7Iu0c96BGgc8cBhI2+Q/NA5QFAn5EDCNt8SPtrQJ0D3h7gxXYQnsl7Tz2oE5W65HY6sSfU0EaBrx74SOnyGI5igeoCgR8g+LonxGJ5mgVoJRsVkVhqpBH2NASKUkZTqpI9DQRoOqzIwZcmU4ig1IpBJGrgYY7cDQEsgjjZyMQu3E0GWzM7FmzZjiaDlBKNS0iqNWIA+5oHPMW5iuy4HZL3DnvQIgEkADEnQCgbisGOcrdP8AK6+tA2iKihVGCjQUA6K6FGGKnWgTlsGGcTdX8tkfWgVIKkqwIYag0D3h7cy3Ycjsi7jz2oNm9tEuoDGcm1RuBoMuC1NuMHGEp95/AoLaAoCgKCqe1NwvSoxlHsP4P0oNSytEtYBGM2ObtxNBfQQlhSUYNrsd6BOSzlXQdQ+n6oKSrDUEc6ACsdATyoLY7SVtR0j6/qgdihSIYLrud6CdB//Z");if(g)g()}},GetUserInfo:function(c,d){function getUser(a){var b=new Object();b.ID=a.user_id;b.Name=a.nick_name;b.Type=a.source_plat;b.OrgID=a.org_id||"";b.OrgName=a.org_name||"";b.RealName=a.real_name||"";if(c)c(b)}if(Edbox.UCAccountType.toUpperCase()==="PERSON"){s.GetPersonalInfo(Edbox.AccountId,function(a){getUser(a)},d)}else{s.GetUserInfo(Edbox.AccountId,function(a){getUser(a)},d)}},EbValidCheck:function(e,f){var g=Edbox.Request.GetValidData();s.ValidCheck(g.access_token,g.mac,g.nonce,g.http_method,g.request_uri,g.host,function(a){var b=new Object();b.UCAccountType=a.account_type;b.PersonalAccountId=a.account_id;b.AccountId=a.user_id;b.AccessToken=a.access_token;b.MacKey=a.mac_key;if(a.server_time){var c=a.server_time;var d=c.replace(/-/g,"/").replace(/T/g," ");d=d.substring(0,c.length-9)+d.substring(c.length-5,c.length);b.TimeStamp=new Date().getTime()-new Date(d).getTime();b.TimeStamp=Math.round(b.TimeStamp)}if(b.AccountId){b.Avatar=Edbox.Api.CS.GetAvatar(b.AccountId,160)}if(e)e(b)},f)},ValidCheck:function(e,f,g,h){var i=new RegExp("MAC id=\"([^\"]*)\",nonce=\"([^\"]*)\",mac=\"([^\"]*)\"");var j=f.match(i);if(!j){if(h){h("Auth Error")}return}var k=j[1];var l=j[3];var m=j[2];var n="Get";var o="/";var p=window.location.host;s.ValidCheck(k,l,m,n,o,p,function(a){var b=new Object();b.UCAccountType=a.account_type;b.PersonalAccountId=a.account_id;b.AccountId=a.user_id;b.AccessToken=a.access_token;b.MacKey=a.mac_key;if(a.server_time){var c=a.server_time;var d=c.replace(/-/g,"/").replace(/T/g," ");d=d.substring(0,c.length-9)+d.substring(c.length-5,c.length);b.TimeStamp=new Date().getTime()-new Date(d).getTime();b.TimeStamp=Math.round(b.TimeStamp)}if(b.AccountId){b.Avatar=Edbox.Api.CS.GetAvatar(b.AccountId,160)}if(g)g(b)},h)},GetSession:function(f,g,h){if(!t||t.expirationTime<new Date().getTime()){var i=function(a){var b=new Date().getTime();t=a;t.createTime=b;t.expirationTime=b+18*60*1000;if(g)g(t)};Edbox.GetDeviceID(function(a){var b=Edbox.Encode(getMD5Value(a));var c=b[2];var d="w";if(Edbox.Platform.IsAndroid){d="a"}if(Edbox.Platform.IsIOS){d="i"}var e={device_id:c+d+a};s.CreateSession(e,i,h)})}else{if(g)g(t)}},JoinEdbox:function(c,d,e){u.GetSession("",function(a){var b={session_id:a.session_id,account_id:c,org_id:edbox_org_id[Edbox.AppKey==="CN"?0:1]};s.JoinEdbox(b,d,e)},e)},GetPersonOrgInfo:function(a,b,c){s.GetPersonOrgInfo(a,b,c)},Exchange:function(h,i,j,k){u.GetSession("",function(e){var f="v1.1/tokens/"+h+"/actions/exchange";var g={"session_id":e.session_id,"user_id":i,"exchange_type":1};s.Exchange(g,function(a){var b=new Object();b.UCAccountType=a.account_type;b.PersonalAccountId=a.account_id;b.AccountId=a.user_id;b.AccessToken=a.access_token;b.MacKey=a.mac_key;if(a.server_time){var c=a.server_time;var d=c.replace(/-/g,"/").replace(/T/g," ");d=d.substring(0,c.length-9)+d.substring(c.length-5,c.length);b.TimeStamp=new Date().getTime()-new Date(d).getTime();b.TimeStamp=Math.round(b.TimeStamp)}if(b.AccountId){b.Avatar=Edbox.Api.CS.GetAvatar(b.AccountId,160)}if(j)j(b)},k)})}};if(q&&r&&!q[r]){q[r]=u}}(Edbox.Action,"UC"));(function(l,m){var n=Edbox.Api.FeedBack;var o=new Object();var p=new Object();var q={UploadImageToCS:function(h,i,j,k){Edbox.NDR.GetFileData(h,function(g){Edbox.Action.FeedBack.NameCheck(g,function(){var f=Edbox.EbUserId;Edbox.Api.NDR.GetSession(f,function(d){function ReturnCsData(a){var b=new Object();if(a){b.dentry_id=a.dentry_id;b.url=Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static"+a.path;i(b)}else{var c=new Object();c.error="error";j(c)}}var e=Edbox.NDR.Base64ToBlob(g.Data);Edbox.Api.CS.UpLoadToCS(d.session_id,d.dist_path,g.Name,e,k,ReturnCsData,j)},j)},j)})},NameCheck:function(a,b,c){if(!a.Name){if(c)c("Illegal File Name");return}var d=new Array("&"," ","#",":","?","!","/","\\");for(var i=0;i<d.length;i++){var e=d[i];if(a.Name.indexOf(e)>=0){if(c)c("Illegal File Name");return}}if(b)b(a)},GetCSImageUrl:function(a){var b=new Object();b.dentry_id=a;b.url=Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/download?dentryId="+a;return b},GetModelData:function(g,h,i){var j=function(a){if(!a.hasOwnProperty('items')){var b=new Object();b.error="NOModel";i(b)}else{if(a.items[0]){var c=new Object();c.feedback_type=a.items[0].feedback_type;c.model_id=a.items[0].id;for(var d=0;d<a.items[0].items.length;d++){var e=a.items[0].items[d];if(e.symbol==="scene"){c.scene=e.checks;c.scenetype=e.type;break}}c.isinit=true;if(g==="Edbox_Lobby"){Edbox.Action.FeedBack._lobbyModel=c}else{Edbox.Action.FeedBack._editorModel=c}h(c)}else{var f=new Object();f.error="NOModel";i(f)}}};n.GetModelData(g,j,i)},PostFeedBack:function(a,b,c,d,e,f,g,h,i){var j="";if(a==="Edbox_Lobby"){j=Edbox.Action.FeedBack._lobbyModel.model_id}else{j=Edbox.Action.FeedBack._editorModel.model_id}n.PostFeedBack(j,b,c,d,e,f,g,h,i)},GetFeedBacks:function(e,f,g){var h=function(c){var d=new Object();d.count=c.count;d.items=[];c.items.forEach(function(a){var b=new Object();b.id=a.id;b.model_id=a.model_id;b.scene=a.model_field.scene;b.feedback_type=a.feedback_type;b.content=a.model_field.subscript;b.status=a.status;b.reply_status=a.reply_status;b.date_created=a.date_created;b.last_reply_time=a.last_reply_time;b.screenshot=a.model_field.screenshot;d.items.push(b)});f(d)};n.GetFeedBacks(e,h,g)},GetUnReplyFeedBacks:function(c,d){var e=function(a){var b=true;if(a.count>0){b=false}c(b)};n.GetUnReplyFeedBacks(1,e,d)},RefreshFeedBackState:function(a,b,c){n.RefreshFeedBackState(a,b,c)},GetFeedBackReply:function(e,f,g,h){var i=function(c){var d=new Object();d.count=c.count;d.replys=[];c.items.forEach(function(a){var b=new Object();b.id=a.id;b.feedback_id=a.feedback_id;b.content=a.content;b.reply_time=a.reply_time;b.reply_uid=a.reply_uid;b.type=a.type;d.replys.push(b)});g(d)};n.GetFeedBackReply(e,f,i,h)},PostFeedBackReply:function(a,b,c,d){n.PostFeedBackReply(a,b,c,d)}};if(l&&m&&!l[m]){l[m]=q}}(Edbox.Action,"FeedBack"));(function(e,f){var g=Edbox.Api.Task;var h={GetAllTasksFinishCount:function(a,b){g.GetTaskFinishCountList(1,"",a,b)},GetTaskFinishCount:function(a,b,c){g.GetTaskFinishCountList(2,a,b,c)},GetTaskNodeFinishCount:function(a,b,c){g.GetTaskFinishCountList(0,a,b,c)},LoadTaskInfos:function(a,b){g.LoadTaskInfos(Edbox.EbUserId,a,b)},StartTask:function(a,b,c){g.StartTask(Edbox.EbUserId,a,b,c)},StartTaskNode:function(a,b,c){g.StartTaskNode(Edbox.EbUserId,a,b,c)},ProcessTask:function(a,b,c){g.ProcessTask(Edbox.EbUserId,a,b,c)},FinishTask:function(a,b,c){g.FinishTask(Edbox.EbUserId,a,b,c)},SetTaskSchedule:function(a,b,c,d){g.SetTaskSchedule(a,b,c,d)},GetTaskSchedule:function(a,b,c){g.GetTaskSchedule(a,b,c)},GetTaskListUndone:function(a,b){g.GetTaskListByStatus(Edbox.EbUserId,0,a,b)},GetTaskListDone:function(a,b){g.GetTaskListByStatus(Edbox.EbUserId,1,a,b)}};if(e&&f&&!e[f]){e[f]=h}}(Edbox.Action,"Task"));(function(j,k){var l=Edbox.Api.Ranking;var m={CreateRanking:function(a,b,c,d){var e=new Object();e.app_id=a;for(var i in b){e[i]=b[i]}l.SaveConfig(e,c,d)},RefreshRanking:function(a,b,c,d,e){var f=new Object();f.app_id=a;f.id=b;for(var i in c){f[i]=c[i]}l.SaveConfig(f,d,e)},ReleaseConfig:function(a,b,c){l.ReleaseConfig(a,Edbox.Version,b,c)},GetEditConfigList:function(a,b){l.GetConfigList(Edbox.GameId,1,a,b)},GetReleaseConfigList:function(a,b){l.GetConfigList(Edbox.GameId,2,a,b)},DeleteConfig:function(a,b,c){l.DeleteConfig(a,b,c)},SaveScore:function(a,b,c,d,e,f){var g=new Object();g.app_id=a;g.ids=b;g.score=c;g.score_info=d;l.SaveScore(g,e,f)},GetList:function(a,b,c,d,e,f){var g="/v0.1/api/rank/rank/actions/get_list";var h=new Object();h.id=a;h.page=b;h.size=c;h.history_long=d;l.GetList(h,e,f)}};if(j&&k&&!j[k]){j[k]=m}}(Edbox.Action,"Ranking"));(function(r,u){function GetArrayString(a){if(Array.isArray(a)){var b="";for(var i=0;i<a.length;i++){if(i!==0){b+=","}b+=a[i]}return b}else{return a}}var v=Edbox.Api.MMO;var w={GetInfo:function(e,f,g,h){if(!e){if(g)g("Product ID Error");return}function GetTemplateInfo(b,c,d){w.GetTemplateInfo(b,"",function(a){a.access_type=1;Edbox.BaseAppId=a.app_id;if(h){Edbox.Access=1;Edbox.GameId=b;Edbox.Version=a.version}if(c)c(a)},d)}function GetProductInfo(b,c,d){w.GetProductInfo(b,function(a){a.access_type=2;Edbox.BaseAppId=a.baseid;if(h&&Edbox.Access===1){Edbox.Access=2}if(c)c(a)},d)}function GetAppInfo(b,c,d){w.GetAppInfo(b,function(a){a.access_type=3;if(h){Edbox.Access=3}if(c)c(a)},d)}if(Edbox.Access===1){GetTemplateInfo(e,f,function(){GetAppInfo(e,f,function(){GetProductInfo(e,f,g)})})}else if(Edbox.Access===2){GetProductInfo(e,function(a){if(a&&a.operation_type===1){h=true;GetTemplateInfo(a.baseid,f,g)}else{if(f)f(a)}},function(){GetTemplateInfo(e,f,g)})}else{GetAppInfo(e,f,function(){GetTemplateInfo(e,f,function(){GetProductInfo(e,f,g)})})}},GetTemplateInfo:function(a,b,c,d){v.GetBaseAppInfo(a,b,c,d)},GetProductInfo:function(a,b,c){v.GetPersonalAppInfo(a,b,c)},GetAppInfo:function(a,b,c){v.GetAppInfo(a,b,c)},IsNameVerified:function(a,b,c){if(a.match(/^[ ]+$/)){console.log("GameName all space");if(c)c(Edbox.GetTip("ERROR_GAMENAME_SPACE"));return}if(a.match(/[\\\/:*?"<>|]/)){console.log("GameName illegal_character");if(c)c(Edbox.GetTip("ERROR_ILLEGAL_CHARACTER"));return}if(b)b()},IsNameDuplicate:function(b,c,d,e,f,g){w.IsNameVerified(d,function(){var a={'app_id':b,'release_mode':c-0,'app_name':d,'access_type':e-0};v.IsNameDuplicate(a,f,g)},function(a){if(g)g(a)})},IsSensitive:function(a,b,c){v.IsSensitive(a,b,c)},SaveProduct:function(b,c,d,e,f,g,h,i){function tempCallback(a){if(a.access_type===1){a.operation_type=0;w.CreateProduct(b,c,d,e,f,g,h,a,i)}else{w.UpdateProduct(b,c,d,e,f,g,h,a)}}w.GetInfo(b,tempCallback,h,true)},SaveTempProduct:function(f,g,i,j,k,l,n){function string10to62(a){var b='0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ'.split(''),radix=b.length,qutient=+a,arr=[];do{mod=qutient%radix;qutient=(qutient-mod)/radix;arr.unshift(b[mod])}while(qutient);return arr.join('')}function tempCallback(b){b.operation_type=1;var c=new Date();var d=c.getDate()-1;var h=c.getHours();var m=c.getMinutes();var s=c.getSeconds();var t=((d*24+h)*60+m)*60+s;var e=b.app_name+string10to62(t);w.CreateTempProduct(f,g,i,e,j,k,function(a){a.TempName=e;l(a)},n,b)}w.GetTemplateInfo(f,"",tempCallback,n)},CreateTempProduct:function(c,d,e,f,g,h,i,j,k){function create(a){var b={pkg_resid:e,app_name:f,icon:g,game_tags:GetArrayString(a.game_tags),edu_tags:GetArrayString(a.edu_tags),screenshot:GetArrayString(a.screenshot),introduction:h,version:"1.0",privacy:1,baseid:c,base_version:d,operation_type:a.operation_type};v.CreateProduct(b,i,j)}function createByInfodata(){if(!f||f.trim().length<1){f=k.app_name}if(!g||g.trim().length<1){g=k.icon}if(!h||h.trim().length<1){h=k.introduction}if(h.length>1000){alert(Edbox.GetTip("ERROR_LengthExceeds"));if(j)j(Edbox.GetTip("ERROR_LengthExceeds"));return}if(!e||e.trim().length<1){e=k.resid}w.IsNameDuplicate(c,1,f,2,function(a){if(a.is_duplicate===1){if(j)j(Edbox.GetTip("ERROR_NameDuplicate"));return}create(k)},j)}function tempCallback(a){var b=k.operation_type;k=a;k.operation_type=b;createByInfodata()}if(k&&k.access_type===1){createByInfodata();return}w.GetTemplateInfo(c,"",tempCallback,j)},CreateProduct:function(c,d,e,f,g,h,i,j,k){function create(a){if(!k||k===c){k=""}var b={pkg_resid:d,app_name:e,icon:f,game_tags:GetArrayString(a.game_tags),edu_tags:GetArrayString(a.edu_tags),screenshot:GetArrayString(a.screenshot),introduction:g,version:"1.0",privacy:1,baseid:c,base_version:j.version,operation_type:a.operation_type,app_id:k};v.CreateProduct(b,h,i)}function createByInfodata(){if(!e||e.trim().length<1){e=j.app_name}if(!f||f.trim().length<1){f=j.icon}if(!g||g.trim().length<1){g=j.introduction}if(g.length>1000){alert(Edbox.GetTip("ERROR_LengthExceeds"));if(i)i(Edbox.GetTip("ERROR_LengthExceeds"));return}if(!d||d.trim().length<1){d=j.resid}w.IsNameDuplicate(c,1,e,2,function(a){if(a.is_duplicate===1){if(i)i(Edbox.GetTip("ERROR_NameDuplicate"));return}create(j)},i)}function tempCallback(a){j=a;createByInfodata()}if(j&&j.access_type===1){createByInfodata();return}w.GetTemplateInfo(c,"",tempCallback,i)},UpdateProduct:function(f,g,h,i,j,k,l,m){function create(b){var c=1.0;try{c=(parseFloat(b.version)+0.01).toFixed(2)}catch(e){console.log("Version Error,Version = 1.0")}var d={app_id:f,pkg_resid:g,app_name:h,icon:i,game_tags:GetArrayString(b.game_tags),edu_tags:GetArrayString(b.edu_tags),screenshot:GetArrayString(b.screenshot),introduction:j,privacy:1,version:""};v.UpdateApp(d,function(a){a.version=c;if(k)k(a)},l)}function createByInfodata(){if(!h||h.trim().length<1){h=m.app_name}if(!i||i.trim().length<1){i=m.icon}if(!j||j.trim().length<1){j=m.introduction}if(j.length>1000){alert(Edbox.GetTip("ERROR_LengthExceeds"));if(l)l(Edbox.GetTip("ERROR_LengthExceeds"));return}if(!g||g.trim().length<1){g=m.resid}w.IsNameDuplicate(f,2,h,2,function(a){if(a.is_duplicate===1){if(l)l('product name is duplicate');return}create(m)},l)}function tempCallback(a){m=a;createByInfodata()}if(m&&m.access_type===2){createByInfodata();return}w.GetProductInfo(f,tempCallback,l)},CopyProduct:function(b,c,d,e,f){v.CopyPersonalApp(b,'',c,function(a){if(!a.productid||a.productid.length<1){if(f)f(a);return}if(e)e(a.productid)},function(a){if(a.responseJSON.code==="EDBOX_LOBBY/PRODUCT_NAME_DUPLICATE"){if(f)f("product name is duplicate")}else{if(f)f(a)}})},GetTrialPlayInfo:function(c,d,e,f){w.GetGameInfo(c,d,2,1,function(a){var b=a.web_resid;b=Edbox.FillUrl(b);a.web_resid=b;if(e)e(a)},f)},GetGameLink:function(c,d,e,f,g,h){w.GetGameInfo(c,d,e,f,function(a){var b=a.web_resid;b=Edbox.FillUrl(b);if(g)g(b)},h)},GetSrcUrlWithoutLogin:function(a,b,c,d){v.MMOGetWithoutLogin(a,b,c,d)},GetGameInfo:function(b,c,d,e,f,g){if(!c)c="";Edbox.Action.MMO.GetTryPlayingInfo(b,d,e,c,function(a){if(!a.pkg_resid){if(g)g("Request failed,Server Error");return}if(f)f(a)},g)},GetProductList:function(a,b,c,d,e){v.SearchExperienceApps(a,b,c,"","","",d,e)},ReleaseProduct:function(c,d,f,g,h,i,j,k,l,m,n,o,p){var q=null;function create(a){if(!d||d.trim().length===0){d=1.0;try{d=parseFloat(a.version)+0.01}catch(e){console.log("Version Error,Version = 1.0")}d=""+d}if(j===2&&!k){if(p){p("活动需要指定活动ID")}return}var b={app_id:c,resid:f,app_name:g,icon:h,game_tags:GetArrayString(a.game_tags),edu_tags:GetArrayString(a.edu_tags),screenshot:GetArrayString(a.screenshot),introduction:i,privacy:j,release_mode:1,releasetime_mode:1,version:d,update_content:m,area:"cn",is_exp_protocol:0};if(n&&n>new Date()){b.releasetime_mode=2;b.schedule_time=n.toISOString().replace(/T/g,' ').replace(/Z/g,'')}if(j===2){b.activity_id=k}if(l&&l.trim().length>0){b.screenshot=l}v.ReleaseApp(b,o,p)}function createByInfodata(){if(!g||g.trim().length<1){g=q.app_name}if(!h||h.trim().length<1){h=q.icon}if(!i||i.trim().length<1){i=q.introduction}if(i.length>1000){if(p)p('Introduction Length Exceeds 1000');return}if(!f||f.trim().length<1){f=q.resid}w.IsNameDuplicate(c,2,g,3,function(a){if(a.is_duplicate===1){if(p)p('product name is duplicate');return}create(q)},p)}function tempCallback(a){q=a;createByInfodata()}w.GetInfo(c,tempCallback,p,true)},HeartBeating:function(a,b){v.HeartBeating()},SetTag:function(a,b,c,d){if(!a){if(d)d("Product ID Error");return}if(!b){if(d)d("Tag Error");return}var e={app_id:a,tagname:b};v.SetTag(e,c,d)},GetTags:function(a,b,c){v.GetTags(a,b,c)},GetTagMap:function(a,b){v.GetTagMap(a,b)},GetStrLen:function(a,b,d){var e=0;for(var i=0;i<a.length;i++){var c=a.charCodeAt(i);if(c>=0x0001&&c<=0x007e||0xff60<=c&&c<=0xff9f){e++}else{e+=2}}if(b)b(e)},SubStrLen:function(a,b,c,d){var e=a.length;var f='';var g=0;for(var i=0;i<e;i++){var h=a.charAt(i);g++;if(encodeURI(h).length>4){g++}if(g>b){if(c)c(f);return}f=f.concat(h)}if(g<=b){if(c)c(a);return}},CutString:function(d,e,f,g,h){w.GetStrLen(f,function(b){var c=e-b;if(c<0){if(h)h(f+" Length is More then :"+d);return}w.SubStrLen(d,e,function(a){if(g)g(a+f)})})},GetTempAppId:function(a,b,c){v.GetTempAppId(a,b,c)},GetTemplateVipInfo:function(c,d,e,f){v.GetBaseAppInfo(c,d,function(a){var b={isVip:1};if(a&&a.is_vip){b.isVip=a.is_vip-0}if(Edbox.AppKey!=='HK'){b.isVip=2}if(e){e(b)}},f)}};if(r&&u&&!r[u]){r[u]=w}}(Edbox,"MMO"));(function(h,i){var j=function(f){var g=this;this.Width=f&&f.width||200;this.Height=f&&f.height||200;this.Mask=f&&f.mask;this.Quality=f&&f.quality||0.8;this.onHandle=false;this.Datas=null;this.getImageDatas=function(a){var b=document.createElement("canvas");b.width=g.Width;b.height=g.Height;var c=b.getContext('2d');c.drawImage(a,0,0,g.Width,g.Height);return c.getImageData(0,0,g.Width,g.Height)};this.sourceData=null;this.sourceImage=new Image();this.sourceImage.onload=function(){g.sourceData=g.getImageDatas(this)};this.SetSource=function(a,b){g.sourceData=null;if(b){g.sourceImage.crossOrigin=''}else{g.sourceImage.crossOrigin=null}g.sourceImage.src=a};this.maskData=null;this.maskImage=new Image();this.maskImage.onload=function(){g.maskData=g.getImageDatas(this)};this.SetMask=function(a,b){g.maskData=null;if(b===null||b===undefined){b=true}if(b){g.maskImage.crossOrigin=''}else{g.maskImage.crossOrigin=null}g.maskImage.src=a};if(this.Mask){this.SetMask(g.Mask)}this.handle=function(){var b=document.createElement("canvas");b.width=g.Width;b.height=g.Height;var c=b.getContext('2d');var d=g.sourceData;for(var e=0;e<g.sourceData.data.length;e+=4){d.data[e]=g.sourceData.data[e];d.data[e+1]=g.sourceData.data[e+1];d.data[e+2]=g.sourceData.data[e+2];var a=g.maskData.data[e+3];if(a>g.sourceData.data[e+3])a=g.sourceData.data[e+3];d.data[e+3]=a}c.putImageData(d,0,0);g.Datas=b.toDataURL('image/png',g.Quality)};this.Start=function(a,b,c,d){if(this.onHandle){if(c)c("上一图片还在处理中..")}if(d===null||d===undefined){d=true}g.onHandle=true;g.Datas=null;g.SetSource(a,d);var e=setInterval(function(){if(g.sourceData&&g.maskData){g.handle();if(b)b(g.Datas);g.onHandle=false;clearInterval(e)}},200)};return g};if(h&&i&&!h[i]){h[i]=j}}(Edbox,"MaskCutting"));(function(h,j){var k=function(a){var b=this;this.ID=a&&a.ID||"";this.Enable=a&&a.Enable||false;this.Window=a&&a.Window||null;return this};k.prototype.Send=function(a,b,c,d){var e=this;if(!a){if(d)d("Error:Empty Parameters");return}if(!e.Enable){if(d)d("Error:Connection interruption");return}var f=new Object();f.Type=a;f.datas=[];if(b){var g=JSON.stringify(b);b=JSON.parse(g);f.Datas=b}if(k.OnSend){k.OnSend(f,e)}e.Window.postMessage(f,"*");if(c)c()};k.prototype.Start=function(a,b){var c=this;c.Enable=true;if(!h.Array.Contain(k.MessageList,c)){c.Send("Connect")}h.Array.Add(k.MessageList,c);if(a)a()};k.prototype.Stop=function(a,b){var c=this;if(h.Array.Contain(k.MessageList,c)){c.Send("Disconnect")}c.Enable=false;h.Array.Remove(k.MessageList,c);if(a)a()};k.MessageList=new Array();k.ConnectCallback=null;k.DisonnectCallback=null;k.OnReceive=null;k.OnSend=null;k.Functions=new Dictionary();k.Get=function(a,b,c){var d=k.MessageList;for(var i=0;i<d.length;i++){if(d[i].Window===a){if(b)b(d[i]);return}}var e=new k();e.ID=h.GetGUID();e.Enable=true;e.Window=a;if(b)b(e)};k.Contain=function(a){var b=k.MessageList;for(var i=0;i<b.length;i++){if(b[i].Window===a)return true}return false};k.AddMessageHandler=function(a,b,c,d){if(!a||!b){if(d)d("Error:Empty Parameters");return}var e=k.Functions;e.Set(a,b);if(c)c()};k.Broadcast=function(a,b,c,d){var e=k.MessageList;if(!e){if(d)d("None connected message component");return}for(var i=0;i<e.length;i++){e[i].Send(a,b)}if(c)c()};var l=function(){k.AddMessageHandler("Connect",function(a,b){b.Start();if(k.ConnectCallback)k.ConnectCallback(b)});k.AddMessageHandler("Disconnect",function(a,b){b.Stop();if(k.DisonnectCallback)k.DisonnectCallback(b)});k.AddMessageHandler("Log",function(a,b){console.log(a)});function messageCallBack(e){var c=e.source;var d=e.data;k.Get(c,function(a){if(!a.Enable)return;if(d&&d.Type){if(k.OnReceive){k.OnReceive(d,a)}var b=k.Functions.Get(d.Type);if(!b)return;b(d.Datas,a)}})}window.addEventListener("message",messageCallBack,false)};l();if(h&&j&&!h[j]){h[j]=k}}(Edbox,"Message"));(function(f,g){var h=null;var j=null;var k=null;var l=null;var m=null;var n="";var o=null;var p=Edbox.ComponentRootPath+"ThirdParty/qrcode/qrcode.min.js";function Init(){h=document.createElement("div");j=new QRCode(h,{text:"",width:256,height:256,colorDark:"black",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.M});var a=h.childNodes;for(var i=0;i<a.length;i++){if(a[i].tagName==="IMG"){k=a[i];break}}l=document.createElement('canvas');l.width=300;l.height=300;l.style.backgroundColor="#fff";m=l.getContext('2d')}var q={Datas:null,Create:function(a,b,c){if(!a){if(c)c("请输入要生成的url地址!");return}if(a===n){if(b)b(q.Datas);return}n=a;Require([p],function(){Init();j.clear();j.makeCode(a);k.onload=function(){l.height=l.height;m.fillStyle="#fff";m.fillRect(0,0,l.width,l.height);m.drawImage(k,22,22,256,256);q.Datas=l.toDataURL('image/jpeg');if(b)b(q.Datas)}})},Download:function(b){if(!b||b.trim().length<1){b="Edbox游戏分享二维码"}if(Edbox.Platform.IsIOS||Edbox.Platform.IsAndroid){q.Show()}else{var a=document.createElement("a");a.setAttribute("href",q.Datas);a.setAttribute("download",b+".jpg");a.click()}},CreateAndDownload:function(b,c,d,e){q.Create(b,function(a){q.Download(c);if(d)d(a)},e)},Show:function(){o=document.createElement("div");o.style.overflow="hidden";o.style.position="fixed";o.style.top="0";o.style.left="0";o.style.height="100%";o.style.width="100%";o.style.margin="0";o.style.padding="0";o.style.border="0";o.style.zIndex="9999";o.style.backgroundColor="#000";o.onclick=function(){q.Hide()};o.ontouchend=function(){q.Hide()};document.body.appendChild(o);var a=document.createElement("img");var b=o.clientWidth;if(o.clientHeight<b)b=o.clientHeight;if(b>256)b=256;a.style.position="absolute";a.style.top=(o.clientHeight-b)/2+"px";a.style.left=(o.clientWidth-b)/2+"px";a.setAttribute("width",b);a.setAttribute("height",b);a.style.margin="0";a.style.padding="0";a.style.border="0";a.style.zIndex="200";a.setAttribute("src",q.Datas);o.appendChild(a)},Hide:function(){if(o){document.body.removeChild(o);o=null}}};if(f&&g&&!f[g]){f[g]=q}}(Edbox,"QRCode"));(function(j,k){var l=Edbox.Api.FrontendLib;var m={Resource:"c3794ba1-7939-412d-8320-59aadfb377b4",NewResource:"df489d22-b6e4-4140-8a79-f616c26c1991",Editor:"a9e01fdc-a272-497f-9556-c0fde8cb08a1",Product:"eb4002ee-f661-433f-b133-6cf03974f7bd",VRLife:"RESOURCE_STORE"};function DataHandler(a){if(!a)return a;var b=a.items;if(!b)return a;var c=b.length;for(var i=0;i<c;i++){if(!b[i]||!b[i].cover)continue;var d=b[i].cover;if(!d.startsWith("http://"))continue;d=d.substring("http://".length);d="https://"+d;b[i].cover=d}return a}var n={DimensionID:"df489d22-b6e4-4140-8a79-f616c26c1991",GetSortTree:function(a,b,c,d){if(!d){d=n.DimensionID}l.GetSortTree(d,a,b,c)},GetResources:function(b,c,d,e,f,g,h){if(!d||d<0){d=1}if(!e||e<0){e=20}if(!h){h=n.DimensionID}l.GetResources(h,b,c,d,e,function(a){if(!f)return;a=DataHandler(a);f(a)},g)},SetDimensionID:function(a){n.DimensionID=m[a];return n.DimensionID}};if(j&&k&&!j[k]){j[k]=n}}(Edbox,"FrontendLib"));(function(l,m){var n=Edbox.Api.NewFrontendLib;var o={QA:"fb8ea50e-f90c-238e-ceca-cb9814e72e32",Dev:"74b004c4-d8ed-534a-d16a-79eb39149393",Feature:"f7d6183b-7bbe-0adf-3ab7-6e89d9f191e7",CN:"f7d6183b-7bbe-0adf-3ab7-6e89d9f191e7",BetaCN:"f7d6183b-7bbe-0adf-3ab7-6e89d9f191e7",HK:"f7d6183b-7bbe-0adf-3ab7-6e89d9f191e7",US:"f7d6183b-7bbe-0adf-3ab7-6e89d9f191e7",Beta:"f7d6183b-7bbe-0adf-3ab7-6e89d9f191e7"};var p={Unity:{QA:"d163f53f-0d71-c943-8727-4ea534bd57d8",Dev:"e5ef3c9e-273d-7912-692f-12c5ff46525e",Feature:"9ed09b93-bb0f-eb05-3dfa-a97e0590d62b",CN:"9ed09b93-bb0f-eb05-3dfa-a97e0590d62b",BetaCN:"9ed09b93-bb0f-eb05-3dfa-a97e0590d62b",HK:"9ed09b93-bb0f-eb05-3dfa-a97e0590d62b",US:"9ed09b93-bb0f-eb05-3dfa-a97e0590d62b",Beta:"9ed09b93-bb0f-eb05-3dfa-a97e0590d62b"},Laya:{QA:"48c2b02b-15ef-338a-3ec6-d86f3ccf758f",Dev:"26c9332e-176f-7a35-af2f-a142db795542",Feature:"2e1a9678-5055-2406-db6a-eda8cccac6dd",CN:"2e1a9678-5055-2406-db6a-eda8cccac6dd",BetaCN:"2e1a9678-5055-2406-db6a-eda8cccac6dd",HK:"2e1a9678-5055-2406-db6a-eda8cccac6dd",US:"2e1a9678-5055-2406-db6a-eda8cccac6dd",Beta:"2e1a9678-5055-2406-db6a-eda8cccac6dd"}};var q={Unity:{QA:"f98c07f3-c410-c21a-2c17-bbf143b0d07a",Dev:"472b564f-3a3c-3214-4224-613401a82ee5",Feature:"72f452eb-35b9-704a-8e8c-1f9f88468962",CN:"72f452eb-35b9-704a-8e8c-1f9f88468962",BetaCN:"72f452eb-35b9-704a-8e8c-1f9f88468962",HK:"72f452eb-35b9-704a-8e8c-1f9f88468962",US:"72f452eb-35b9-704a-8e8c-1f9f88468962",Beta:"72f452eb-35b9-704a-8e8c-1f9f88468962"},Laya:{QA:"decde0d5-6fef-a898-621c-e3b66f564158",Dev:"9b1eb229-21ca-2560-200c-85dcfc4401fd",Feature:"8b8bd6e1-2f38-05d2-8664-948d1e94cd58",CN:"8b8bd6e1-2f38-05d2-8664-948d1e94cd58",BetaCN:"8b8bd6e1-2f38-05d2-8664-948d1e94cd58",HK:"8b8bd6e1-2f38-05d2-8664-948d1e94cd58",US:"8b8bd6e1-2f38-05d2-8664-948d1e94cd58",Beta:"8b8bd6e1-2f38-05d2-8664-948d1e94cd58"}};var r={Unity:{QA:"da238013-e601-0960-8e85-a3590c8d64d3",Dev:"d68f6693-6678-60fb-1084-c9255ab73e11",Feature:"52cab318-1cdf-72ae-c771-94514de2d484",CN:"52cab318-1cdf-72ae-c771-94514de2d484",BetaCN:"52cab318-1cdf-72ae-c771-94514de2d484",HK:"52cab318-1cdf-72ae-c771-94514de2d484",US:"52cab318-1cdf-72ae-c771-94514de2d484",Beta:"52cab318-1cdf-72ae-c771-94514de2d484"},Laya:{QA:"da238013-e601-0960-8e85-a3590c8d64d3",Dev:"d68f6693-6678-60fb-1084-c9255ab73e11",Feature:"52cab318-1cdf-72ae-c771-94514de2d484",CN:"52cab318-1cdf-72ae-c771-94514de2d484",BetaCN:"52cab318-1cdf-72ae-c771-94514de2d484",HK:"52cab318-1cdf-72ae-c771-94514de2d484",US:"52cab318-1cdf-72ae-c771-94514de2d484",Beta:"52cab318-1cdf-72ae-c771-94514de2d484"}};var s={GetDimensionID:function(a,b,c,d){var e="";if(b==="3DObject"){e=p[a][Edbox.ServerKey]}if(b==="3DEffect"){e=q[a][Edbox.ServerKey]}if(b==="2DEffect"){e=r[a][Edbox.ServerKey]}if(e===""){if(d)d("Not found dimensionId")}else{if(c)c(e)}},GetSortTree:function(d,e,f,g){if(!g){g=o[Edbox.ServerKey]}n.GetSortTree(g,d,function(a){var b=new Array();for(var i=0;i<a.length;i++){var c={ID:a[i].id,Name:a[i].name};b.push(c)}if(e)e(b)},f)},GetResources:function(d,e,f,g,h,j,k){if(!f||f<0){f=1}if(!g||g<0){g=20}if(!k){k=o[Edbox.ServerKey]}n.GetResources(k,d,e,f,g,function(a){var b=new Object();b.Count=a.total_count;b.Items=new Array();if(a.items){for(var i=0;i<a.items.length;i++){var c={ID:a.items[i].id,Name:a.items[i].title,Cover:a.items[i].cover,Type:a.items[i].format_type};b.Items.push(c)}}if(h)h(b)},j)},GetGroupResouces:function(d,e,f,g,h,j,k){if(!g||g<0){g=1}if(!h||h<0){h=20}if(!e||e===''){e='common'}if(!f){f=''}n.GetGroupResouces(Edbox.ProAlias,d,o[Edbox.ServerKey],e,f,g,h,function(a){var b=new Object();b.Count=a.count;b.Items=new Array();if(a.selectable_resource){for(var i=0;i<a.selectable_resource.length;i++){var c={ID:a.selectable_resource[i].ndr_guid,Name:a.selectable_resource[i].name};b.Items.push(c)}}if(j)j(b)},k)},UploadGroupResource:function(a,b,c,d){n.UploadGroupResource(Edbox.ProAlias,a,o[Edbox.ServerKey],b,c,d)},BindGroupResources:function(a,b,c,d){n.BindGroupResources(Edbox.ProAlias,a,o[Edbox.ServerKey],b,c,d)},SetDimensionID:function(a){return o[Edbox.ServerKey]}};if(l&&m&&!l[m]){l[m]=s}}(Edbox,"NewFrontendLib"));(function(u,v){var w=Edbox.Api.NDR;function getSourceInfo(a){if(!a)return null;var b=new Object();for(var i=0;i<a.length;i++){var c=a[i];if(!c.name)continue;b[c.name]=c.value}return b}function getName(a){var b=a.title;if(!a.global_title)return b;if(Edbox.Language==="English"&&a.global_title["en-US"])return a.global_title["en-US"];if(Edbox.Language==="TraditionalChinese"&&a.global_title["zh-HK"])return a.global_title["zh-HK"];if(Edbox.Language==="TraditionalChinese_TW"&&a.global_title["zh-HK"])return a.global_title["zh-HK"];if(Edbox.Language==="SimplifiedChinese"&&a.global_title["zh-CN"])return a.global_title["zh-CN"];if(Edbox.Language==="Arabic_EG"&&a.global_title["en-US"])return a.global_title["en-US"];return b}function getEncodeLocation(a){var b=a.split("/");var c='';if(b.length>0){for(var i=0;i<b.length-1;i++){c=c+b[i]+'/'}var d=b[b.length-1].split("?");if(d.length===2){c=c+encodeURIComponent(d[0])+"?"+d[1]}else{c=c+encodeURIComponent(b[b.length-1])}}else{c=a}return c}var x={Get:function(f,g,h,j){function isMeet(a){var b=a.Type;if(!j||j.length===0){return true}for(var i=0;i<j.length;i++){var c=j[i];if(b.indexOf(c)>0){return true}}return false}w.Get(f,function(a){var b=new Object();b.Guid=a.identifier;b.Name=getName(a);b.Preview="";if(a.preview&&a.preview.png){b.Preview=getEncodeLocation(a.preview.png).replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static")}if(b.Preview===""&&a.preview&&a.preview.cover){b.Preview=getEncodeLocation(a.preview.cover).replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static")}if(b.Preview===""&&a.preview){var c=Object.keys(a.preview);for(var i=0;i<c.length;i++){var d=c[i];if(d===240||d==='240'){var e=a.preview[d];b.Preview=getEncodeLocation(e).replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static")}}}b.Url=getEncodeLocation(a.tech_info.source.location).replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static");b.Type=a.tech_info.source.format;b.Size=a.tech_info.source.size;b.SourceInfo=getSourceInfo(a.tech_info.source.requirements);if(b.Url.substring(b.Url.length-4,b.Url.length)==='.pkg'){b.Url=getEncodeLocation(a.tech_info.config.location).replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static");b.Type=a.tech_info.config.format;b.SourceInfo=getSourceInfo(a.tech_info.config.requirements)}if(isMeet(b)){if(g){g(b)}return}var c=Object.keys(a.tech_info);for(var i=0;i<c.length;i++){var d=c[i];var e=a.tech_info[d];b.Url=getEncodeLocation(e.location).replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static");b.Type=e.format;b.Size=e.size;b.SourceInfo=getSourceInfo(a.tech_info.source.requirements);b.Preview=getEncodeLocation(a.preview.png).replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static");if(isMeet(b)){if(g){g(b)}return}}if(h){h("No resource support specified format")}},h)},GetWithUrlFormats:function(f,g,h,j){var k='/v0.6/assets/'+f;var l="include=TI";function isMeet(a){var b=a.Url;if(!j||j.length===0){return true}for(var i=0;i<j.length;i++){var c=j[i].toLowerCase();if(b.toLowerCase().endsWith(c)){return true}}return false}w.Get(f,function(a){var b=new Object();b.Guid=a.identifier;b.Name=getName(a);b.Preview="";if(a.preview&&a.preview.png){b.Preview=getEncodeLocation(a.preview.png).replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static")}if(b.Preview===""&&a.preview&&a.preview.cover){b.Preview=getEncodeLocation(a.preview.cover).replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static")}if(b.Preview===""&&a.preview){var c=Object.keys(a.preview);for(var i=0;i<c.length;i++){var d=c[i];if(d===240||d==='240'){var e=a.preview[d];b.Preview=getEncodeLocation(e).replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static")}}}b.Url=getEncodeLocation(a.tech_info.source.location).replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static");b.Type=a.tech_info.source.format;b.Size=a.tech_info.source.size;b.SourceInfo=getSourceInfo(a.tech_info.source.requirements);if(isMeet(b)){if(g){g(b)}return}var c=Object.keys(a.tech_info);for(var i=0;i<c.length;i++){var d=c[i];var e=a.tech_info[d];b.Url=getEncodeLocation(e.location).replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static");b.Type=e.format;b.Size=e.size;b.SourceInfo=getSourceInfo(a.tech_info.source.requirements);if(isMeet(b)){if(g){g(b)}return}}if(h){h("No resource support specified format")}},h)},GetList:function(j,k,l,m){if(!j||j.length===0){if(l){l("No Datas")}return}function handle(a){var b=new Array();var c=new Array();for(var i in a){if(b.indexOf(a[i])===-1){if(b.length<100)b.push(a[i]);else{c.push(a[i])}}}return[b,c]}var n=handle(j);j=n[0];var o=n[1];function isMeet(a){var b=a.Type;if(!m||m.length===0){return true}for(var i=0;i<m.length;i++){var c=m[i];if(b.indexOf(c)>0){return true}}return false}function getInfo(a,b,c){var d=new Object();d.Guid=a.identifier;d.Name=getName(a);d.Preview="";if(a.preview&&a.preview.png){d.Preview=getEncodeLocation(a.preview.png).replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static")}if(d.Preview===""&&a.preview&&a.preview.cover){d.Preview=getEncodeLocation(a.preview.cover).replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static")}if(d.Preview===""&&a.preview){var e=Object.keys(a.preview);for(var i=0;i<e.length;i++){var f=e[i];if(f===240||f==='240'){var g=a.preview[f];d.Preview=getEncodeLocation(g).replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static")}}}d.Url=getEncodeLocation(a.tech_info.source.location).replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static");d.Type=a.tech_info.source.format;d.Size=a.tech_info.source.size;d.SourceInfo=getSourceInfo(a.tech_info.source.requirements);if(isMeet(d)){if(b){b(d)}return}var e=Object.keys(a.tech_info);for(var i=0;i<e.length;i++){var f=e[i];var g=a.tech_info[f];d.Url=getEncodeLocation(g.location).replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static");d.Type=g.format;d.Size=g.size;d.SourceInfo=getSourceInfo(a.tech_info.source.requirements);if(isMeet(d)){if(b){b(d)}return}}if(c){c("No resource support specified format")}}w.GetList(j,function(e){function answer(d){if(o&&o.length>0){x.GetList(o,function(a){var b=Object.keys(a);for(var i=0;i<b.length;i++){var c=b[i];d[c]=a[c]}if(k){k(d)}},l,m)}else{if(k){k(d)}}}var f=Object.keys(e);var g=new Object();if(f.length===0){answer(g)}for(var i=0;i<f.length;i++){var h=f[i];getInfo(e[h],function(a){g[h]=a;if(i===f.length-1){answer(g)}},function(a){if(i===f.length-1){answer(g)}})}},l)},Post:function(k,l,m,n,o){var p;var q=Edbox.EbUserId;var r=x.Base64ToBlob(k);var s=r.type;if(!s||s.length<1){s=getType(l)}function getFileName(a){var b=a.lastIndexOf(".");return a.substring(0,b)}function getExtend(a){var b=a.lastIndexOf(".");return a.substring(b+1,a.length)}function getType(a){var b=getExtend(a);var c="";switch(b){case"jpg":case"png":case"gif":c="image/"+b;break;case"zip":case"rar":c="application/"+b;break;case"mp3":case"wav":case"ogg":c="audio/"+b;break;case"edpackage":c="application/zip";break;case"assetbundle":c="application/octet-stream";break;default:break}return c}if(getExtend(l)==='zip'){l=getFileName(l)+'.'+"edpackage"}var t=getFileName(l);l=t+'.'+getExtend(l);function getSession(){var a=w.GetSession(q,uploadToCS,o);if(m){m("getsession",0,a)}}function uploadToCS(d){var e=null;p=d;var f=Edbox.GetGUID()+'.'+getExtend(l);e=sendAjax=Edbox.Api.CS.UpLoadToCS(d.session_id,d.dist_path,f,r,function(a,b,c){if(m){m("uploadtocs",10+Math.floor(a*70/100),e)}},buildNdrResource,o);if(m){m("uploadtocs",10,e)}}function buildNdrResource(f){var g='${ref-path}'+f.path;var h={'title':t,'preview':{'png':s.indexOf("image")>=0?g:""},'language':'zh-CN','identifier':p.uuid,'life_cycle':{'version':'1.0','status':'ONLINE','enable':true,'creator':q,'publisher':'NetDragon'},'categories':{"assets_type":[{'taxoncode':'$RA0106'},{'taxoncode':'RT022'},{'taxoncode':'$RA1201'}]},'tech_info':{'source':{'size':f.inode.size,'location':g,'format':s,'md5':f.inode.md5}},"coverages":[{"target_type":"App","target":"cf7ce674-9dde-4bb3-8f54-1f1ab4f2bcf0","target_title":"EdBox Library","strategy":"OWNER"}]};function handle(a){if(n){var b=new Object();b.Guid=a.identifier;b.Url=a.tech_info.source.location.replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static");b.Type=a.tech_info.source.format;b.Name=a.title;b.Preview="";if(a.preview&&a.preview.png){b.Preview=a.preview.png.replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static")}if(b.Preview===""&&a.preview&&a.preview.cover){b.Preview=a.preview.cover.replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static")}if(b.Preview===""&&a.preview){var c=Object.keys(a.preview);for(var i=0;i<c.length;i++){var d=c[i];if(d===240||d==='240'){var e=a.preview[d];b.Preview=e.replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static")}}}n(b)}}var j=w.Post(p.uuid,h,handle,o);if(m){m("createndrsource",90,j)}}getSession()},Put:function(k,l,m,n,o,p){var q;var r=Edbox.EbUserId;var s=x.Base64ToBlob(k);var t=s.type;if(!t||t.length<1){t=getType(m)}function getFileName(a){var b=a.lastIndexOf(".");return a.substring(0,b)}function getExtend(a){var b=a.lastIndexOf(".");return a.substring(b+1,a.length)}function getType(a){var b=getExtend(a);var c="";switch(b){case"jpg":case"png":case"gif":c="image/"+b;break;case"zip":case"rar":case"json":c="application/"+b;break;case"mp3":case"wav":case"ogg":c="audio/"+b;break;case"edpackage":c="application/zip";break;case"assetbundle":c="application/octet-stream";break;default:break}return c}m=getFileName(m)+"_"+Edbox.GetGUID()+'.'+getExtend(m);function getSession(){n("getsession",0);w.GetUpdateSession(r,l,uploadToCS,p)}function uploadToCS(d){n("uploadtocs",10);q=d;var e=Edbox.GetGUID()+'.'+getExtend(m);Edbox.Api.CS.UpLoadToCS(d.session_id,d.dist_path,e,s,function(a,b,c){n("uploadtocs",10+Math.floor(a*70/100))},buildNdrResource,p)}function buildNdrResource(j){n("createndrsource",90);w.Get(l,function(f){if(f!==null){var g='${ref-path}'+j.path;var h=function(a){if(o){var b=new Object();b.Guid=a.identifier;b.Url=g.replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static");b.Type=t;b.Name=a.title;b.Preview="";if(a.preview&&a.preview.png){b.Preview=a.preview.png.replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static")}if(b.Preview===""&&a.preview&&a.preview.cover){b.Preview=a.preview.cover.replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static")}if(b.Preview===""&&a.preview){var c=Object.keys(a.preview);for(var i=0;i<c.length;i++){var d=c[i];if(d===240||d==='240'){var e=a.preview[d];b.Preview=e.replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static")}}}o(b)}};f.categories={};f.categories.assets_type=new Array();f.categories.assets_type.push({'taxoncode':'$RA0106'});f.categories.assets_type.push({'taxoncode':'RT022'});f.categories.assets_type.push({'taxoncode':'$RA1201'});f.tech_info.source={};f.tech_info.source.size=j.inode.size;f.tech_info.source.location=g;f.tech_info.source.format=t;f.tech_info.source.md5=j.inode.md5;w.Update(l,f,h,p)}else{p()}},p)}getSession()},SetPreview:function(j,k,l,m,n,o){var p;var q=Edbox.EbUserId;var r=x.Base64ToBlob(j);var s=r.type;if(!s||s.length<1){s=getType(l)}function getFileName(a){var b=a.lastIndexOf(".");return a.substring(0,b)}function getExtend(a){var b=a.lastIndexOf(".");return a.substring(b+1,a.length)}function getType(a){var b=getExtend(a);var c="";switch(b){case"jpg":case"png":case"gif":c="image/"+b;break;default:break}return c}l=getFileName(l)+"_"+Edbox.GetGUID()+'.'+getExtend(l);function getSession(){m("getsession",0);w.GetUpdateSession(q,k,uploadToCS,o)}function uploadToCS(d){m("uploadtocs",10);p=d;var e=Edbox.GetGUID()+'.'+getExtend(l);Edbox.Api.CS.UpLoadToCS(d.session_id,d.dist_path,e,r,function(a,b,c){m("uploadtocs",10+Math.floor(a*70/100))},buildNdrResource,o)}function buildNdrResource(h){m("createndrsource",90);w.Get(k,function(f){if(f!==null){var g='${ref-path}'+h.path;function handle(a){if(n){var b=new Object();b.Guid=a.identifier;b.Url=g.replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static");b.Type=s;b.Name=a.title;b.Preview="";if(a.preview&&a.preview.png){b.Preview=a.preview.png.replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static")}if(b.Preview===""&&a.preview&&a.preview.cover){b.Preview=a.preview.cover.replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static")}if(b.Preview===""&&a.preview){var c=Object.keys(a.preview);for(var i=0;i<c.length;i++){var d=c[i];if(d===240||d==='240'){var e=a.preview[d];b.Preview=e.replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static")}}}n(b)}}f.preview.png=g;f.categories={};f.categories.assets_type=new Array();f.categories.assets_type.push({'taxoncode':'$RA0106'});f.categories.assets_type.push({'taxoncode':'RT022'});f.categories.assets_type.push({'taxoncode':'$RA1201'});w.Update(k,f,handle,o)}else{o()}},o)}getSession()},GetFileData:function(b,c,d){var f=new FileReader();f.onload=function(){var a=new Object();a.Name=b.name;a.Data=f.result;if(c)c(a)};f.onerror=function(e){if(d)d(e)};f.readAsDataURL(b)},Base64ToBlob:function(a){var b=a.split(';base64,');var c=b[0].split(':')[1];var d=window.atob(b[1]);var e=d.length;var f=new Uint8Array(e);for(var i=0;i<e;++i){f[i]=d.charCodeAt(i)}return new Blob([f],{type:c})},BlobToBase64:function(b,c){var a=new FileReader();a.onload=function(e){if(c)c(e.target.result)};a.readAsDataURL(b)}};if(u&&v&&!u[v]){u[v]=x}}(Edbox,"NDR"));(function(C,D){var E=Edbox.Api.NDR;var F=Edbox.NDR;var G={};var H={};var I=0;var J={};var K=0;var L={};function isMeet(a,b){if(!b||b.length===0){return true}if(typeof b==="string"){if(a.indexOf(b)>0){return true}return false}for(var i=0;i<b.length;i++){var c=b[i];if(a.indexOf(c)>0){return true}}return false}function isMeetUrl(a,b){if(!b||b.length===0){return true}if(typeof b==="string"){if(a.toLowerCase().endsWith(b)){return true}return false}for(var i=0;i<b.length;i++){var c=b[i].toLowerCase();if(a.toLowerCase().endsWith(c)){return true}}return false}function DFSDatas(a,b){if(a instanceof Array){for(var i=0;i<a.length;i++){DFSDatas(a[i],b)}return}if(a.Datas){DFSDatas(a.Datas,b);return}b(a)}function GetLoadMap(d){DFSDatas(JSON.parse(JSON.stringify(d)),function(b){switch(b.Type){case"Image01":{I+=1;if(b.GUID&&!b.Value){H[b.GUID]=""}break}case"Image02":{if(!b.GUID||!b.GUID.length||b.GUID.length<=0){break}for(var c=0;c<b.GUID.length;c++){I+=1;(function(a){if(b.GUID[a]&&(!b.Value||!b.Value[a])){H[b.GUID[a]]=""}}(c))}break}case"Audio01":{I+=1;if(b.GUID&&!b.Value){H[b.GUID]=""}break}case"Effect01":{I+=1;if(b.GUID&&!b.Value){H[b.GUID]=""}break}case"Object3D01":{if(!b.GUID){break}if(!b.Value){b.Value={}}I+=2;if(b.GUID.Animation&&!b.Value.Animation){H[b.GUID.Animation]=""}if(b.GUID.Resource&&!b.Value.Resource){H[b.GUID.Resource]=""}break}case"Animation01":{K+=1;if(b.GUID&&(!b.Value||b.Value.length===0)){J[b.GUID]=[];L[b.GUID]=""}break}default:break}})}function SetLoadMap(d){DFSDatas(d,function(b){switch(b.Type){case"Image01":{if(b.GUID&&H[b.GUID]){b.Value=H[b.GUID]}break}case"Image02":{if(!b.GUID||!b.GUID.length||b.GUID.length<=0){break}for(var c=0;c<b.GUID.length;c++){(function(a){if(b.GUID[a]&&H[b.GUID[a]]){if(!b.Value){b.Value=[]}b.Value[a]=H[b.GUID[a]]}}(c))}break}case"Audio01":{if(b.GUID&&H[b.GUID]){b.Value=H[b.GUID]}break}case"Effect01":{if(b.GUID&&H[b.GUID]){b.Value=H[b.GUID]}break}case"Object3D01":{if(!b.GUID){break}if(!b.Value){b.Value={}}if(b.GUID.Animation&&H[b.GUID.Animation]){b.Value.Animation=H[b.GUID.Animation]}if(b.GUID.Resource&&H[b.GUID.Resource]){b.Value.Resource=H[b.GUID.Resource]}break}case"Animation01":{if(b.GUID&&J[b.GUID]&&J[b.GUID].length>0){b.Value=J[b.GUID]}if(b.GUID&&L[b.GUID]){b.Preview=L[b.GUID]}break}default:break}})}function GetPercent(a,b){a=parseFloat(a);b=parseFloat(b);if(isNaN(a)||isNaN(b)||b<=0){return 0}if(a>=b){return 100}return parseInt(Math.round(a/b*10000)/100.00)}var M={Get:function(b,c,d,e){if(e){E.Get(b,c,d);return}var f='/v0.6/assets/'+b+"?include=TI";var g="https://"+Edbox.GetHost("NDR")+f;$.ajax({url:g,async:false,type:"GET",dataType:"json",success:function(a){if(c)c(a)},error:function(a){if(d)d(a)}})},GetAudio:function(g,h,j,k,l){M.Get(g,function(a){var b=a.tech_info.href.location.replace('${ref-path}','');if(k){b="";var c=Object.keys(a.tech_info);for(var i=0;i<c.length;i++){var d=c[i];var e=a.tech_info[d];if(e.format&&isMeet(e.format,k)){b=e.location.replace('${ref-path}','');break}}if(!b||b.length<1){if(j){j("Formatting Error")}return}}var f=Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static"+b;if(h)h(f)},j,l)},GetImage:function(g,h,j,k,l){M.Get(g,function(a){var b=a.tech_info.source.location.replace('${ref-path}','');if(k){b="";var c=Object.keys(a.tech_info);for(var i=0;i<c.length;i++){var d=c[i];var e=a.tech_info[d];if(e.format&&isMeet(e.format,k)){b=e.location.replace('${ref-path}','');break}}if(!b||b.length<1){if(j){j("Formatting Error")}return}}var f=Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static"+b;if(h)h(f)},j,l)},GetFont:function(g,h,j,k,l){M.Get(g,function(a){var b=a.tech_info.source.location.replace('${ref-path}','');if(k){b="";var c=Object.keys(a.tech_info);for(var i=0;i<c.length;i++){var d=c[i];var e=a.tech_info[d];if(e.location&&isMeetUrl(e.location,k)){b=e.location.replace('${ref-path}','');break}}if(!b||b.length<1){if(j){j("Formatting Error")}return}}var f=Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static"+b;if(h)h(f)},j,l)},GetFontWithPreview:function(j,k,l,m,n){M.Get(j,function(a){var b=a.tech_info.source.location.replace('${ref-path}','');var c=a.preview.png.replace('${ref-path}','');if(m){b="";var d=Object.keys(a.tech_info);for(var i=0;i<d.length;i++){var e=d[i];var f=a.tech_info[e];if(f.location&&isMeetUrl(f.location,m)){b=f.location.replace('${ref-path}','');break}}if(!b||b.length<1){if(l){l("Formatting Error")}return}}var g=Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static"+b;var h=Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static"+c;if(k)k([g,h])},l,n)},GetPackage:function(a,b,c,d){Edbox.Package.GetPackage(a,b,c,d)},GetConfig:function(a,b,c,d){Edbox.Package.GetConfig(a,b,c,d)},LoadDatas:function(r,s,t,v){if(!r||!r.Datas){if(t)t("Datas Error");return}var z=new Object();var A=new Object();var B={};Init(r,s,t);function Init(e,f,g){function GetAssetConfig(d){Edbox.Package.GetConfig("AssetConfig",function(a){var b=a.Assets;for(var i=0;i<b.length;i++){var c=b[i];ReadAsset(c)}if(d)d(e)},g)}function GetTxtConfig(d){Edbox.Package.GetConfig("TxtConfig",function(a){var b=a.Txts;for(var i=0;i<b.length;i++){var c=b[i];ReadText(c)}if(d)d(e)})}function GetDatasConfig(d){Edbox.Package.GetConfig("DatasConfig",function(a){if(!a)return;e.StaticData=a.StaticData;if(!e.StaticData){e.StaticData=new Object();e.StaticData.ID="StaticData";e.StaticData.Name="StaticData";e.StaticData.Type="StaticData";e.StaticData.ShowName="静态数据";e.StaticData.Datas=new Array()}var b=a.Datas;for(var i=0;i<b.length;i++){var c=b[i];A[c.ID]=c}if(d)d()},d)}function load(b){Edbox.Package.GetPackage(b,function(){GetDatasConfig(function(){GetTxtConfig(function(){GetAssetConfig(function(){ReadStaticData(function(){ReadDatas();if(f)f(e)})})})})},function(a){console.log(a);if(g)g("Illegal Game")})}if(!Edbox.GameId||Edbox.GameId.length<1){if(g)g("GameId is Empty");return}if(v&&v.length>0){load(v);return}if(!Edbox.PackageGuid||Edbox.PackageGuid.length<10){if(g)g("PackageGuid is Empty");return}if(Edbox.PackageGuid&&Edbox.PackageGuid.length>10){load(Edbox.PackageGuid)}}function ReadDatas(){if(!r)return;var q=new Object();loadPackage(r);clearLink();loadLink();loadTemplate();sortlink();function handleItem(a,b){if(!a||!b)return;if(a.Type==="Select01"||a.Type==="Select02"||a.Type==="Select03"){if(b.Items&&b.Items.length>0){if(a.Key===undefined){a.Key=a.Value}if(a.Keys===undefined){a.Keys=a.Items}if(b.Type==="Select03"){b.Value=new Array();for(var y=0;y<b.Key.length;++y){var c=b.Keys.indexOf(b.Key[y]);if(c>-1){a.Value.push(b.Items[c])}}}else{var d=a.Keys.indexOf(a.Key);if(d>-1){a.Value=b.Items[d]}else{a.Key=a.Keys[0];a.Value=b.Items[0]}}a.Items=b.Items}}var e=Object.keys(b);for(var j=0;j<e.length;j++){var f=e[j];if(a[f]===undefined){a[f]=b[f]}}if(a.Type==="Tab03"){if(a.Recordable===undefined&&!a.Editable){return}}var g=Object.keys(a);for(var w=0;w<g.length;w++){var h=g[w];b[h]=a[h]}}function handleTemplateSelect(a,b){if(a.Type.indexOf("Select")<0||b.Type.indexOf("Select")<0)return;if(!a.Items){if(b.Type==="Select03"){b.Value=new Array();for(var y=0;y<obj.Key.length;++y){var c=b.Keys.indexOf(b.Key[y]);if(c>-1){a.Value.push(b.Items[c])}}}else if(b.Type==="Select01"||b.Type==="Select02"){var d=b.Keys.indexOf(b.Key);if(d>-1){a.Value=b.Items[d]}else{a.Key=a.Keys[0];a.Value=b.Items[0]}}a.Items=b.Items}else{if(a.Items.length===b.Items.length){a.Items=b.Items;a.Value=b.Value}}}function loadPackage(a){var b=a.Datas;if(!b)return;for(var i=0;i<b.length;i++){var c=b[i];if(c.ID){z[c.ID]=c}if(A[c.ID]){handleItem(A[c.ID],c);var d=Object.keys(z[c.ID]);for(var j=0;j<d.length;j++){var e=d[j];if(A[c.ID][e]===undefined){A[c.ID][e]=z[c.ID][e]}}var f=Object.keys(A[c.ID]);for(var w=0;w<f.length;w++){var g=f[w];c[g]=A[c.ID][g]}}if(c.Type&&c.Type==="Tab03"){if(c.Editable===undefined){if(a.Type.indexOf("Tab")>-1){c.Editable=a.Editable}}}if(c.Editable){if(c.Type&&c.Type.indexOf("Tab")>=0){q[c.ID]=c}}if(c.Template){B[c.ID]=c.Template}if(c.Datas){loadPackage(c)}}}function clearLink(){var a=Object.keys(q);for(var i=0;i<a.length;i++){var b=a[i];var c=q[b];var d=new Array();for(var u=0;u<c.Datas.length;u++){var e=c.Datas[u];if(e.Type.indexOf('Tab')>=0&&e.Editable!==undefined&&!e.Editable){e.ParantIndex=u;d.push(e)}}c.Datas=d}}function loadLink(){var d=Object.keys(A);function findInArray(a,b){for(var c=0;c<a.length;c++){if(b.ID===a[c].ID){return true}}return false}for(var i=0;i<d.length;i++){var e=d[i];var f=A[e];if(f.TemplateID){B[f.TemplateID]=f;continue}if(!f.ParantID)continue;var g=q[f.ParantID];if(!g)continue;if(!findInArray(g.Datas,f)){g.Datas.push(f)}if(q[f.ID]){f.Datas=q[f.ID].Datas}if(B[e]){f.Template=B[e]}}var h=false;for(i=0;i<d.length;i++){e=d[i];f=A[e];if(q[e])continue;if(f.ParantID===undefined)continue;if(!f.ParantID)continue;if(q[f.ParantID])continue;g=A[f.ParantID];if(!g)continue;if(g.Datas===undefined){g.Datas=new Array()}h=true;for(var j=0;j<g.Datas.length;j++){if(g.Datas[j].ID===f.ID){h=false;break}}if(h){if(!findInArray(g.Datas,f)){g.Datas.push(f)}}}}function loadTemplate(){var e=Object.keys(A);function handleTempleItem(a,b){if(b.ShowName){a.ShowName=b.ShowName}if(b.Datas){loadTemplateItem(a,b)}else{handleTemplateSelect(a,b)}var c=Object.keys(b);for(var m=0;m<c.length;m++){if(m==="Datas")continue;var d=c[m];if(a[d]===undefined&&b[d]!==undefined){a[d]=b[d]}}}function loadTemplateItem(a,b){if(a.Datas===undefined){a.Datas=JSON.parse(JSON.stringify(b.Datas))}else{for(var c=0;c<b.Datas.length;c++){if(a.Datas[c]===undefined){a.Datas[c]=JSON.parse(JSON.stringify(b.Datas[c]))}else{handleTempleItem(a.Datas[c],b.Datas[c])}}}}for(var i=0;i<e.length;i++){var f=e[i];var g=A[f];if(!g.Datas)continue;if(!B[g.ParantID]||!B[g.ParantID].Datas)continue;if(g.Class&&g.Class==="ResouceManage")continue;var h=B[g.ParantID];if(h.TemplateMode&&h.TemplateMode==="Packdatas")continue;for(var n=0;n<B[g.ParantID].Datas.length;++n){var j=B[g.ParantID].Datas[n];if(!g.Datas[n])continue;var k=g.Datas[n];handleTempleItem(k,j)}}var l=Object.keys(B);for(var p=0;p<l.length;p++){var o=B[l[p]];if(o.TemplateID&&A[o.TemplateID]){A[o.TemplateID].Template_Override=o}}}function sortlink(){var a=function(x,y){if(x.ParantIndex<y.ParantIndex){return-1}else{return 1}};var b=Object.keys(q);for(var i=0;i<b.length;i++){var c=b[i];var d=q[c];d.Datas=d.Datas.sort(a)}}}function ReadAsset(a){var b;var c=Object.keys(a);for(var i=0;i<c.length;i++){var d=c[i];if(d==="AssetPath")continue;if(d==="AssetGUID")continue;if(d==="AssetType")continue;if(d==="Platform")continue;b=d;break}var e=A[b];if(!e)return;e.GUID=a.AssetGUID?a.AssetGUID:"";if(e.GUID===""){e.Value=a.AssetPath}else{e.Value=null}}function ReadText(a){var b;var c=Object.keys(a);for(var i=0;i<c.length;i++){var d=c[i];if(d==="Text")continue;b=d;break}var e=A[b];if(!e)return;e.Value=a.Text}function ReadStaticData(b){var c=[];for(var d in Edbox.Package.PackageZip.files){var o=Edbox.Package.PackageZip.files[d];if(o.dir)continue;var e=o.name.indexOf("package/Config/");var f=o.name.lastIndexOf("/");var g=o.name.indexOf(".json");if(e>=0&&g>f){var h=o.name.substring(f+1,g);if(h==='AssetConfig'||h==='DatasConfig'||h==='TxtConfig'||h==='GameBaseConfig')continue;c.push(h)}}for(var i=0;i<c.length;i++){var j=c[i];Edbox.Package.GetConfig(j,function(a){r.StaticData[j]=a;if(j===c[c.length-1]){if(b)b()}})}if(c.length===0){if(b)b()}}},StartLoad:function(c,d,e,f,g){var h=JSON.parse(JSON.stringify(c));function successCallback(){if(g&&typeof g==="function"){g(h)}if(d&&typeof d==="function"){d(GetPercent(j,k))}if(e&&j>=k){e(h);e=null}}K=0;I=0;GetLoadMap(h);var i=0;var j=0;var k=I+K;var l=[];for(var m in H){if(!H[m]){i+=1;l.push(m)}}for(var n in L){if(!L[n]){i+=1;l.push(n)}}if(i!==0){F.GetList(l,function(a){for(var b in a){if(b in H){H[b]=a[b].Url}if(b in L){L[b]=a[b].Preview}}SetLoadMap(h);j+=I;successCallback()},f)}else{j+=I;successCallback()}for(var o in J){if(J[o].length===0){G[o]=Edbox.FrameAnimation.Get(o,function(a){J[o]=a;SetLoadMap(h);j+=1;successCallback()},f)}else{j+=1;successCallback()}}},StopLoad:function(b,c,d){try{var f=[];DFSDatas(JSON.parse(JSON.stringify(b)),function(a){switch(a.Type){case"Animation01":{if(a.GUID){f.push(a.GUID)}break}default:break}});for(var i=0;i<f.length;i++){var g=f[i];if(G[g]){G[g].abort()}}if(c)c()}catch(e){if(d)d(e)}}};if(C&&D&&!C[D]){C[D]=M}}(Edbox,"Resource"));(function(r,s){var t=Edbox.Api.NDR;var u=Edbox.ComponentRootPath+"ThirdParty/jszip/jszip.min.js";var v=Edbox.ComponentRootPath+"ThirdParty/jszip/jszip-utils.js";function Get(m,n,o){var p={};p.abort=function(){if(p.Request2){p.Request2.onreadystatechange=function(){};p.Request2.abort()}if(p.Request1){p.Request1.onreadystatechange=function(){};p.Request1.abort()}};p.Request1=t.Get(m,function(k){var l=k.tech_info.source.location.replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static");Require([u,v],function(){p.Request2=JSZipUtils.getBinaryContent(l,function(h,j){if(h&&o)o(h);JSZip.loadAsync(j).then(function(e){var f=new Array();var g=e.file('package/Config/Config.json');g.async('string').then(function(a){var b="";if(a){b=a.toString()}else{if(o)o("Buffer Error");return}if(b){obj=JSON.parse(b);Handle(obj)}else{if(o)o("Content Not A Json");return}});function Handle(c){var d=c.Times;var i=0;function getdatas(){if(i>=d.length){if(n)n(f);return}var b=e.file('package/Image/'+i.toString()+'.png');b.async('base64').then(function(a){f[i]={clip:"data:image/png;base64,"+a,time:d[i]};i+=1;getdatas()})}getdatas()}})})})},o);return p}function GetPreview(c,d,e){t.Get(c,function(a){if(!a.preview.png){if(e)e("No Preview");return}var b=a.preview.png.replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static");if(d)d(b)},e)}function GetAtlas(c,d,e){t.Get(c,function(a){if(!a.tech_info.atlas){if(e)e("No Atlas");return}var b=a.tech_info.atlas.location.replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static");if(d)d(b)},e)}function GetZip(j,k,l){Require([u,v],function(){var b=new JSZip();var c=new Object();c.Times=new Array();for(var i=0;i<j.length;i++){var d=j[i];var e=d.clip;var f=e.split(',');var g=f[1];var h=d.time;c.Times[i]=h;b.file('package/Image/'+i.toString()+'.png',g,{base64:true})}b.file('package/Config/Config.json',JSON.stringify(c));b.generateAsync({type:"blob"}).then(function(a){if(k){k(a)}else{l()}})})}function Set(h,i,j,k,l,m){if(!h){if(m)m("No Data")}var n=Edbox.EbUserId;var o="";var p=null;var q=null;t.GetSession(n,function(g){function UploadPreview(){if(i){var d=Edbox.NDR.Base64ToBlob(i);if(k)k("上传预览图",1);k("上传预览图",2);var e=d.type;var f="preview";if(!e||e.length<1){e="image/png"}f+=e.replace("image/",".");Edbox.Api.CS.UpLoadToCS(g.session_id,g.dist_path,f,d,function(a,b,c){k("上传预览图",2+Math.floor(a*18/100));UploadAtlas()},function(a){o='${ref-path}'+a.path},m)}else{UploadAtlas()}}function UploadAtlas(){if(j){var d=Edbox.NDR.Base64ToBlob(j);if(k)k("上传图集",21);k("上传图集",22);var e=d.type;var f="atlas";if(!e||e.length<1){e="image/png"}f+=e.replace("image/",".");Edbox.Api.CS.UpLoadToCS(g.session_id,g.dist_path,f,d,function(a,b,c){k("上传图集",22+Math.floor(a*28/100))},function(a){p={'size':a.inode.size,'location':'${ref-path}'+a.path,'format':e,'md5':a.inode.md5};UploadZip()},m)}else{UploadZip()}}function UploadZip(){GetZip(h,function(d){if(k)k("上传Zip数据包",51);k("上传Zip数据包",52);Edbox.Api.CS.UpLoadToCS(g.session_id,g.dist_path,"data.gzip",d,function(a,b,c){k("上传Zip数据包",52+Math.floor(a*38/100))},function(a){var b="application/zip";q={'size':a.inode.size,'location':'${ref-path}'+a.path,'format':b,'md5':a.inode.md5};PostToNDR()},m)},m)}function PostToNDR(){k("上传到NDR",91);var b={'title':"Frame Animation",'preview':{'png':o},'language':'zh-CN','identifier':g.uuid,'life_cycle':{'version':'1.0','status':'ONLINE','enable':true,'creator':n,'publisher':'NetDragon'},'categories':{"assets_type":[{'taxoncode':'$RA0106'},{'taxoncode':'RT022'},{'taxoncode':'$RA1201'}]},'tech_info':{}};if(p){drData.tech_info.atlas=p}if(q){b.tech_info.zip=q;b.tech_info.source=q}t.Post(g.uuid,b,function(a){k("上传到NDR",100);if(l)l(a.identifier)},m)}UploadPreview()},m)}var w={Get:function(a,b,c){return Get(a,b,c)},GetPreview:function(a,b,c){GetPreview(a,b,c)},GetAtlas:function(a,b,c){GetAtlas(a,b,c)},Set:function(a,b,c,d,e,f){Set(a,b,c,d,e,f)}};if(r&&s&&!r[s]){r[s]=w}}(Edbox,"FrameAnimation"));(function(b,c){var d=false;var e=new List();var f=new List();var g=new List();var h=new List();var j=new List();function close(){for(var i=0;i<e.Count();i++){if(e[i]&&"function"===typeof e[i]){e[i]()}}if(!d)return null;return Edbox.GetTip("Hint_NotSave")}function focus(){for(var i=0;i<f.Count();i++){if(f[i]&&"function"===typeof f[i]){f[i]()}}}function blur(){for(var i=0;i<g.Count();i++){if(g[i]&&"function"===typeof g[i]){g[i]()}}}function offline(){for(var i=0;i<h.Count();i++){if(h[i]&&"function"===typeof h[i]){h[i]()}}}function online(){for(var i=0;i<j.Count();i++){if(j[i]&&"function"===typeof j[i]){j[i]()}}}$(function(){$(window).unbind('beforeunload');window.onbeforeunload=close;window.onfocus=focus;window.onblur=blur;window.onoffline=offline;window.ononline=online});var k={AddExitEvent:function(a){e.Add(a)},RemoveExitEvent:function(a){e.Remove(a)},AddFocusEvent:function(a){f.Add(a)},RemoveFocusEvent:function(a){f.Remove(a)},AddBlurEvent:function(a){g.Add(a)},RemoveBlurEvent:function(a){g.Remove(a)},AddOfflineEvent:function(a){h.Add(a)},RemoveOfflineEvent:function(a){h.Remove(a)},AddOnlineEvent:function(a){j.Add(a)},RemoveOnlineEvent:function(a){j.Remove(a)},Show:function(){d=true},Hide:function(){d=false}};if(b&&c&&!b[c]){b[c]=k}})(Edbox,"WindowEvent");(function(l,n){var o=Edbox.Action.Task;var p={};var q={};var r={};var s={};var t={};var u={};var v={};var w字段定义={TaskID:1000,NodeID:10001,NodeState:0,TaskFinish:0};var u字段定义={"1000":{"1001":{},"1002":{}}};var v字段定义={"1000":{"1001":{"10011":{}}}};var p字段定义={task_id:{task_inst_id:"",Type:"",Count:0,Total:0,State:0,ID:"558000",Name:"BubbleShoot",ShowName:"任务链1",Image:"",ImageGUID:"",Description:"测试任务链1描述",Datas:[{Count:0,Total:0,State:0,ParentTaskID:"558000",ID:"534001",Name:"ChangeStyle",ShowName:"任务链1-子任务1",Description:"测试子任务1描述",Image:"",ImageGUID:"",Rewards:{exp:100,money:100,items:[]},Datas:[{Count:0,ParentNodeID:"534001",ParentTaskID:"558000",ID:"5340011",Type:"OpenEditor",Guid:"123124",Total:5}]}]}};var x=function(a,b,c){if(a.Datas){for(var i in a.Datas){var d=a.Datas[i];if(!b)x(d,d);if(b)x(d,b,a)}}else{a.Count=0;a.ParentNodeID=c.ID;a.ParentTaskID=b.ID;s[a.Type]?"":s[a.Type]=[];s[a.Type].push({Guid:a.Guid,Step:a,TaskNode:c,Task:b});r[a.ID]=a}};var y=function(f,g){o.LoadTaskInfos(function(c){var d=c.arr_task_id;var e=c.arr_task_inst;(function(){for(var i in d){var a=d[i];var b=p[a];b.Count=0;b.State=0}}());(function(){for(var i in e){z(e[i])}}());o.GetTaskListDone(function(a){var b=a.task_id_array;for(var i in b){if(p[b[i]]){p[b[i]].Count=p[b[i]].Total;p[b[i]].State=3}}console.table(d);console.table(e);console.table(b);if(f)f(p)})},g)};var z=function(a){var b=a.task_id;var c=a.task_node_id;var d=p[b];if(!d)return;var e={};var f=0;for(var g in d.Datas){e=u[b][d.Datas[g].ID];if(d.Datas[g].ID===c){e.State=a.task_node_status;break}else{e.State=3;f++}}d.Count=f;d.State=1;if(a.finish===1){d.State=1}d.task_inst_id=a.id;t[a.task_id]=a.id;A.GetTaskSchedule(a.task_id)};var A={GetTaskDatas:function(f,g){if(JSON.stringify(p)!=="{}"){y(f,g);return}$.ajax({type:"GET",url:"/configs/TaskConfig.json",dataType:"json",success:function(a){if(!a.Tasks||a.Tasks.length===0){console.error("TaskJson配置错误");return}for(var i in a.Tasks){var b=a.Tasks[i];x(b);for(var j in b.Datas){var c=b.Datas[j];c.Type=b.Type;c.Total=c.Datas.length;u[c.ID]={};v[c.ID]={};p[c.ID]=c;for(var k in c.Datas){var d=c.Datas[k];d.Count=0;d.Total=d.Datas.length;d.ParentTaskID=c.ID;q[d.ID]=d;u[c.ID][d.ID]=d;v[c.ID][d.ID]={};for(var m in d.Datas){var e=d.Datas[m];v[c.ID][d.ID][e.ID]=e}}}}y(f,g)},error:function(a){console.error(a)}})},StartTask:function(c,d,e){c-=0;o.StartTask(c,function(a){y();var b={"TaskID":a.task_id,"NodeID":a.task_node_id,"NodeState":a.task_node_status,"TaskFinish":a.finish};if(d)d(b)},e)},StartTaskNode:function(c,d,e){o.StartTaskNode(t[c],function(a){y();var b={"TaskID":a.task_id,"NodeID":a.task_node_id,"NodeState":a.task_node_status,"TaskFinish":a.finish};if(d)d(b)},e)},EventTrack:function(e,f,g,h){var j=s[e];for(var i=0;i<j.length;i++){if(j[i].Task.State!==1)return;if(j[i].TaskNode.State!==1)continue;if(j[i].Step.Count>=j[i].Step.Total)continue;if(j[i].Guid===f||j[i].Guid===""){j[i].Step.Count+=1;(function(d){A.SetTaskSchedule(j[d].Step.ParentTaskID,function(c){if(j[d].Step.Count>=j[d].Step.Total){if(j[d].TaskNode.Count<j[d].TaskNode.Total)j[d].TaskNode.Count++;if(j[d].TaskNode.Count>=j[d].TaskNode.Total){(function(b){o.ProcessTask(j[b].Task.task_inst_id,function(a){if(j[b].Task.Count<j[b].Task.Total)j[b].Task.Count++;if(j[b].Task.Count>=j[b].Task.Total)j[b].Task.State=2;z(a);if(g)g(p)},h)}(d))}else{if(g)g(p)}}else{if(g)g(p)}},h)}(i))}else{if(g)g(p)}}},FinshTaskNode:function(b,c,d){o.FinishTask(t[b],function(a){z(a.inst);y();if(a.inst.task_node_status===0)A.StartTaskNode(b);if(c)c(a.reward)},d)},SetTaskSchedule:function(a,b,c){var d={};for(var e in v){d[e]={};for(var f in v[e]){d[e][f]={};for(var g in v[e][f])d[e][f][g]=v[e][f][g].Count}}var h=JSON.stringify(d);o.SetTaskSchedule(t[a],h,b,c)},GetTaskSchedule:function(f,g,h){o.GetTaskSchedule(t[f],function(a){if(!a||!a.schedule||a.schedule==="")return;var b=JSON.parse(a.schedule);if(!b)return;for(var c in b){for(var d in b[c]){for(var e in b[c][d])v[c][d][e].Count=b[c][d][e]}}if(g)g(b)},h)}};A.TaskDatas=p;A.NodeDatas=q;A.StepDatas=r;A.StepTypeDatas=s;A.accInstIDMap=t;A.TaskToNodeMap=u;A.TaskToNodeToStepMap=v;if(l&&n&&!l[n]){l[n]=A}}(Edbox,"Task"));(function(t,u){var v=Edbox.Api.NDR;var w=Edbox.ComponentRootPath+"ThirdParty/jszip/jszip.min.js";var x=Edbox.ComponentRootPath+"ThirdParty/jszip/jszip-utils.js";function GetDatasBaseInfo(a){var b=new Object();var c=a.Datas;for(var i=0;i<=c.length;i++){var d=c[i];if(d.Name==="BaseInfo"){for(var j=0;j<d.Datas.length;j++){var e=d.Datas[j];if(e.Name==="GameName"){GameName=e.Value;b.GameName=e.Value}if(e.Name==="Description"){Description=e.Value;b.Description=e.Value}if(e.Name==="CoverImage"){CoverImage=e.GUID;CoverImageValue=e.Value;b.CoverImage=e.GUID}}break}}return b}function GetGameBaseConfigJson(a){var b=new Object();var c=new Object();var d=GetDatasBaseInfo(a);c.AppName=d.GameName;c.Description=d.Description;c.CoverImage=d.CoverImage;c.Version="";c.LoadingImage="";c.GameTemplate="";c.IsStandAlone="true";b.AppliactionInfo=c;return JSON.stringify(b)}function GetAssetConfigJson(d){var e=new Object();e.Assets=new Array();var f=new Object();function load(a){if(a.Type.indexOf("Image")>=0||a.Type.indexOf("Audio")>=0){var b=new Object();b[a.ID]=a.Name;if(a.GUID&&a.GUID!==""){b.AssetGUID=a.GUID;b.AssetPath=""}else{b.AssetGUID="";b.AssetPath=a.Value}b.AssetType=a.Type;b.Platform="";e.Assets.push(b);f[a.ID]=b}if(a.Type.indexOf("Tab0")>=0&&a.Datas){for(var i=0;i<a.Datas.length;i++){var c=a.Datas[i];load(c)}}}function loadDatas(a){for(var i=0;i<a.Datas.length;i++){var b=a.Datas[i];load(b)}}loadDatas(d);return JSON.stringify(e)}function GetTextConfigJson(d){var e=new Object();e.Txts=new Array();var f=new Object();function load(a){if(a.Type.indexOf("Text")>=0){var b=new Object();b[a.ID]=a.Name;b.Text=a.Value;e.Txts.push(b);f[a.ID]=b}if(a.Type.indexOf("Tab0")>=0&&a.Datas){for(var i=0;i<a.Datas.length;i++){var c=a.Datas[i];load(c)}}}function loadDatas(a){for(var i=0;i<a.Datas.length;i++){var b=a.Datas[i];load(b)}}loadDatas(d);return JSON.stringify(e)}function GetDatasConfigJson(n){var o=new Object();o.Datas=new Array();function load(a,b){var c=a.Datas;if(!c)return;for(var i=0;i<c.length;i++){var d=c[i];if(b&&d.Type!=="Tab04"){continue}var e=JSON.parse(JSON.stringify(d));if(e.GUID&&e.GUID!==""){if(e.Value)delete e.Value}if(e.Type==="Select01"||e.Type==="Select02"||e.Type==="Select03"){if(e.Items.length>0){if(!e.Keys||e.Keys.length!==e.Items.length){e.Keys=new Array();for(var s=1;s<=e.Items.length;++s){e.Keys.push(s+"")}}if(!e.Key){if(e.Type==="Select03"){e.Key=new Array();if(e.Value===undefined){e.Value=new Array()}for(var y=0;y<e.Value.length;++y){var f=e.Items.indexOf(e.Value[y]);if(f>-1){e.Key.push(e.Keys[f])}}}else{if(e.Value===undefined){if(e.Items.length>0){e.Value=e.Items[0]}else{console.log(e.ID+"-- "+e.Type+" Items is Empty")}}var g=e.Items.indexOf(e.Value);if(g>-1){e.Key=e.Keys[g]}else if(e.Keys.length>0){e.Key=e.Keys[0]}}}}}var h=Object.keys(e);var k=new Array("Name","ResourceName");for(var j=0;j<h.length;j++){var l=h[j];if(e.Type==="Tab03"&&l==="EditableContent"){if(e.EditableContent!==""){e.ShowName=e.EditableContent}continue}else if(e.Type==="Tab03"&&l==="ShowName"){continue}else if(e.Type==="Tab04"&&l==="ShowName"){continue}else if(e.Type==="Tab02"&&e.Class==="ProblemLibrary"&&l==="ShowName"){continue}else if(e.Type.indexOf("Tab0")===0&&l==="Template_Override"){e.Template_Override.TemplateID=e.ID;e.Template_Override.ID=e.ID+"_Template";o.Datas.push(e.Template_Override);continue}else if(l.indexOf("_Override")>0){if(typeof e[l]!=="string"||e[l]!==""){var m=l.replace("_Override","");e[m]=e[l];k.push(m)}continue}if(k.indexOf(l)<0){if(l.indexOf("Name")>=0){delete e[l]}else if(l.indexOf("Text")>=0){delete e[l]}}}if(e.Type.indexOf("Tab0")===0){if(e.Template){if(e.Type!=="Tab02"||e.Class!=="ProblemLibrary"){delete e.Template}}if(e.Template_Override){delete e.Template_Override}if(e.Class&&e.Class==="LevelEdit"){if(e.Type==="tab01"||e.Type==="tab02"){if(e.Editable===undefined){e.Editable=true}}}if(e.Type==="Tab03"){if(e.Editable===undefined){e.Editable=a.Editable}}load(e);delete e.Datas;if(e.Type==="Tab03"){if(e.Recordable!==undefined){if(!e.Recordable)continue}}else{if(!e.Editable)continue}}else if(e.Datas){load(e,true);delete e.Datas}e.ParantID=a.ID;e.ParantIndex=i;o.Datas.push(e)}}load(n);o.StaticData=n.StaticData;if(!o.StaticData){o.StaticData=new Object();o.StaticData.ID="StaticData";o.StaticData.Name="StaticData";o.StaticData.Type="StaticData";o.StaticData.ShowName="静态数据";o.StaticData.Datas=new Array()}return JSON.stringify(o)}var z={PackageZip:null,UploadToNDR:function(k,l,m,n,o){if(!k){if(o)o("No Data")}var p=Edbox.EbUserId;var q={};var r={};var s="application/zip";v.GetSession(p,function(j){function UploadPackages(){var g=Object.keys(k);var h=0;var i=g[h];UploadPkg2CS(k[i],i,onUploadPkgSuc,onUploadPkgErr);function onUploadPkgSuc(){console.log("Upload "+g[h]+" Package Success.");h++;if(h===g.length){PostToNDR()}else{i=g[h];UploadPkg2CS(k[i],i,onUploadPkgSuc,onUploadPkgErr)}}function onUploadPkgErr(a){if(o){o("Upload "+g[h]+" Package Failed :"+a)}}function upCsProgress(a){a=Math.floor(a/100+h)*(90/g.length);if(m)m(a,"Upload "+g[h]+" Package");console.log("Upload "+g[h]+" Package :"+a+"%")}function UploadPkg2CS(d,e){upCsProgress(1);var f=e+".edpackage";Edbox.Api.CS.UpLoadToCS(j.session_id,j.dist_path,f,d,function(a,b,c){upCsProgress(2+a*98/100)},function(a){if(e===l){r={'size':a.inode.size,'location':'${ref-path}'+a.path,'format':s,'md5':a.inode.md5}}q[e]={'size':a.inode.size,'location':'${ref-path}'+a.path,'format':s,'md5':a.inode.md5};upCsProgress(100);onUploadPkgSuc()},o)}}function upNdrProgress(a){if(m)m(a,"UpLoad To NDR.")}function PostToNDR(){upNdrProgress(91);var b={'title':"edpackage",'preview':{'png':""},'language':'zh-CN','identifier':j.uuid,'life_cycle':{'version':'1.0','status':'ONLINE','enable':true,'creator':p,'publisher':'NetDragon'},'categories':{"assets_type":[{'taxoncode':'$RA0106'},{'taxoncode':'RT022'},{'taxoncode':'$RA1201'}]},'tech_info':q,"coverages":[{"target_type":"App","target":"cf7ce674-9dde-4bb3-8f54-1f1ab4f2bcf0","target_title":"EdBox Library","strategy":"OWNER"}]};b.tech_info.source=r;b.tech_info.href=r;v.Post(j.uuid,b,function(a){upNdrProgress(100);if(n)n(a.identifier)},o)}UploadPackages()},o)},UpLoadPackages:function(c,d,e,f,g){if(!c){if(g)g("Datas is Null or Empty!");return}var h=Object.keys(c);if(h.length===0){if(g)g("Datas is Null or Empty!");return}if(!c[d]){if(g)g("Default Language is Null !");return}var i=0;var j={};function onBlobSuc(a,b){j[b]=a;i++;if(i===h.length){z.UploadToNDR(j,d,e,f,g)}else{k=h[i];z.GetPackageBlob(c[k],k,onBlobSuc,onBlobErr)}}function onBlobErr(a){alert("GetPackageBlob "+a+" Failure")}var k=h[i];z.GetPackageBlob(c[k],k,onBlobSuc,onBlobErr)},UpLoadEditorPackage:function(c,d,e,f){z.GetPackageBlob(c,Edbox.Language,function(a){var b={};b[Edbox.Language]=a;z.UploadToNDR(b,Edbox.Language,d,e,f)},f)},GetPackageBlob:function(c,d,e,f){Require([w,x],function(){var b=new JSZip();b.file('package/Config/GameBaseConfig.json',GetGameBaseConfigJson(c));b.file('package/Config/DatasConfig.json',GetDatasConfigJson(c));b.file('package/Config/AssetConfig.json',GetAssetConfigJson(c));b.file('package/Config/TxtConfig.json',GetTextConfigJson(c));if(c.StaticData&&c.StaticData.Redirect){b.file('package/Config/Redirect.json',JSON.stringify(c.StaticData.Redirect))}b.generateAsync({type:"blob"}).then(function(a){if(e){e(a,d)}else{f(d)}})})},GetPackage:function(h,i,j,k){z.Get(h,function(d){var e="source";if(Edbox.Access===1){if(d.tech_info[Edbox.Language]){e=Edbox.Language}}var f=d.tech_info[e].location.replace('${ref-path}','');var g=Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static"+f;Require([w,x],function(){JSZipUtils.getBinaryContent(g,function(b,c){if(b&&j)j(b);JSZip.loadAsync(c).then(function(a){z.PackageZip=a;if(i)i()})})})},j,k)},GetPackageLanage:function(f,g){z.Get(f,function(a){if(a.tech_info[Edbox.Language]){if(g)g(Edbox.Language);return}var b=a.tech_info.source.location;var c=b.lastIndexOf("/");var d=b.lastIndexOf(".edpackage");if(c<0||d<0){if(g)g(null);return}var e=b.slice(c+1,d);if(g)g(e)},function(){if(g)g(null)},true)},GetConfig:function(d,e,f,g){if(!g){g=Edbox.PackageGuid}if(z.PackageZip===null){if(g){z.GetPackage(g,function(a){z.GetConfig(d,e,f,g)},f,true);return}if(f)f("Package Not Load");return}var h=z.PackageZip.file('package\\Config\\'+d+'.json');if(!h)h=z.PackageZip.file('package/Config/'+d+'.json');if(!h)h=z.PackageZip.file('package\\\\Config\\\\'+d+'.json');if(!h)h=z.PackageZip.file('package//Config//'+d+'.json');if(h){h.async('string').then(function(a){var b="";var c=null;if(a){b=a.toString()}else{if(f)f("Buffer Error");return}if(b){c=JSON.parse(b)}else{if(f)f("Content Not A Json");return}if(c){if(e)e(c)}else{if(f)f("Content Not A Json");return}})}else if(d!=="DatasConfig"){z.GetConfig("DatasConfig",function(a){if(a&&a.StaticData&&a.StaticData[d]){if(e)e(a.StaticData[d])}else{if(f)f("Config Not Find")}},f);return}else{if(f)f("Config Not Find");return}},Get:function(b,c,d,e){if(e){v.Get(b,c,d);return}var f='/v0.6/assets/'+b+"?include=TI";var g="https://"+Edbox.GetHost("NDR")+f;$.ajax({url:g,async:false,type:"GET",dataType:"json",success:function(a){if(c)c(a)},error:function(a){if(d)d(a)}})}};if(t&&u&&!t[u]){t[u]=z}}(Edbox,"Package"));(function(r,s){var t={ConfigGuid:{QA:"681fd75a-e77b-afcb-481c-39a15ccef521",Dev:"bcbdae7c-d1f0-d1cb-09d2-b0e2ded89a5a",Feature:"a0fabf0c-4988-2ad9-7c4c-bbf80c3890d9",CN:"d017e42d-6c6c-6982-14d5-a425c4e23ef6",BetaCN:"c1054e19-b7e3-313f-ef3d-4e34eb6e5aac",HK:"",US:"d05ceb51-f4b4-4938-f225-2ab43fa93881",Beta:"5ca2fc3c-dca6-da00-d572-18df84d3c676"},ProgramGuid:{QA:"b31f7d3f-f5fe-dbb3-12da-c9c2ffcc8d8f",Dev:"3627f47c-db07-b36c-29e5-f9011bbe441a",Feature:"eadb8780-3a1a-8858-f819-120e63b65cbd",CN:"19fba8cd-eb6c-e030-f7ae-2f136672d5a4",BetaCN:"9ac7baa7-9c09-c69e-f2c0-cbbbf2c60763",HK:"",US:"5a071066-be46-ce3d-df92-4be16561283b",Beta:"1f892a14-b4d5-aee0-8d9e-232e41b92ba4"},Html5PlayerId:{QA:"6eb4c904-c320-5679-28ec-78d8864679c4",Dev:"fb42879f-d277-49cc-c153-caefa22f3267",Feature:"823efda6-d3f1-e261-e34f-8b485982dfd6",CN:"4021ec0a-7741-320b-a8ae-219b6f2fc5a4",BetaCN:"7d4cf2f9-263b-94c2-630e-840f991f0165",HK:"",US:"bcf5034f-22e3-343f-5c24-9d43d2da150d",Beta:"269cf52f-e4c8-25bc-0b57-175f5560bf05"},ApkToolId:{QA:"291888de-ccbc-41f1-909a-62935f3142f4",Dev:"a39415cb-1009-80e6-e13e-ce53c9d2925d",Feature:"44167a59-64f8-bd63-67eb-d89ba353b6f5",CN:"92e5a457-0e4f-60fd-ecfa-a3cd3f8ff37c",BetaCN:"b227fddd-f5dc-5fd9-982b-d6fbd3af1588",HK:"",US:"41143802-57a4-3208-e027-7a4eedab1083",Beta:"1ef2649e-57eb-1d24-6256-679f3cf6f981"},BaseServiceExeId:{QA:"a5b082d8-a968-240b-d376-65eb7b87d5e7",Dev:"b2dd0929-6f5e-0799-d4f4-64a806ceba5b",Feature:"835ba3df-8bab-0ba6-771e-4458abfe4b7c",CN:"09df2ad0-a14c-89c1-995e-edbefa5c266c",BetaCN:"364bbc6c-ad5e-a1c8-75ba-ea06ce9defd0",HK:"",US:"a7913bc2-6874-e0d2-5d46-c4dc4e210e53",Beta:"dbda1efd-219e-e641-b750-13eb050f8486"}};GetMessageData=function(a,b,c){var d=Edbox.Encode(JSON.stringify(b));var e={};e.ConfigGuid=t["ConfigGuid"][Edbox.ServerKey];e.WebServer=Edbox.Protocol+"://"+Edbox.GetHost("Login")+"/";e.ProgramGuid=t["ProgramGuid"][Edbox.ServerKey];e.ApkToolId=t["ApkToolId"][Edbox.ServerKey];e.Html5PlayerId=t["Html5PlayerId"][Edbox.ServerKey];e.Language=Edbox.Language;var f={};f.TaskId=a;f.TaskConfigData=e;f.Code=c;f.Data=d;return JSON.stringify(f)};var u={CheckEbService:function(a,b){if(Edbox.WebSocket.IsOpen){a("")}else{u.GetProgramLocation(a,b)}},GetProgramLocation:function(c,d){var f="/edbox/v1.0/package/lastest_version";var g={pkg_guid:t["BaseServiceExeId"][Edbox.ServerKey],pkg_version:"1.0.0",pkg_platform:"PC",language:"zh-CN"};$.ajax({url:Edbox.Protocol+"://"+Edbox.GetHost("Login")+f,type:"post",data:JSON.stringify(g),contentType:'application/x-www-form-urlencoded',success:function(a){var b=JSON.parse(a);if(b&&b.data){c(b.data.location)}else{d("GetProgramLocation failed")}},error:function(e){if(d){d(e)}}})},SearchBaiduImage:function(g,h,i){u.BaseServiceCheck("SEARCHERROR",function(){var d=g.taskId;var e={};e.Word=g.word;e.Page=g.pageIndex;var f=GetMessageData(d,e,"SearchBaiduImage");Edbox.WebSocket.Send(f);Edbox.WebSocket.SearchBaiduImageResultCbDic.Set(d,function(a,b){if(a===d){if(b.Code==="SUCCESS"){var c={};c.Code=b.Code;c.Message=JSON.parse(b.Message);if(h)h(c)}else{var c={};if(navigator&&navigator.onLine){c.Code=b.Code}else{c.Code="NETWORK_OFFLINE"}c.Message=Edbox.GetTip("ERROR_"+c.Code);if(i)i(c)}}})},i)},SearchGoogleImage:function(o,p,q){u.BaseServiceCheck("SEARCHERROR",function(){var j=o.taskId;var k=o.word;if(!k){k=""}else{k=encodeURIComponent(k)}var l=10;var m=(o.pageIndex-1)*l+1;var n={url:"https://www.googleapis.com/customsearch/v1?q="+k+"&searchType=image&num="+l+"&start="+m+"&key=AIzaSyBmOs6ujOAW-s8YrU8lBPhWbw-mDA_jJWM&cx=000994457181477333244:ucqd3wlog3g",async:true,type:"GET",data:"",dataType:"json",success:function(e){console.log("ans :"+e);var f=new Array();for(var i=0;i<e.items.length;i++){f.push(e.items[i].link)}var g={};g.Urls=f;g.Refer="";var h=GetMessageData(j,g,"RequestBase64Image");Edbox.WebSocket.Send(h);Edbox.WebSocket.RequestBase64ImageCbDic.Set(j,function(a,b){if(a===j){if(b.Code==="SUCCESS"){var c={};c.Code=b.Code;var d={};d.total=e.searchInformation.totalResults;d.imageDatas=JSON.parse(b.Message);c.Message=d;if(p)p(c)}else{var c={};if(navigator&&navigator.onLine){c.Code=b.Code}else{c.Code="NETWORK_OFFLINE"}c.Message=Edbox.GetTip("ERROR_"+c.Code);if(q)q(c)}}})},error:function(a){var b={};if(navigator&&navigator.onLine){b.Code="SEARCHERROR"}else{b.Code="NETWORK_OFFLINE"}b.Message=Edbox.GetTip("ERROR_"+b.Code);if(q)q(b);console.log("SearchGoogleImage err :"+a)}};$.ajax(n)},q)},OpenScreenShooter:function(f,g,h){u.BaseServiceCheck("SCREENSHOOTER",function(){var d=f.taskId;var e=GetMessageData(d,"","ScreenShot");Edbox.WebSocket.Send(e);Edbox.WebSocket.OpenScreenShooterCbDic.Set(d,function(a,b){if(a===d){if(b.Code==="SUCCESS"){var c={};c.Code=b.Code;c.Message=b.Message;if(g)g(c)}else{var c={};if(navigator&&navigator.onLine){c.Code=b.Code}else{c.Code="NETWORK_OFFLINE"}c.Message=Edbox.GetTip("ERROR_"+c.Code);if(h)h(c)}}})},h)},BaseServiceCheck:function(c,d,f){if(!(navigator&&navigator.onLine)){var g={};g.Code="NETWORK_OFFLINE";g.Message=Edbox.GetTip("ERROR_"+g.Code);if(f)f(g);return}u.CheckEbService(function(a){if(a!==""){var b={};b.Code="UNINSTALL";b.Message=a;if(f)f(b)}else{if(d)d()}},function(e){var a={};if(navigator&&navigator.onLine){a.Code=c}else{a.Code="NETWORK_OFFLINE"}a.Message=Edbox.GetTip("ERROR_"+a.Code);if(f)f(a)})}};if(r&&s&&!r[s]){r[s]=u}}(Edbox,"EbService"));(function(d,e){var g={Ws:null,IsOpen:false,IsBreak:false,LastMessage:"",InitMessage:"",OpenGamePlayProgressCallback:null,OpenGamePlayResultCallback:null,OpenGameEditorProgressCallback:null,OpenGameEditorResultCallback:null,ExportEditorResultCbDic:new Dictionary(),ExportEditorProgressCbDic:new Dictionary(),ExportApkResultCbDic:new Dictionary(),ExportApkProgressCbDic:new Dictionary(),ExportExeResultCbDic:new Dictionary(),ExportExeProgressCbDic:new Dictionary(),ExportH5GameResultCbDic:new Dictionary(),SearchBaiduImageResultCbDic:new Dictionary(),RequestBase64ImageCbDic:new Dictionary(),OpenScreenShooterCbDic:new Dictionary(),Connect:function(){if(Edbox.Platform.IsIPhone||Edbox.Platform.IsAndroid||Edbox.Platform.IsIpad||Edbox.Platform.IsIOS||Edbox.Platform.IsMac){return}var c=window.WebSocket||window.MozWebSocket||window.webSocket;g.Ws=new c('ws://127.0.0.1:8181/');g.Ws.onmessage=function(a){if(a.data){var b=JSON.parse(a.data);if(b){if(b.Code==="OpenGamePlayProgress"&&g.OpenGamePlayProgressCallback){g.OpenGamePlayProgressCallback(b.TaskId,JSON.parse(b.Data))}if(b.Code==="OpenGamePlayResult"&&g.OpenGamePlayResultCallback){g.OpenGamePlayResultCallback(b.TaskId,JSON.parse(b.Data))}if(b.Code==="OpenEditorProgress"&&g.OpenGameEditorProgressCallback){g.OpenGameEditorProgressCallback(b.TaskId,JSON.parse(b.Data))}if(b.Code==="OpenEditorResult"&&g.OpenGameEditorResultCallback){g.OpenGameEditorResultCallback(b.TaskId,JSON.parse(b.Data))}if(b.Code==="ExportEditorProgress"&&g.ExportEditorProgressCbDic.ContainsKey(b.TaskId)){var f=g.ExportEditorProgressCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data))}if(b.Code==="ExportEditorResult"&&g.ExportEditorResultCbDic.ContainsKey(b.TaskId)){var f=g.ExportEditorResultCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data));g.ExportEditorResultCbDic.Remove(b.TaskId);g.ExportEditorProgressCbDic.Remove(b.TaskId)}if(b.Code==="ExportApkProgress"&&g.ExportApkProgressCbDic.ContainsKey(b.TaskId)){var f=g.ExportApkProgressCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data))}if(b.Code==="ExportApkResult"&&g.ExportApkResultCbDic.ContainsKey(b.TaskId)){var f=g.ExportApkResultCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data));g.ExportApkResultCbDic.Remove(b.TaskId);g.ExportApkProgressCbDic.Remove(b.TaskId)}if(b.Code==="ExportPCGameProgress"&&g.ExportExeProgressCbDic.ContainsKey(b.TaskId)){var f=g.ExportExeProgressCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data))}if(b.Code==="ExportPCGameResult"&&g.ExportExeResultCbDic.ContainsKey(b.TaskId)){var f=g.ExportExeResultCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data));g.ExportExeResultCbDic.Remove(b.TaskId);g.ExportExeProgressCbDic.Remove(b.TaskId)}if(b.Code==="ExportH5GameResult"&&g.ExportH5GameResultCbDic.ContainsKey(b.TaskId)){var f=g.ExportH5GameResultCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data));g.ExportH5GameResultCbDic.Remove(b.TaskId)}if(b.Code==="SearchBaiduImageResult"&&g.SearchBaiduImageResultCbDic.ContainsKey(b.TaskId)){var f=g.SearchBaiduImageResultCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data));g.SearchBaiduImageResultCbDic.Remove(b.TaskId)}if(b.Code==="RequestBase64ImageResult"&&g.RequestBase64ImageCbDic.ContainsKey(b.TaskId)){var f=g.RequestBase64ImageCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data));g.RequestBase64ImageCbDic.Remove(b.TaskId)}if(b.Code==="ScreenShotResult"&&g.OpenScreenShooterCbDic.ContainsKey(b.TaskId)){var f=g.OpenScreenShooterCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data));g.OpenScreenShooterCbDic.Remove(b.TaskId)}}}};g.Ws.onopen=function(){g.IsOpen=true};g.Ws.onclose=function(){g.IsOpen=false;g.IsBreak=true;g.Ws=null};g.Ws.onerror=function(){g.IsOpen=false;g.Ws.close()}},Send:function(a){if(!g.IsOpen||g.Ws===null){g.Connect();g.LastMessage=a}else{if(g.InitMessage!==""){g.Ws.send(g.InitMessage);g.InitMessage="";setTimeout(function(){g.Ws.send(a)},500)}else{g.Ws.send(a)}}},CheckIsOpen:function(a){if(a){if(g.IsOpen){a(true)}else{g.Connect();setTimeout(function(){a(g.IsOpen)},1000)}}},SendInitMessage:function(a){if(!g.IsOpen||g.Ws===null){g.InitMessage=a}else{g.Ws.send(a)}},InArray:function(a,b){for(var i=0;i<a.length;i++){if(a[i]===b){return true}}return false},CheckStatus:function(){if(g.IsOpen&&g.Ws){if(g.LastMessage!==""){g.Ws.send(g.LastMessage);g.LastMessage=""}}},Init:function(){g.Connect();setInterval(function(){g.CheckStatus()},1000)}};g.Init();if(d&&e&&!d[e]){d[e]=g}}(Edbox,"WebSocket"));(function(g,h){var j=Edbox.ComponentRootPath+"ThirdParty/mqtt/Paho-Mqtt.js";var k={MqttConfig:{QA:{IP:"mqtt.edbox-qa.101.com",Port:"8083",Account:"edbox_client_inland",Password:"kkclient2018.inland"},Dev:{IP:"mqtt.edbox-dev.101.com",Port:"8083",Account:"admin",Password:"public"},Feature:{IP:"mqtt.edbox-feature.101.com",Port:"8083",Account:"",Password:""},CN:{IP:"mqtt.edbox-cn.101.com",Port:"8082",Account:"edbox_client_inland",Password:"kkclient2018.inland"},US:{IP:"mqtt.edbox.101.com",Port:"8082",Account:"edbox_client",Password:"kkclient2018"},BetaCN:{IP:"mqtt.edbox-beta-cn.101.com",Port:"8082",Account:"edbox_client_beta_cn",Password:"kkclient2018.beta_cn"},Beta:{IP:"mqtt.edbox-beta.101.com",Port:"8082",Account:"edbox_client_beta_en",Password:"kkclient2018.beta_en"}}};var l={client:null,mqttStatus:false,options:{},onConnect:function(){mqttStatus=true;if(options&&options.success){options.success()}},onFailure:function(){mqttStatus=false;if(options&&options.error){options.error()}},onConnectionLost:function(a){if(a.errorCode!==0){console.log("onConnectionLost:"+a.errorMessage);console.log("连接已断开");mqttStatus=false;if(options&&options.connectLost){options.connectLost(a.errorMessage)}}},onMessageArrived:function(a){if(options&&options.onMessage){options.onMessage(a)}if(options&&options.onMessageDic){for(var i=0;i<options.onMessageDic.Keys.length;i++){var b=options.onMessageDic.Keys[i];var c=options.onMessageDic.Get(b);if(c)c(a)}}},sendMessage:function(a,b){if(mqttStatus){var c=new Paho.MQTT.Message(JSON.stringify(b));c.destinationName=a;if(Edbox.Mqtt.client&&mqttStatus){Edbox.Mqtt.client.send(c);return true}}return false},subscribe:function(a,b){if(Edbox.Mqtt.client&&mqttStatus){Edbox.Mqtt.client.subscribe(a,{qos:b||0});return true}return false},unsubscribe:function(a){if(Edbox.Mqtt.client&&mqttStatus){Edbox.Mqtt.client.unsubscribe(a);return true}return false},reconnect:function(){if(Edbox.Mqtt.client&&options){Edbox.Mqtt.client.connect({onSuccess:Edbox.Mqtt.onConnect,onFailure:Edbox.Mqtt.onFailure,userName:options.userName||'admin',password:options.password||'password',useSSL:Edbox.Protocol==='https'});return true}return false},init:function(a){Require([j],function(){if(a){options=a;Edbox.Mqtt.client=new Paho.MQTT.Client(options.ip||'127.0.0.1',Number(options.port||61623),options.id||'0');Edbox.Mqtt.client.connect({onSuccess:Edbox.Mqtt.onConnect,onFailure:Edbox.Mqtt.onFailure,userName:options.userName,password:options.password,password:options.password,useSSL:Edbox.Protocol==='https'});Edbox.Mqtt.client.onConnectionLost=Edbox.Mqtt.onConnectionLost;Edbox.Mqtt.client.onMessageArrived=Edbox.Mqtt.onMessageArrived}})},ConnectMqtt:function(a,b){if(Edbox.Mqtt.client){if(options.onMessageDic.ContainsKey(a)){var v=options.onMessageDic.Get(a);v=b}else{options.onMessageDic.Set(a,b)}if(mqttStatus){Edbox.Mqtt.subscribe(a)}else{options.success=function(){Edbox.Mqtt.subscribe(a)};Edbox.Mqtt.reconnect()}}else{var c=Edbox.Protocol==='https';var d=k["MqttConfig"][Edbox.ServerKey];var e=d["Port"];if(c){e=8086}var f=new Dictionary();f.Set(a,b);Edbox.Mqtt.init({id:'mqttjs_'+Math.random().toString(16).substr(2,8),ip:d["IP"],port:e,userName:d["Account"],password:d["Password"],success:function(){Edbox.Mqtt.subscribe(a)},error:function(){console.log("连接已断开")},connectLost:function(){Edbox.Mqtt.reconnect()},onMessageDic:f})}}};if(g&&h&&!g[h]){g[h]=l}}(Edbox,"Mqtt"));(function(X,Y){var Z=null;var ba={GetChainColiderPoints:function(x,y,z,A,B,C){if(!x||x===''||y<=0||z<=0){if(C)C('参数有误');return}if(!A||A<=0){A=50}var D=y/A;var E=z/A;if(D===0||E===0){if(C)C('参数有误');return}function getDist(a,b){var c=a.x-b.x;var d=a.y-b.y;return Math.sqrt(c*c+d*d)}function sort(a){for(var j=0;j<a.length-1;j++){for(var i=0;i<a.length-1-j;i++){if(a[i]>a[i+1]){var b=a[i];a[i]=a[i+1];a[i+1]=b}}}}function contact(a,b,c,d){var e=a.Get(b[c]);if(e){for(var i=0;i<e.length;i++){d.push(e[i])}}}function buildPoint(a,b,c,d,e){e.push(d);var f=b.Get(d.x);var g=new Array();for(var i=0;i<f.length;i++){if(f[i].x===d.x&&f[i].y===d.y){continue}g.push(f[i])}b.Set(d.x,g);var h=new Array();contact(b,a,c,h);contact(b,a,c-1,h);contact(b,a,c-2,h);contact(b,a,c-3,h);contact(b,a,c+1,h);contact(b,a,c+2,h);contact(b,a,c+3,h);if(h.length===0){return}var j=9999999;var k=h[0];for(var i=0;i<h.length;i++){var p=h[i];if(p.x===d.x&&p.y===d.y){continue}var l=getDist(p,d);if(l<j){j=l;k=p}}c=a.indexOf(k.x);buildPoint(a,b,c,k,e)}var F=new Image();F.setAttribute('crossorigin','anonymous');F.onload=function(){if(!Z){Z=document.createElement("canvas")}Z.setAttribute("width",y);Z.setAttribute("height",z);var a=Z.getContext("2d");a.drawImage(this,0,0,y,z);var b=new Dictionary();var c=new Array();for(var i=0;i<A+1;i++){var d=true;for(var j=0;j<A+1;j++){var e=E*i;var f=D*j;var g=a.getImageData(f,e,1,1);var h=g.data;if(h[3]>0){var l=false;if(j<A){var m=D*(j+1);var n=a.getImageData(m,e,1,1);var o=n.data;if(o[3]===0){l=true}}if(i===0||i===A||j===A||d||l){d=false;var p=new Object();p.x=f;p.y=e;if(!b.ContainsKey(f)){var q=new Array();q.push(p);b.Set(f,q);c.push(f)}else{var q=b.Get(f);q.push(p)}}}else{d=true}}}for(var i=0;i<A+1;i++){var d=true;for(var j=0;j<A+1;j++){var f=D*i;var e=E*j;var g=a.getImageData(f,e,1,1);var h=g.data;if(h[3]>0){var l=false;if(j<A){var r=E*(j+1);var n=a.getImageData(f,r,1,1);var o=n.data;if(o[3]===0){l=true}}if(i===0||i===A||j===A||d||l){d=false;var p=new Object();p.x=f;p.y=e;if(!b.ContainsKey(f)){var q=new Array();q.push(p);b.Set(f,q);c.push(f)}else{var q=b.Get(f);var s=false;for(var k=0;k<q.length;k++){if(q[k].x===f&&q[k].y===e){s=true;continue}}if(!s){q.push(p)}}}}else{d=true}}}sort(c);var t=new Array();var u=0;var v=b.Get(c[u]);if(v&&v.length>0){var w=v[0];buildPoint(c,b,u,w,t)}if(B)B(t)};F.src=x},GetPolygonColiderPoints:function(O,P,Q,R,S,T){if(!O||O===''||P<=0||Q<=0){if(T)T('参数有误');return}if(!R||R<=0){R=50}var U=P/R;U=Math.floor(U*1000)/1000;var V=Q/R;V=Math.floor(V*1000)/1000;if(U===0||V===0){if(T)T('参数有误');return}function sort(a){for(var j=0;j<a.length-1;j++){for(var i=0;i<a.length-1-j;i++){if(a[i]>a[i+1]){var b=a[i];a[i]=a[i+1];a[i+1]=b}}}}function sortByX(a){for(var j=0;j<a.length-1;j++){for(var i=0;i<a.length-1-j;i++){if(a[i].x>a[i+1].x){var b=a[i];a[i]=a[i+1];a[i+1]=b}}}}function filterPoints(a,b){sort(a);var c=new Array();for(var i=1;i<a.length-1;i++){var d=a[i];var e=b.Get(d);if(e.length%2===0){var f=a[i-1];var g=a[i+1];if(b.ContainsKey(f)&&b.ContainsKey(g)){var h=b.Get(f);var k=b.Get(g);if(h.length===k.length&&e.length===k.length){var l=false;for(var j=0;j<e.length;j++){if(j%2===0){var m=k[j].x-e[j].x;var n=e[j].x-h[j].x;var o=k[j+1].x-e[j+1].x;var p=e[j+1].x-h[j+1].x;if((n>0&&o>0&&m<=0&&p<=0)||(n<0&&o<0&&m>=0&&p>=0)){continue}var q=m-n;var r=o-p;if(m===0&&n===0&&o===0&&p===0){l=true;break}if(((m*n>0&&o*p>0)||(m*n<=0&&o*p<=0))&&Math.abs(q)<=0.5*U&&Math.abs(r)<=0.5*U){l=true;break}else{continue}}}if(l){c.push(d)}}else{}}}else{c.push(d)}}for(var i=0;i<c.length;i++){b.Remove(c[i])}}function searchMatch(a,b,c,j,d,e,f,g){if(e>3){return}var h=a[d+e];if(h){var i=b.Get(h);if(i){var l=false;var n=i.length-1;var o=0;var p=false;var q=false;for(var k=0;k<i.length-1;k++){var r=false;for(var m=0;m<g.length;m++){if(g[m].x===i[k].x&&g[m].y===i[k].y){r=true;break}}if(r){continue}if(c[j].x<i[k+1].x&&c[j+1].x>i[k].x){if(n>k&&!p){n=k}if(o<k+1&&!q){o=k+1}if(n!=o){l=true}else{l=false}if(c[j].x>=i[k].x){p=true}if(c[j+1].x<=i[k+1].x){q=true}}}if(!l){searchMatch(a,b,c,j,d,e+1,f,g)}else{if(l){var s=new Array;s.push(c[j]);s.push(c[j+1]);s.push(i[n]);s.push(i[o]);g.push(i[n]);g.push(i[o]);f.push(s)}}}}}var W=new Image();W.setAttribute('crossorigin','anonymous');W.onload=function(){if(!Z){Z=document.createElement("canvas")}Z.setAttribute("width",P);Z.setAttribute("height",Q);var b=Z.getContext("2d");b.drawImage(this,0,0,P,Q);var c=new Dictionary();var d=new Array();for(var i=0;i<R+1;i++){var e=true;for(var j=0;j<R+1;j++){var f=Math.floor(V*i*1000)/1000;var g=Math.floor(U*j*1000)/1000;var h=b.getImageData(g,f,1,1);var l=h.data;if(l[3]>0){var m=false;if(j<R){var n=U*(j+1);var o=b.getImageData(n,f,1,1);var p=o.data;if(p[3]===0){m=true}}if(i===0||i===R||j===R||e||m){e=false;var q=new Object();q.x=g;q.y=f;if(!c.ContainsKey(f)){var r=new Array();r.push(q);c.Set(q.y,r);d.push(q.y)}else{var r=c.Get(q.y);r.push(q);sortByX(r);c.Set(q.y,r)}}}else{e=true}}}var s=new Array();filterPoints(d,c);var d=new Array();for(var i=0;i<c.Keys.length;i++){var t=c.Keys[i];d.push(t)}filterPoints(d,c);for(var i=0;i<s.length;i++){c.Remove(s[i])}var d=new Array();for(var i=0;i<c.Keys.length;i++){var t=c.Keys[i];d.push(t)}sort(d);for(var i=1;i<d.length-1;i++){var u=c.Get(d[i]);var v=c.Get(d[i+1]);if(u.length>=4&&v.length>=4&&u.length%2===0&&v.length%2===0){var w=u[u.length/2-1];var x=u[u.length/2];for(var j=0;j<v.length-1;j++){var y=v[j];var z=v[j+1];if(!w||!x||!y||!z){var a=''}if(Math.abs(w.x-y.x)<2*U&&Math.abs(z.x-x.x)<2*U){var A=new Array();for(var k=0;k<u.length;k++){if(k!=u.length/2-1&&k!=u.length/2){A.push(u[k])}}var B=new Array();for(var k=0;k<v.length;k++){if(k!=j&&k!=j+1){B.push(v[k])}}c.Set(d[i],A);c.Set(d[i+1],B);break}}}}for(var i=0;i<d.length;i++){var u=c.Get(d[i]);if(u.length===3){u.splice(1,1);c.Set(d[i],u)}}var C=new Array;var D=0;var E=new Array;for(var i=0;i<d.length-1;i++){var t=d[i];var u=c.Get(t);var F=d[i+1];var G=c.Get(F);if(u.length===2){E.push(u[0]);E.push(u[1]);if(u[0].x<=G[G.length-1].x){var H=new Array;H.push(u[0]);H.push(u[1]);H.push(G[0]);H.push(G[G.length-1]);C.push(H)}}else if(u.length>2){if(u.length===4&&G.length===2){var I=u.length-1;var J=0;var K=false;var L=false;var M=false;for(var j=0;j<u.length-1;j++){E.push(u[j]);if(u[j].x<G[1].x&&u[j+1].x>G[0].x){if(I>j&&!L){I=j}if(J<j+1&&!M){J=j+1}if(I!=J){K=true}else{K=false}if(u[j].x<=G[0].x){L=true}if(u[j+1].x>=G[1].x){M=true}}}if(K){var H=new Array;H.push(u[I]);H.push(u[J]);H.push(G[0]);H.push(G[1]);C.push(H);continue}}var N=new Array;for(var j=0;j<u.length;j++){if(j%2==0&&j+1<=u.length-1){searchMatch(d,c,u,j,i,1,C,N)}}}}if(S)S(C,this)};W.src=O}};if(X&&Y&&!X[Y]){X[Y]=ba}}(Edbox,"ImageCollider"));(function(l,m){var o=Edbox.ComponentRootPath+"ThirdParty/js-xlsx/xlsx.full.min.js";var p=Edbox.ComponentRootPath+"Edbox_FileSaver/js/FileSaver.min.js";var q={"SimplifiedChinese":"Module.xlsx","English":"Module.xlsx","TraditionalChinese":"Module.xlsx","TraditionalChinese_TW":"Module.xlsx"};var r={XlsxToJson:function(h,j,k){if(h.name.indexOf(".xls")===-1){if(k)k("FILENAME_EXTENSION_ERROR");return}Require([o],function(){var f=new FileReader();var g="";f.onload=function(e){var b=new Uint8Array(f.result);var c=b.byteLength;for(i=0;i<c;i++){g+=String.fromCharCode(b[i])}var d=XLSX.read(g,{type:'binary'});r.BinaryToJson(d,function(a){if(j)j(a)})};f.onerror=function(e){if(k)k("READ_FAILED")};f.readAsArrayBuffer(h)})},BinaryToJson:function(a,b,c){var d=new Array();var e=new Array();for(key in a.Sheets[a.SheetNames[0]]){if(key.match(/\d+/g)!==null&&key.match(/\d+/g)[0]==="1"){let titles;let lie=a.Sheets[a.SheetNames[0]][key].v.indexOf('(')===-1?a.Sheets[a.SheetNames[0]][key].v.indexOf('（'):a.Sheets[a.SheetNames[0]][key].v.indexOf('(');if(lie!==-1){titles=a.Sheets[a.SheetNames[0]][key].v.substring(0,lie)}else{titles=a.Sheets[a.SheetNames[0]][key].v}e.push({"title":titles,"dataIndex":titles,"editable":true})}}d.push(e);var f=new Array;var g=XLSX.utils.sheet_to_json(a.Sheets[a.SheetNames[0]]);for(let i=0,n=g.length;i<n;i++){g[i]["key"]=Edbox.GetGUID();for(var t in g[i]){let num=t.indexOf('(')===-1?t.indexOf('（'):t.indexOf('(');if(num!==-1){let sth=t.substring(0,num);g[i]=JSON.parse(JSON.stringify(g[i]).replace(t,sth))}}f.push(g[i])}d.push(f);if(b)b(d)},JsonToExcel:function(d,e,f){if(!d){if(f)f("data is null!")}if(typeof d==="string"){d=JSON.parse(d)}for(var i in d[0]){for(var j in d[1]){if(d[1][j]["key"]){delete d[1][j]["key"]}}}Require([o],function(){var b=XLSX.utils.json_to_sheet(d[1]);var c=new Object();c.sheet=b;r.sheet2blob(c,function(a){if(e)e(a)})})},sheet2blob:function(c,d,e){sheetName=c.sheetName||'Sheet1';var f={SheetNames:[sheetName],Sheets:{}};f.Sheets[sheetName]=c.sheet;var g={bookType:'xlsx',bookSST:false,type:'binary'};var h=XLSX.write(f,g);var j=new Blob([s2ab(h)],{type:'application/octet-stream'});function s2ab(s){var a=new ArrayBuffer(s.length);var b=new Uint8Array(a);for(var i=0;i!==s.length;++i)b[i]=s.charCodeAt(i)&0xFF;return a}if(d)d(j)},DownloadAsExcel:function(a,b){Require([p],function(){saveAs(a,b||q[Edbox.Language])})}};if(l&&m&&!l[m]){l[m]=r}}(Edbox,"Excel2Json"));(function(q,r){var s=null;var t=null;var u=null;var v=Edbox.ComponentRootPath+"ThirdParty/wx_jssdk/jweixin-1.6.0.js";var w=null;var x=[false,false];var y;var z;var A=new Date();var B={"Dev":"http://cs.101.com/v0.1/static/edbox_web/edbox_audit/dev/pkg/36313e8d-c1ea-3e69-12c9-e79b305dac8a.pkg/36313e8d-c1ea-3e69-12c9-e79b305dac8a--ANDROID--0_1.apk?v=1588127365","QA":"https://cs.101.com/v0.1/static/edbox_web/edbox_audit/qa/pkg/36313e8d-c1ea-3e69-12c9-e79b305dac8a.pkg/36313e8d-c1ea-3e69-12c9-e79b305dac8a--ANDROID--0_0_1.apk?v=1588123966","BetaCN":"https://cs.101.com/v0.1/static/edbox_web/edbox_audit/beta/pkg/36313e8d-c1ea-3e69-12c9-e79b305dac8a.pkg/36313e8d-c1ea-3e69-12c9-e79b305dac8a--ANDROID--1_0.apk?v=1588124047","CN":""};var C={link:"",title:"Edbox",desc:"",imgUrl:"",success:function(){}};function fillArgs(a){var b=Edbox.FillUrl(a);return b}function GetShareLink(c,d,f,g,h,i){var j=i||3;Edbox.Api.MMO.GetShareLink(c,j,1,function(a){var b=fillArgs(a.app_url);switch(h){case"Safari":InSafariShare(b,d,f,g);break;case"Wechat":InWxShare(b,d,f,g);break}},function(e){switch(h){case"Safari":InSafariShare("null",d,f,g);break;case"Wechat":InWxShare("null",d,f,g);break}})}function OpenScheme(a,b,c){if(Edbox.Platform.IsChrome){window.location.href=a}else{var d=document.createElement("iframe");d.src=a;d.style="display:none;";d.setAttribute("height","0px");d.setAttribute("width","0px");d.setAttribute("frameborder","0");document.body.appendChild(d);d.parentNode.removeChild(d);d=null}setTimeout(()=>{var e=window.document.hidden||window.document.mozHidden||window.document.msHidden||window.document.webkitHidden;if(typeof e==="undefined"||e===false){if(c){c({downloadUrl:B[Edbox.ServerKey]||""})}else{window.location.href=B[Edbox.ServerKey]||""}}else{if(b)b()}},1500)}function InWxShare(a,b,c,d){var e={link:Edbox.Protocol+"://"+location.host+"/mobile/share/share.html?gameLink="+a,title:b,desc:c,imgUrl:d,success:function(){}};if(wx){var f=location.href.split('#')[0];if(!y||y!==f||A-new Date()>30*60*1000){y=f;GetWxConfig(f,e)}else if(y===f){SetWxShareParameter(e)}}x[1]=true}function InSafariShare(a,b,c,d){var e=document.querySelector('link[rel="icon"]');if(s===null){s=window.location.href;t=document.title;u=e===null?null:e.href}var f=Edbox.Protocol+"://"+location.host+"/mobile/share/share.html?gameLink="+a;history.replaceState(null,null,f);document.title=b;if(e!==null){e.href=d}else{u=null;e=document.createElement("link");e.rel="icon";e.href=d;document.head.appendChild(e)}x[0]=true}function SetShareInfo(){if(document.querySelector('link[rel="icon"]')){z=document.querySelector('link[rel="icon"]').href;C.imgUrl=z}C.link=C.link||Edbox.Protocol+"://"+Edbox.GetHost("Lobby");C.desc=Edbox.GetTip('EDBOX_DESCRIPTION')}function GetWxConfig(d,f){$.ajax({url:Edbox.Protocol+"://"+Edbox.GetHost("Login")+"/edbox/v1.0/share/js_config",type:"Get",data:{url:d},dataType:'json',success:function(b){var c=b.data;wx.config({debug:false,appId:c.appId,timestamp:c.timestamp,nonceStr:c.nonceStr,signature:c.signature,jsApiList:['updateAppMessageShareData','updateTimelineShareData','onMenuShareTimeline','onMenuShareAppMessage','onMenuShareQQ','onMenuShareQZone']});if(w===null||w===false){wx.checkJsApi({jsApiList:['updateAppMessageShareData','updateTimelineShareData'],success:function(a){if(a.checkResult.updateAppMessageShareData===true&&a.checkResult.updateTimelineShareData===true){w=true}else{w=false}}})}SetWxShareParameter(f)},error:function(e){alert("Get WeChat Config Error"+JSON.stringify(e))}})}function SetWxShareParameter(a){wx.ready(function(){if(w===true){wx.updateAppMessageShareData(a);wx.updateTimelineShareData(a)}else{wx.onMenuShareTimeline(a);wx.onMenuShareAppMessage(a);wx.onMenuShareQQ(a);wx.onMenuShareQZone(a)}})}var D={Init:function(){A=new Date();SetShareInfo();if(Edbox.AppKey==="CN"){Require([v],function(){if(Edbox.Platform.IsWechat){var a=location.href.split('#')[0];y=a;GetWxConfig(a,C)}})}},MShare:function(a,b,c,d,e,f,g,h,i,j){var k="title="+a+"&url="+b+"&summary="+c+"&img_url="+d;var l;switch(g){case"WeChat":l="ShareWx";k=k+"&ShareType="+f;break;case"QQ":l="ShareQq";break}var m=Edbox.Encode(k);m=encodeURIComponent(m);if(window.isH5Shell===true){var n="uniwebview://edbox-apk?code="+l+"&language=zh-CN&args="+m;window.location.href=n;if(i)i()}else{if(Edbox.Platform.IsIOS&&!Edbox.Platform.IsWechat){GetShareLink(e,a,c,d,"Safari",h);if(i)i()}else if(Edbox.Platform.IsWechat){GetShareLink(e,a,c,d,"Wechat",h);if(i)i()}else{var o;o=Edbox.SetQueryString("EdboxArgs",Edbox.GetLoginInfo(),window.location.href);o=Edbox.Encode(o);o=encodeURIComponent(o);var p="com.nd.edbox://"+l+"?args="+m+"&url="+o;OpenScheme(p,i,j)}}},MShareWeibo:function(a,b,c,d,e,f){var g="title="+a+"&url="+b+"&summary="+c+"&img_url="+d+"&tips="+e;var h=Edbox.Encode(g);h=encodeURIComponent(h);if(window.isH5Shell===true){var i="uniwebview://edbox-apk?code=ShareWeibo&language=zh-CN&args="+h;window.location.href=i}else{if(Edbox.Platform.IsWechat){window.location.href=f}else{window.open(f)}}},CloseShare:function(){if(x[0]===true&&Edbox.Platform.IsIOS){x[0]=false;if(t!==null||typeof t!=="undefined"){document.title=t;t=null}var a=document.querySelector('link[rel="icon"]');if(a!==null){if(u!==null&&typeof u!=="undefined"){a.href=u;u=null}}if(s!==null||typeof s!=="undefined"){history.replaceState(null,null,s);s=null}}else if(Edbox.Platform.IsWechat){if(wx&&x[1]===true){if(C.link===""||C.desc===""){SetShareInfo()}SetWxShareParameter(C);x[1]=false}}}};if(q&&r&&!q[r]){q[r]=D}}(Edbox,"MShare"));(function(j,k){GetEnv=function(){if(Edbox.serverKey==="US"||Edbox.serverKey==="Beta"){return 1}return 0};var l='';var m=new Dictionary();var n={Init:function(a,b,c){l='server/videoEditor/userTask/userId/'+Edbox.AccountId;Edbox.Mqtt.ConnectMqtt(l,Edbox.AudiohelpServer.GetMessage)},GetMessage:function(a){if(a&&a.destinationName===l&&a.payloadString){console.log('AudiohelpServer GetMessage : '+a.payloadString);var b=JSON.parse(a.payloadString);if(b&&m.ContainsKey(b.new_guid)){var c=m.Get(b.new_guid);if(c){c({"guid":b.new_guid,"url":b.ndr_path,"status":b.status})}}}},AddListener:function(a,b){console.log('AudiohelpServer AddListener : '+a);m.Set(a,b)},HandleSendTranAudio:function(d,e,f){var g="/v0.1/api/videoEditor/videoEditor/actions/tran_audio";var h=GetEnv();var i={guid:d,env:h,category:"$RA1206001"};Edbox.Request.Post(Edbox.GetHost("MMO"),g,JSON.stringify(i),function(a){if(e)e(a.guid)},function(a){var b="audio_Trans_error";switch(a.code){case'VIDEOEDITOR_CUTAUDIO/DOWNLOAD_NDR_FILE_ERROR':b="audio_file_error";break;case'VIDEOEDITOR_CUTAUDIO/FFMPEG_HANLDE_ERROR':b="audio_hanlde_error";break;case'VIDEOEDITOR_CUTAUDIO/FILE_NOT_EXISTS':b="audio_cutnotexist_error";break;case'VIDEOEDITOR_CUTAUDIO/FILE_SIZE_IS_ZERO':b="audio_cutzero_error";break;case'VIDEOEDITOR_CUTAUDIO/UPLOAD_FILE_TO_NDR_ERROR':b="audio_upload_error";break;default:break}var c=new Object();c.code=b;c.message="没有转码成功";if(f){f(c)}})},GetAudioTranTask:function(e,f,g){var h="/v0.1/api/videoEditor/videoEditor/actions/get_video_task_by_guid?guids="+e;Edbox.Request.Get(Edbox.GetHost("MMO"),h,null,function(a){if(a.items.length<1){if(f)f(null);return}var b=a.items;for(var i=0;i<a.items.length;i++){var c=a.items[i];if(c.handle_type===3){if(f){f(element)}return}}var d=new Object();d.code='NoTranTask';d.message="没有转码任务";if(g)g(d)},function(a){alert(a.code);if(g)g(a)})}};if(j&&k&&!j[k]){j[k]=n}}(Edbox,"AudiohelpServer"));(function(h,j){var k=["CHANNEL_ALIPAY_QR","CHANNEL_WECHAT_PUB_QR"];var l=Edbox.Api.MMO;var m={CashType:'',CashTypeFormat:'',Init:function(a){if(Edbox.IsGuest()){if(a)a();return};if(window.SdpWalletSDK){var b=new Object();b.AccountId=Edbox.AccountId;b.AccessToken=Edbox.AccessToken;b.MacKey=Edbox.MacKey;b.TimeStamp=Edbox.TimeStamp;b.Env=Edbox.SdpWalletEnv;b.Language=Edbox.Language==="SimplifiedChinese"?"zh-CN":"en-US";b.SdpAppId=Edbox.SDPAppId;window.SdpWalletSDK.init(b).then(function(){m.GetBalanceSDK(function(o){Edbox.SdpWallet.CashType=o.cash;Edbox.SdpWallet.CashTypeFormat=o.cash_prefix;if(a)a()})})}},GetProductList:function(e,f,g){if(window.SdpWalletSDK){window.SdpWalletSDK.getProductList('virtualMoney',e.page,e.count).then(function(a){var b=new Object();b.total=a.total;b.items=new Array;for(var i=0;i<a.rows.length;i++){var c=a.rows[i];var d=new Object();d.id=c.id;d.name="EdCoin";d.num=c.num;d.price=c.price.toFixed(2);b.items.push(d)}if(f)f({"data":b})}).catch(function(a){console.log("err :"+a);if(g)g(a)})}},GetPayChannelList:function(c,d,e){if(window.SdpWalletSDK){var f=new Array;if(Edbox.SdpWallet.CashType==="CHANNEL_CASH"){f.push('CHANNEL_ALIPAY_BANK');f.push('CHANNEL_WECHAT_PUB_QR')}if(Edbox.SdpWallet.CashType==="CASH_USD"){f.push('CHANNEL_PAYPAL_WEB')}window.SdpWalletSDK.getPayChannel('','default','',Edbox.SdpWallet.CashType,f,null).then(function(a){var b=new Array();for(var i=0,n=a.length;i<n;i++){if(a[i].channel_name==='CHANNEL_ALIPAY_BANK'){b.push(a[i].channel_name);break}}for(var i=0,n=a.length;i<n;i++){if(a[i].channel_name!=='CHANNEL_ALIPAY_BANK'){b.push(a[i].channel_name)}}if(d)d({"data":b})}).catch(function(a){console.log("err :"+a);if(e)e(a)})}},PayOrderWithCreate:function(b,c,d){pay_source=3;if(window.SdpWalletSDK){var e=Edbox.AccountId;window.SdpWalletSDK.createChargeOrder(e,pay_source,b.channel,b.id,"").then(function(a){Edbox.SdpWallet.PayOrder(a.payment_channel,a.order_id,c,d)}).catch(function(a){console.log("createChargeOrder Err :"+a);if(d)d(a)})}},PayOrder:function(b,c,d,e){var f={payment_channel:b,order_id:c};window.SdpWalletSDK.payOrder(Edbox.AccountId,f,"").then(function(a){if(d)d({"data":a})}).catch(function(a){console.log("PayOrder Err :"+a);if(e)e(a)})},QueryCurrency:function(b,c,d){if(window.SdpWalletSDK){window.SdpWalletSDK.queryCurrency(b.componentId,b.appProductServiceId).then(function(a){console.log(a)}).catch(function(a){console.log("err :"+a);if(d)d(a)})}},GetUserBalance:function(b,c,d){Edbox.SdpWallet.GetBalanceSDK(function(o){var a=new Object();a.balance=o.balance;if(c)c({'data':a})},d)},GetBalanceSDK:function(c,d){if(window.SdpWalletSDK){window.SdpWalletSDK.getBalance('CHANNEL_EMONEY',1).then(function(a){if(a.items.length>0){var b=new Object;b.cash=a.items[0].cash;b.cash_prefix=a.items[0].cash_prefix;b.balance=a.items[0].balance}if(c)c(b)}).catch(function(a){console.log("err :"+a);if(d)d(a)})}}};if(h&&j&&!h[j]){h[j]=m}}(Edbox,"SdpWallet"));(function(h,l){var m=Edbox.Api.MMO;var o={GetLimitOfPeople:function(a,b,c){var d=Edbox.UserVipInfo.vip_level;for(let i=0,n=Edbox.VipLimits.length;i<n;i++){if(d===Edbox.VipLimits[i].vip_level){if(b)b({user_limit:Edbox.VipLimits[i].user_limit>0?Edbox.VipLimits[i].user_limit:30})}}},LimitOfGame(data,success,error){var p=Edbox.UserVipInfo.vip_level;for(let i=0,n=Edbox.VipLimits.length;i<n;i++){if(p===Edbox.VipLimits[i].vip_level){if(success)success({create_limit:Edbox.VipLimits[i].create_limit,release_limit:Edbox.VipLimits[i].release_limit})}}},GetAppIncome(data,success,error){m.GetAppIncome(data.app_id,data.access_type,success,error)},CreateJudge(data,success,error){m.GetPersonalApps("","","","",function(b){var c=b.total_count;o.LimitOfGame("",function(a){if(a.create_limit===-1){if(success)success({message:"NoNeedVipUp"})}else if(a.create_limit<=c){if(success)success({message:"NeedVipUp"})}else{if(success)success({message:"NoNeedVipUp"})}},error)},error)},GetReleaseNum:function(b,c,d){var e=b.num;var f=b.list.items;var g=0;if(e<=100){for(let i=0;i<e;i++){if(f[i].flag===0||f[i].flag===3||f[i].flag===7||f[i].flag===9){g++}}if(c)c({num:g})}else{for(let i=1,n=Math.ceil(e/100);i<=n;i++){m.GetPersonalApps(i,100,"",1,function(a){for(let j=0,k=a.item_count;j<k;j++){if(a.items[j].Info===0||f[i].Info===3||f[i].Info===7||f[i].Info===9){g++}}if(i===n){if(c)c({num:g})}})}}},PublishJudge(data,success,error){var q=data.app_id;m.GetPersonalAppInfo(q,function(f){var g=false;if(f.flag===0||f.flag===3||f.flag===7||f.flag===9){g=true}o.LimitOfGame("",function(e){if(e.release_limit===-1){if(success)success({message:"NoNeedVipUp"})}else{m.GetPersonalApps("",100,"",1,function(c){var d=c.total_count;o.GetReleaseNum({num:d,list:c},function(a){var b=a.num;if(b>=e.release_limit){if(g!==true){if(success)success({message:"NeedVipUp"})}else{if(success)success({message:"NoNeedVipUp"})}}else{if(success)success({message:"NoNeedVipUp"})}},error)},error)}},error)},error)}};if(h&&l&&!h[l]){h[l]=o}}(Edbox,"OpusInfo"));(function(p,q){var r=Edbox.NDR;var s=Edbox.Api;var t=null;var u="";var v={manualList:[],autoList:[],manualMax:30,autoMax:20,initFlag:false,Save:function(a,b,c,d){w.GetList(Edbox.GameId,1,function(){if(!v.IsAvailable(b)){if(d)d("已达到截图存储上限");return}if(v.IsExisted(b)){if(d)d("已存在该埋点");return}UploadScreenshot(a,b,c,d)},d)},Delete:function(a,b,c,d){if(!b||JSON.stringify(b)==='{}'){if(d)d("删除截图的数据不允许为空");return}var e=b.type;var f=b.guid;var g=[{resid:f,burying_point:e}];s.ScreenShot.DeleteScreenShots(a,g,function(){v.Remove(e,f);if(c)c(v.GetList())},d)},GetList:function(a,b,c){if(!a||a==='')a=0;if(!b||b==='')b='1';if(!c||c==='')c='50';var d=[];if(a===1){d=v.autoList}else if(a===2){d=v.manualList}else{d=v.autoList.concat(v.manualList)}var e=(b-1)*c;var f=d.slice(e,e+c);var g={total:d.length,items:f};return g},Add:function(a,b,c){var d={id:a.id,time:timeHandle(a.createtime),guid:a.resid,type:a.burying_point,url:a.url};if(!v.IsAvailable(d.type)){if(c)c("已达到截图存储上限");return}if(v.IsExisted(d.type,d.id)){if(c)c("已存在该埋点");return}if(d.type==="manual")v.manualList.unshift(d);else v.autoList.unshift(d);if(b)b(d)},Remove:function(a,b){var c=-1;var i=0;var d=[];if(a==="manual"){d=v.manualList}else{d=v.autoList}for(i=0;i<d.length;i++){if(d[i].guid===b){c=i;break}}if(c>-1){d.splice(c,1)}},IsAvailable:function(a){if(a==="manual"&&v.manualList.length>=v.manualMax){return false}if(a!=="manual"&&v.autoList.length>=v.autoMax){return false}return true},IsExisted:function(a,b){var c=-1;var i=0;if(a==="manual"){for(i=0;i<v.manualList.length;i++){if(v.manualList[i].id===b){c=i;break}}}else{for(i=0;i<v.autoList.length;i++){if(v.autoList[i].type===a){c=i;break}}}return c>-1}};function getName(a){return Edbox.GameId+'_'+a+'_'+new Date().getTime()+'.png'}function timeHandle(a){if(typeof a!=='number'&&typeof a!=='string'){return new Date()}a=a+"";a=a.slice(0,4)+'/'+a.slice(4,6)+'/'+a.slice(6,8)+' '+a.slice(8,10)+':'+a.slice(10,12)+':'+a.slice(12,14);var b=new Date(a);return b}function JudgeIsAuthor(b,c){if(t===null){s.MMO.GetPersonalAppInfo(Edbox.GameId,function(a){if(a.ownerid===Edbox.EbUserId){t=true;if(b)b()}else{if(c)c("非作者本人进行游戏，无法进行截图")}},function(){t=false;if(c)c("不支持模板截图")})}else{if(t&&b)b();else if(!t&&c)c()}}function UploadScreenshot(e,f,g,h){r.Post(e,getName(f),null,function(b){var c=[];var d={resid:b.Guid,burying_point:f};c.push(d);s.ScreenShot.AddScreenshots(c,function(a){if(a&&a.records&&a.records.length>0){a.records[0].url=b.Url;v.Add(a.records[0],g,h)}},h,Edbox.GameId)},h)}var w={SaveScreenShot:function(a,b,c,d){if(!a){if(d)d("截图数据不许为空");return}if(Edbox.Mode!==1){if(d)d("仅允许试玩时截图");return}if(!b||b===''){b="manual"}JudgeIsAuthor(function(){v.Save(a,b,c,d)},d)},GetList:function(g,h,k,l,m,n,o){if(!g){g=Edbox.GameId}if(!g){if(l)l("GameId不允许为空.");return}if(g!==u){u=g;v.manualList=[];v.autoList=[];v.initFlag=false}if(v.initFlag&&!o){if(k)k(v.GetList(h,m,n))}else{s.ScreenShot.GetList('','','',function(d){var e=[];var f={};for(var i=0;i<d.records.length;i++){f[d.records[i].resid]=d.records[i];e.push(d.records[i].resid)}if(e.length===0){if(k)k(v.GetList(h,m,n));return}r.GetList(e,function(a){for(var j=0;j<e.length;j++){var b=e[j];var c={id:f[b].id,resid:b,url:a[b].Url,burying_point:f[b].burying_point,createtime:f[b].createtime};v.Add(c)}v.initFlag=true;if(k)k(v.GetList(h,m,n))},l)},l,g)}},Delete:function(a,b,c,d){if(!b){b=Edbox.GameId}if(!b){if(d)d("GameId不允许为空.");return}v.Delete(b,a,c,d)}};if(p&&q&&!p[q]){p[q]=w}}(Edbox,"ScreenShot"));(function(p,q){var r=Edbox.Action.Ranking;var s={};var t={};var u={};var v=0;var w=1;var x=true;var y=-1;var z=true;var A=null;var B="/coms/Ranking/index.html";var C=null;var D=null;function Send(a,b,c){if(a){var d={Type:b,Datas:c};a.contentWindow.postMessage(d,"*")}}function InitIfm(){A=document.createElement("iframe");var a=Edbox.Protocol+"://"+Edbox.GetHost("Component")+B+"?v="+new Date().getTime();A.setAttribute("src",a);A.setAttribute("allowtransparency","true");A.style.backgroundColor="transparent";A.style.top="0";A.style.left="0";A.style.position="fixed";A.style.height="100%";A.style.width="100%";A.style.borderWidth="0px";A.style.display="none";document.body.appendChild(A)}function CloseRanking(){A.style.display="none"}function ShowRanking(){A.style.display="block"}function getGameInfo(b,c){Edbox.MMO.GetGameInfo(Edbox.GameId,Edbox.Version,Edbox.Access,Edbox.Mode,function(a){if(a){Edbox.ServerInfo=a;pkg=Edbox.GetQueryString("pkg");if(pkg){Edbox.PackageGuid=pkg}else{Edbox.PackageGuid=a.pkg_resid}if(b)b()}else{if(c)c("Edbox.MMO.GetGameInfo 无值")}},c)}function GetDataConfig(b,c){var d=setInterval(function(){if(Edbox.PackageGuid){Edbox.Resource.GetConfig("DatasConfig",function(a){if(!a||!a.StaticData||!a.StaticData.Ranking){if(c)c("无排行榜相关的配置信息")}else if(b){b(a)}});clearInterval(d);clearTimeout(e)}},200);var e=setTimeout(function(){console.error("无PAKAGEGUID！");if(c)c("无PAKAGEGUID！");clearInterval(d)},10000)}function InitRankings(){if(!Edbox.GameId){y=0;z=true;if(D)D(y);return}r.GetReleaseConfigList(function(c){if(c&&c.items&&c.items.length>0){for(var d in c.items){u[c.items[d].rank_uuid]=c.items[d].id}getGameInfo(function(){GetDataConfig(function(a){var b=null;if(a.StaticData.Ranking&&a.StaticData.Ranking.Datas){b=a.StaticData.Ranking.Datas[2].Datas}else{y=1;z=true;if(D)D(y);return}for(var i in b){s[b[i].RankUid]=b[i]}InitIfm();A.onload=function(){Send(A,"lang",Edbox.Language);Send(A,"DatasConfig",a.StaticData.Ranking)}})})}else{y=2;z=true;if(D)D(y)}});r.GetEditConfigList(function(a){if(a&&a.items&&a.items.length>0){for(var b in a.items){t[a.items[b].rank_uuid]=a.items[b].id}}})}function onMessage(){function messageCallBack(e){var a=e.data;if(a&&a.Type&&a.Type==="GetRankers"){w=a.Datas.page;v=a.Datas.history;curRankUid=a.Datas.rankUid;GetRankers(w,v,curRankUid)}if(a&&a.Type&&a.Type==="Finish"){ShowRanking();z=true;if(C)C()}if(a&&a.Type&&a.Type==="Close"){CloseRanking();window.removeEventListener("message",messageCallBack,false)}}window.addEventListener("message",messageCallBack,false)}function GetRankers(b,c,d,e,f){var g=u[d];if(!g)return;var h=10;r.GetList(g,b,h,c,function(a){a.RankUid=d;Send(A,"Ranker",a);if(e){e(a)}},f)}function HandleDate(a){try{if(a&&typeof a==="string"){a=a.replace(/[.]/g,"-");return new Date(a).toISOString().split("-").join("").split("T").join("").split(":").join("").split(".")[0]}else{return"20000101000000"}}catch(e){return"20000101000000"}}function HandleTime(a){if(a!==""){var b="2019-01-02 "+a;return new Date(b).toISOString().split("-").join("").split("T").join("").split(":").join("").split(".")[0].slice(8)}return""}function HandleSaveRank(a,b){var c=b.Datas[0].Datas[2].Key?b.Datas[0].Datas[2].Key:b.Datas[0].Datas[2].Keys[0];var d=b.Datas[0].Datas[0].Key;var e=JSON.stringify(b.Datas[0].Datas[1].Value);var f=b.Datas[0].Datas[3].Key==="Des"?1:0;var g=b.Datas[0].Datas[4].Value;var h=a[0].Datas[0].Value?1:0;var i=HandleDate(a[0].Datas[4].Value);var j=a[0].Datas[5].Key-"0";var k=j===7?HandleTime(a[0].Datas[6].Value):"";var l=a[0].Datas[7].Value;var m=a[0].Datas[8].Value?1:0;var n=m?a[0].Datas[8].Value:0;var o={score_param_value:c,limit_scope_value:d,limit_scope_param_value:e,range_max:g,param_order:f,open:h,first_reset_datetime:i,rank_type:j,reset_time:k,reset_cycle:l,show_history:m,history_long:n};return o}var E={rankidMap:{},DeleteRanking:function(c,d,e){if(!c)return;r.GetEditConfigList(function(a){if(a&&a.items&&a.items.length>0){for(var b in a.items){t[a.items[b].rank_uuid]=a.items[b].id}}if(t[c])r.DeleteConfig(t[c],d,e);else{if(e)e("删除排行榜失败 rankUid不存在.")}})},CreateRanking:function(a,b,c,d,e){var f=HandleSaveRank(b,c);r.CreateRanking(a,f,d,e)},RefreshRanking:function(e,f,g,h,i,j){r.GetEditConfigList(function(a){if(a&&a.items&&a.items.length>0){for(var b in a.items){t[a.items[b].rank_uuid]=a.items[b].id}}var c=t[g];var d=HandleSaveRank(f,h);r.RefreshRanking(e,c,d,i,j)})},Post:function(i,j,k){r.GetReleaseConfigList(function(a){if(a&&a.items&&a.items.length>0){for(var b in a.items){var c=a.items[b].limit_scope_value;var d=a.items[b].score_param_value;var e=[-1,-1];if(a.items[b].limit_scope_param_value)e=JSON.parse(a.items[b].limit_scope_param_value);var f=e[0];var g=e[1];u[a.items[b].rank_uuid]=a.items[b].id;if(c&&d&&i[c]&&i[d]&&i[c]>=f&&i[c]<=g){var h=a.items[b].id+"";r.SaveScore(Edbox.GameId,h,i[d],JSON.stringify(i),j,k)}}}})},Show:function(a,b){if(!z)return;C=a;D=b;onMessage();if(x){x=false;z=false;InitRankings()}else{if(y!==-1){if(D)D(y);return}Send(A,"Show")}},JudgeOpenRanking:function(b,c){getGameInfo(function(){GetDataConfig(function(a){if(a.StaticData.Ranking.Datas){if(!a.StaticData.Ranking.Datas[0].Datas[0].Value){if(c)c();return}}else if(!a.StaticData.Ranking[0].Datas[0].Value){if(c)c();return}if(b){b(a)}},c)},c)}};if(p&&q&&!p[q]){p[q]=E}}(Edbox,"Ranking"));(function(m,n){var o=false;function CheckOpenInLobby(){var c=function(e){var a=e.source;var b=e.data;if(b&&b.Type==="FunctionCall_IsOpenInLobby"){o=b.Datas[0]}};window.addEventListener("message",c,false);window.top.postMessage({Type:"FunctionCall",Datas:["FunctionCall_IsOpenInLobby","return Edbox.Lobby !== undefined;"]},"*")}CheckOpenInLobby();var p=Edbox.Api.MMO;function getVipInfo(a){var b=new Object;b.vip_level=a.vip_level;b.remain_time=getLimitTime(a.remain_time);b.left_time=a.remain_time;b.current_list=new Array;if(a.current_list&&a.current_list.length>0){for(var i=0;i<a.current_list.length;i++){var c=new Object;var d=a.current_list[i];c.vip_level=d.vip_level;c.remain_time=getLimitTime(d.remain_time);c.left_time=d.remain_time;c.status=d.status;b.current_list.push(c)}}return b}function getLimitTime(a){if(a===-1){a=9999999}var t=new Date(new Date().getTime()+a*3600*1000);return t.getFullYear()+'-'+(t.getMonth()+1)+'-'+t.getDate()}function AddPrecheckCreate(){function OpenConfirmIframe(e){var f=document.createElement("iframe");f.id="confirmVip";f.setAttribute("src",getUrl());f.style.width="100%";f.style.height="100%";f.style.overflow="hidden";f.style.position="fixed";f.style.top="0";f.style.left="0";f.style.height="100%";f.style.width="100%";f.style.margin="0";f.style.padding="0";f.style.border="0";f.style.zIndex="9999";f.style.border="0";f.style.background="none";document.body.appendChild(f);f.onload=function(){var a={Type:'Confirm_Refresh',Datas:[e,Edbox.GetTip("TIP_CONFIRM"),Edbox.GetTip("TIP_CANCEL")]};f.contentWindow.postMessage(a,"*")};window.addEventListener('message',function(a){if(a.data.Type==='Confirm_ClickConfirm'){if(Edbox.AppKey!=="HK"){var b=Edbox.Protocol+"://"+Edbox.GetHost("Lobby")+"/";var c=JSON.parse(Edbox.Decode(Edbox.DataSet.Get("EdboxArgs")));c.AccountId=Edbox.AccountId;c.AccessToken=Edbox.AccessToken;c.MacKey=Edbox.MacKey;var d="?EdboxArgs="+Edbox.Encode(JSON.stringify(c));b=b+d+"&action=openVipModal";window.open(b)}$("#confirmVip").remove()}else if(a.data.Type==='Confirm_ClickCancel'){$("#confirmVip").remove()}},false);window.onresize=function(){f.style.top=getPosTop()};function getPosTop(){return Math.max(0,(top.window.innerHeight-644)/2+top.pageYOffset)+"px"}function getUrl(){var a=Edbox.Protocol+"://"+Edbox.GetHost("Component")+"/coms/Confirm/index.html";return a}}var g=function(d,e){function getTemplateInfo(b,c){if(Edbox.Access===1){if(b)b(Edbox.GameId,Edbox.Version)}else if(Edbox.Access===2){Edbox.Api.MMO.GetPersonalAppInfo(Edbox.GameId,function(a){if(b)b(a.baseid,a.base_version)},c)}else if(Edbox.Access===3){Edbox.Api.MMO.GetAppInfo(Edbox.GameId,function(a){if(b)b(a.baseid,a.base_version)},c)}}if(Edbox.AppKey==="HK"){getTemplateInfo(function(b,c){q.PrecheckCreate(b,c,function(a){if(a.limit){OpenConfirmIframe(Edbox.GetTip("VIP_NOTCREATE_MEMBER"))}else{if(d)d({ret:true})}if(d)d({ret:false,info:"create limit need member"})},e)})}else{q.PrecheckCreate(null,null,function(b){if(b.limit){if(o){Edbox.Message.Get(window.top,function(a){a.Start();a.Send("needVipUp",[{opt:"create"}])})}else{OpenConfirmIframe(Edbox.GetTip("VIP_NEED_UPGTRADE1")+b.create_limit+Edbox.GetTip("VIP_NEED_UPGTRADE2")+b.release_limit+Edbox.GetTip("VIP_NEED_UPGTRADE3")+Edbox.GetTip("VIP_NEED_UPGTRADE4"))}if(d)d({ret:false,info:"create limit need vip up"})}else{if(d)d({ret:true})}},e)}};if(Edbox.PreGoEditor===undefined){Edbox.PreGoEditor=new Array()}Edbox.PreGoEditor=Edbox.PreGoEditor.concat({type:"vipCreateProduct",func:g})}AddPrecheckCreate();var q={VipExpireListen:function(c,d,e){var f='/vip/duration/'+Edbox.EbUserId+'/overtime';Edbox.Mqtt.ConnectMqtt(f,function(a){if(a&&a.destinationName===f&&a.payloadString){Edbox.Vip.GetUserVipInfo('');var b=JSON.parse(a.payloadString);if(d&&b){d({'data':b})}}})},GetUserVipInfo:function(b,c,d){Edbox.Action.User.GetUserInfo(function(a){Edbox.UserVipInfo=getVipInfo(a.vip_info);if(c){c({'data':''})}},function(a){console.log(a);if(d){d()}})},GetList:function(g,h,l){p.GetVipInfos(function(v){var a=new Array;if(v&&v.items){for(var i=0;i<v.items.length;i++){var b=new Object;var c=v.items[i];for(var j=0;j<Edbox.VipLimits.length;j++){var d=Edbox.VipLimits[j];if(c.vip_level===d.vip_level){b.vip_level=c.vip_level;b.price_list=new Array;for(var k=0;k<c.price_list.length;k++){var e=c.price_list[k];var f=new Object;f.id=e.id;f.price=e.price;f.original_price=e.original_price;f.duration=e.duration;f.type=e.duration_type;f.display_info=e.display_info;b.price_list.push(f)}b.create_limit=d.create_limit;b.release_limit=d.release_limit;b.income_percent=d.income_percent;b.export_limit=d.export_limit;b.user_limit=d.user_limit;a.push(b);break}}}}if(h)h({'data':a})},l)},Get:function(e,f,g){p.GetVipInfo(e.vip_level,function(v){var a=new Object;if(v){for(var j=0;j<Edbox.VipLimits.length;j++){var b=Edbox.VipLimits[j];if(v.vip_level===b.vip_level){a.vip_level=v.vip_level;a.price_list=new Array;for(var k=0;k<v.price_list.length;k++){var c=v.price_list[k];var d=new Object;d.id=c.id;d.price=c.price;d.original_price=c.original_price;d.duration=c.duration;d.type=c.duration_type;d.display_info=c.display_info;a.price_list.push(d)}a.create_limit=b.create_limit;a.release_limit=b.release_limit;a.income_percent=b.income_percent;a.export_limit=b.export_limit;a.user_limit=b.user_limit;break}}}if(f)f({'data':a})},g)},GetVipProtocol:function(c,d,f){$.ajax({url:Edbox.ComponentRootPath+"Config/VipProtocol-"+Edbox.Area+"-"+Edbox.Language+".json",type:"get",success:function(a){if(d&&a&&a.details){var b=new Object;b.title=a.title;b.detail='';for(var i=0;i<a.details.length;i++){b.detail=b.detail+'<p>'+a.details[i]+'</p>'}d({'data':b})}},error:function(e){if(f)f("GetVipProtocol error")}})},CreateOrder:function(b,c,d){p.CreateOrder(b.item_id,b.quantity,b.item_subject,Edbox.SDPAppId,function(a){console.log("CreateOrder return :"+a.order_id);Edbox.SdpWallet.PayOrder(b.payment_channel,a.order_id,c,d)},d)},GetExportInfo:function(c,d,e){function checkExportInfo(){var b={};if(Edbox.UserVipInfo&&Edbox.UserVipInfo.left_time>0){if(Edbox.UserVipInfo.vip_level===2){b.Code="VIP2";b.Message='';if(d)d({'data':b})}else{p.GetExportPayInfo(function(a){b.Code="VIP1";if(c===1){b.Message=a.exe_export_limit+''}else if(c===2){b.Message=a.apk_export_limit+''}else if(c===3){b.Message=a.h5_export_limit+''}if(d)d({'data':b})},e)}}else{b.Code="NONVIP";b.Message='';if(d)d({'data':b})}}if(Edbox.IsHtml5Player()){Edbox.Vip.GetUserVipInfo('',function(){checkExportInfo()})}else{checkExportInfo()}},PreCreateProduct:function(b,c,d){function tempCallback(a){if(a.access_type===1){a.operation_type=0;p.PrecheckCreate(c,d)}else{if(c)c()}}if(Edbox.Access===1){q.GetInfo(b,tempCallback,d)}else{if(c)c()}},PrecheckCreate:function(c,d,e,f){function suchandle(b){if(e){p.GetUserLimits(function(a){b.release_limit=a.release_limit;b.create_limit=a.create_limit;e(b)})}}p.PrecheckCreate(function(){suchandle({limit:false})},function(a){if(a.responseJSON.code==="LOBBY/PRODUCT_CREATE_LIMIT"){suchandle({limit:true,info:"need vip upgrade"});return}if(f)f(a)})},PrecheckPublish:function(c,d,e){Edbox.MMO.GetProductInfo(c,function(b){if(b.flag===0){if(d)d({data:{limit:false}})}else{p.PrecheckPublish(function(){if(d)d({limit:false})},function(a){if(a.responseJSON.code==="LOBBY/PRODUCT_RELEASE_LIMIT"){if(d){d({limit:true});return}}if(e)e(a)},e)}},e)},GetUserLimits:function(a,b){p.GetUserLimits(a,b)}};if(m&&n&&!m[n]){m[n]=q}}(Edbox,"Vip"));(function(j,k){var l={Get:function(f,g,h){Edbox.NDR.Get(f.guid,function(d){$.ajax({url:d.Url,type:"get",contentType:'application/x-www-form-urlencoded',success:function(a){if(g&&a){var b=a.split(/[(\r\n)\r\n]+/);if(f.key&&f.key!==""){var c=new Array();for(var i=0;i<b.length;i++){if(b[i].indexOf(f.key)>=0){c.push(b[i])}}g({'data':c})}else{g({'data':b})}}},error:function(e){if(h)h(e)}})})}};if(j&&k&&!j[k]){j[k]=l}}(Edbox,"Thesaurus"));(function(z,A){var B=Edbox.Api.NDR;var C=new RegExp(",|，");var D=Edbox.ComponentRootPath+"ThirdParty/jszip/jszip.min.js";var E=Edbox.ComponentRootPath+"ThirdParty/jszip/jszip-utils.js";var F={"CN":{"SimplifiedChinese":"453bd1b6-546e-473b-b8fd-a88629b79857","English":"5c017945-a61b-4a12-8281-3187b507d053","TraditionalChinese":"28cea709-1c27-43db-973b-344393fa3fa1","TraditionalChinese_TW":"b3d89c03-cf4e-4e03-b912-546ae2934d02"},"US":{"SimplifiedChinese":"5d33aafe-171e-4d5c-a3a8-41c84a716bc0","English":"755c7090-5446-4cba-8e6f-511f7e957b6a","TraditionalChinese":"6ed7d461-ad00-45ef-9310-dd1b08d752fb","TraditionalChinese_TW":"dd7c5a8f-9896-4deb-af0a-971340968902","Arabic_EG":"755c7090-5446-4cba-8e6f-511f7e957b6a"},"TW":{"SimplifiedChinese":"5d33aafe-171e-4d5c-a3a8-41c84a716bc0","English":"755c7090-5446-4cba-8e6f-511f7e957b6a","TraditionalChinese":"6ed7d461-ad00-45ef-9310-dd1b08d752fb","TraditionalChinese_TW":"dd7c5a8f-9896-4deb-af0a-971340968902"},"HK":{"SimplifiedChinese":"5d33aafe-171e-4d5c-a3a8-41c84a716bc0","English":"755c7090-5446-4cba-8e6f-511f7e957b6a","TraditionalChinese":"6ed7d461-ad00-45ef-9310-dd1b08d752fb","TraditionalChinese_TW":"dd7c5a8f-9896-4deb-af0a-971340968902"},"EG":{"SimplifiedChinese":"5d33aafe-171e-4d5c-a3a8-41c84a716bc0","English":"755c7090-5446-4cba-8e6f-511f7e957b6a","TraditionalChinese":"6ed7d461-ad00-45ef-9310-dd1b08d752fb","TraditionalChinese_TW":"dd7c5a8f-9896-4deb-af0a-971340968902","Arabic_EG":"755c7090-5446-4cba-8e6f-511f7e957b6a"}};var G;var H;var I;var J;var K;var L=["题目编号","题干","配图","音频","答案","标签","选项"];var M=["文字","配图","音频"];var N=false;var O=new Object;function Get(j,k,l){var m=j||F[Edbox.AppKey][Edbox.Language];B.Get(m,function(h){var i=h.tech_info.source.location.replace('${ref-path}',Edbox.Protocol+"://"+Edbox.GetHost("CDNCS")+"/v0.1/static");Require([D,E],function(){JSZipUtils.getBinaryContent(i,function(f,g){if(f&&l)l(f);JSZip.loadAsync(g).then(function(c){var d=new Array();var e=c.file('Items.json');e.async('string').then(function(a){var b="";if(a){b=a.toString()}else{if(l)l("Buffer Error");return}if(b){if(b.indexOf("\r\n")!==-1){b=b.replace(/[\r\n]/g,"");b=b.replace(/\s*/g,"")}obj=JSON.parse(b);Handle(obj)}else{if(l)l("Content Not A Json");return}});function Handle(b){ChangeToItemJson(b,function(a){if(k)k(a)},l)}})})})},l)}function GetZip(c,d,e){Require([D,E],function(){var b=new JSZip();b.file('Items.json',JSON.stringify(c));b.generateAsync({type:"blob"}).then(function(a){if(d)d(a);else e()})})}function Set(h,i,j,k,l,m){if(!h){if(m)m("No Data")}var n=Edbox.EbUserId;var o="";var p=null;var q=null;B.GetSession(n,function(g){function UploadPreview(){if(i){var d=Edbox.NDR.Base64ToBlob(i);if(k)k("上传预览图",1);k("上传预览图",2);var e=d.type;var f="preview";if(!e||e.length<1){e="image/png"}f+=e.replace("image/",".");Edbox.Api.CS.UpLoadToCS(g.session_id,g.dist_path,f,d,function(a,b,c){k("上传预览图",2+Math.floor(a*18/100));UploadAtlas()},function(a){o='${ref-path}'+a.path},m)}else{UploadAtlas()}}function UploadAtlas(){if(j){var d=Edbox.NDR.Base64ToBlob(j);if(k)k("上传图集",21);k("上传图集",22);var e=d.type;var f="atlas";if(!e||e.length<1){e="image/png"}f+=e.replace("image/",".");Edbox.Api.CS.UpLoadToCS(g.session_id,g.dist_path,f,d,function(a,b,c){k("上传图集",22+Math.floor(a*28/100))},function(a){p={'size':a.inode.size,'location':'${ref-path}'+a.path,'format':e,'md5':a.inode.md5};UploadZip()},m)}else{UploadZip()}}function UploadZip(){GetZip(h,function(d){if(k)k("上传Zip数据包",51);k("上传Zip数据包",52);Edbox.Api.CS.UpLoadToCS(g.session_id,g.dist_path,"data.gzip",d,function(a,b,c){k("上传Zip数据包",52+Math.floor(a*38/100))},function(a){var b="application/zip";q={'size':a.inode.size,'location':'${ref-path}'+a.path,'format':b,'md5':a.inode.md5};PostToNDR()},m)},m)}function PostToNDR(){k("上传到NDR",91);var b={'title':"Items Bank",'preview':{'png':o},'language':'zh-CN','identifier':g.uuid,'life_cycle':{'version':'1.0','status':'ONLINE','enable':true,'creator':n,'publisher':'NetDragon'},'categories':{"assets_type":[{'taxoncode':'$RA0106'},{'taxoncode':'RT022'},{'taxoncode':'$RA1201'}]},'tech_info':{}};if(p){drData.tech_info.atlas=p}if(q){b.tech_info.zip=q;b.tech_info.source=q}B.Post(g.uuid,b,function(a){k("上传到NDR",100);if(l)l(a.identifier)},m)}UploadPreview()},m)}function CheckUploadLanguage(a){var b=Edbox.Language;var c=["SimplifiedChinese","English","TraditionalChinese","TraditionalChinese_TW"];for(var d=0,length=c.length;d<length;d++){Edbox.Language=c[d];var h=Edbox.GetTip('ITEM_HEARDER');if(a[h[1]]!==undefined){if(d===2){if(a[h[3]]===undefined){continue}}G=Edbox.GetTip('ITEM_HEARDER');H=Edbox.GetTip('ITEM_OPTION');break}}Edbox.Language=b}function IsCanUpload(h,l,m,o,p){var q=new Array();var r=h[0];var s=h;var t=h[1];CheckUploadLanguage(t[0]);var i,j,n,k;function WordLimit(a,b){var c;var d=a;if(typeof d!=="string"){d=d.toString()}switch(b){case"title":c=l||120;break;case"option":c=m||120;break}var e=/[^\\x00-\xff]/ig;var f=d.match(e);var g=d.length;if(f!==null){g=g+f.length}if(g>c){return true}return false}function SetErrorState(a,b,c,d){q={"Code":"UploadError","Message":{"ErrorType":a,"ItemNum":b,"ItemOption":c||""}};if(d)d(q)}for(var u=0,length=t.length;u<length;u++){var v=t[u];if((!v[G[1]]||v[G[1]].toString().match(/^\s*$/))&&(!v[G[2]]||v[G[2]].toString().match(/^\s*$/))&&(!v[G[3]]||v[G[3]].toString().match(/^\s*$/))){SetErrorState("TITLE_NULL",v[G[0]],"",p);return}if(WordLimit(v[G[1]],"title")){SetErrorState("TITLE_WORDS_LIMIT",v[G[0]],"",p);return}var w=new Array();for(i=0,n=r.length;i<n;i++){if(r[i].title.indexOf(G[6])!==-1){if(v[r[i].title]&&v[r[i].title].toString().match(/^\s*$/)===null){var x=r[i].title.match(/\d+/g)[0];if(r[i].title.indexOf(H[0])!==-1&&WordLimit(v[r[i].title],"option")){SetErrorState("OPTION_WORDS_LIMIT",v[G[0]],x,p);return}if(w.indexOf(x)===-1){w.push(x)}}}}w.sort(function(a,b){return a-b});if(w.length<2){SetErrorState("OPTION_NOTENOUGH",v[G[0]],"",p);return}for(i=0,n=w.length;i<n;i++){if(parseInt(w[i])!==i+1){SetErrorState("OPTION_FORM_ERROR",v[G[0]],i+1,p);return}}if(!v[G[4]]||v[G[4]].toString().match(/^\s*$/)){SetErrorState("ANSWER_NULL",v[G[0]],"",p);return}else{if(!v[G[4]].toString().match(/^(\d+(,|，))*\d$/)){SetErrorState("ANSWER_FORM_ERROR",v[G[0]],"",p);return}}var y=v[G[4]].toString().split(C);for(j=0,k=y.length;j<k;j++){if(w.indexOf(y[j])===-1){SetErrorState("ANSWER_SELECT_ERROR",v[G[0]],"",p);return}}}if(o)o(s)}function ChangeToItemJson(b,c,d){var e=b[1];var f=b[0];var g=new Array;for(var i=0,n=e.length;i<n;i++){var h=i+1;var j=new Object;j.ID=Edbox.GetGUID();j.Name="Problem"+h;j.ShowName="题目"+h;j.Type=I.Type;j.Editable=I.Editable;j.Datas=JSON.parse(JSON.stringify(I.Datas));j.Datas=ItemDataHandle(j.Datas,e[i],d);g.push(j)}Edbox.Resource.StartLoad(g,function(a){},function(a){if(c)c(a)},d)}function ItemDataHandle(c,d,e){var i,k,n,j,p;if(!d){if(e)e("No Data");return}for(i=0,n=c.length;i<n;i++){c[i].ID=Edbox.GetGUID();if(typeof c[i].Datas==="undefined"){var f=J.indexOf(c[i].ShowName);if(c[i].Name==="Tag"||c[i].Name==="Title"){c[i].Value=typeof d[G[f]]==="undefined"?"":d[G[f]];if(c[i].Name==="Tag"){c[i].Value=c[i].Value.toString().match(/^\s*$/)?[]:c[i].Value.toString().split(C)}}if(c[i].Name==="Image"||c[i].Name==="Audio"){if(c[i].Type==="Image02"){c[i].GUID.push(typeof d[G[f]]==="undefined"?"":d[G[f]])}else{c[i].GUID=typeof d[G[f]]==="undefined"?"":d[G[f]]}}}else{c[i].Datas=new Array;var g=2;var h=new Array();for(var m in d){if(m.indexOf(G[6])!==-1){if(h.indexOf(m.match(/\d+/g)[0])===-1){h.push(m.match(/\d+/g)[0])}}}h.sort(function(a,b){return a-b});var q;for(var r=0,length=I.Datas.length;r<length;r++){if(I.Datas[r].Name==="Options"){q=I.Datas[r].Datas[0]}}for(k=0,p=h.length;k<p;k++){var s=JSON.parse(JSON.stringify(q));s.ID=Edbox.GetGUID();if(Edbox.Language==="English"){s.ShowName=J[6]+" "+h[k]}else{s.ShowName=J[6]+h[k]}for(j=0;j<s.Datas.length;j++){s.Datas[j].ID=Edbox.GetGUID()}c[i].Datas.push(s)}g=h.length;for(m in d){if(m.indexOf(G[6])!==-1){var t=m.match(/\d+/g);if(t<=g){for(var l=0,o=c[i].Datas[t-1].Datas.length;l<o;l++){if(m.indexOf(H[0])!==-1&&c[i].Datas[t-1].Datas[l].Name==="Title"){c[i].Datas[t-1].Datas[l].Value=d[m]}else if(m.indexOf(H[1])!==-1&&c[i].Datas[t-1].Datas[l].Name==="Image"||m.indexOf(H[2])!==-1&&c[i].Datas[t-1].Datas[l].Name==="Audio"){c[i].Datas[t-1].Datas[l].GUID=d[m]}}}}if(m.indexOf(G[4])!==-1){var u=d[m].toString().split(C);for(j=0;j<u.length;j++){if(h.indexOf(u[j])!==-1){c[i].Datas[parseInt(u[j]-1)].Correct=true}}}}}}return c}function ChangeToTableJson(a,b,c){var d=new Array;var e=new Array;var i,n,j;for(i=0,n=G.length-1;i<n;i++){if(N&&(i===2||i===3)){continue}else{e.push({"title":G[i],"dataIndex":G[i],"editable":"true"})}}var f=2;for(i=0,n=a.length;i<n;i++){for(j=0,k=a[i].Datas.length;j<k;j++){if(a[i].Datas[j].Name==="Options"){if(a[i].Datas[j].Datas.length>f){f=a[i].Datas[j].Datas.length}}}}for(i=f;i>0;i--){for(j=2;j>=0;j--){if(N&&j!==0){continue}else{if(Edbox.Language==="English"){e.splice(4,0,{"title":G[6]+" "+i+" - "+H[j],"dataIndex":G[6]+" "+i+" - "+H[j],"editable":"true"})}else{e.splice(4,0,{"title":G[6]+i+"-"+H[j],"dataIndex":G[6]+i+"-"+H[j],"editable":"true"})}}}}for(i=0,n=a.length;i<n;i++){var g=new Object();var h=a[i];g[G[0]]=i+1;for(j=0,k=h.Datas.length;j<k;j++){switch(h.Datas[j].Name){case"Title":g[G[1]]=h.Datas[j].Value;break;case"Image":if(!N){g[G[2]]=h.Datas[j].GUID}break;case"Audio":if(!N){g[G[3]]=h.Datas[j].GUID}break;case"Tag":if(h.Datas[j].Value.join(",").length!==0){g[G[5]]=h.Datas[j].Value.join(",")}break;case"Options":g=AddOption(g,h.Datas[j]);break;default:break}}d.push(g)}if(b)b([e,d])}function AddOption(a,b){var c=new Array;var d=new Array;for(var i=0,n=b.Datas.length;i<n;i++){if(b.Datas[i].Correct===true){d.push(b.Datas[i].ShowName.match(/\d+/g)[0])}for(var j=0,k=b.Datas[i].Datas.length;j<k;j++){if(Edbox.Language==="English"){switch(b.Datas[i].Datas[j].Name){case"Title":a[b.Datas[i].ShowName+" - "+H[0]]=b.Datas[i].Datas[j].Value;break;case"Image":if(!N){a[b.Datas[i].ShowName+" - "+H[1]]=b.Datas[i].Datas[j].GUID}break;case"Audio":if(!N){a[b.Datas[i].ShowName+" - "+H[2]]=b.Datas[i].Datas[j].GUID}break;default:break}}else{switch(b.Datas[i].Datas[j].Name){case"Title":a[b.Datas[i].ShowName+"-"+H[0]]=b.Datas[i].Datas[j].Value;break;case"Image":if(!N){a[b.Datas[i].ShowName+"-"+H[1]]=b.Datas[i].Datas[j].GUID}break;case"Audio":if(!N){a[b.Datas[i].ShowName+"-"+H[2]]=b.Datas[i].Datas[j].GUID}break;default:break}}}}a[G[4]]=d.join(",");N=false;return a}function Init(a){if(a){G=L;H=M}else{G=Edbox.GetTip('ITEM_HEARDER');H=Edbox.GetTip('ITEM_OPTION')}J=Edbox.GetTip('ITEM_HEARDER');K=Edbox.GetTip('ITEM_OPTION')}function GetLimitNum(a){if(typeof a==="string"){a=JSON.parse(a)}else{var b,option;if(a.Datas){for(var i=0;i<a.Datas.length;i++){if(a.Datas[i].Name==="Title"){if(a.Datas[i].Length){b=a.Datas[i].Length}}if(a.Datas[i].Name==="Options"){var c;if(a.Datas[i].Template){c=a.Datas[i].Template}else if(a.Datas[i].Datas){c=a.Datas[i].Datas[0]}if(c.Datas){for(var j=0;j<c.Datas.length;j++){if(c.Datas[j].Name==="Title"){if(c.Datas[j].Length){option=c.Datas[j].Length}}}}}}}}return{title:b,option:option}}function SetTemplate(d){if(!d){I={"ID":"","Name":"","ShowName":"","Type":"Tab03","Editable":true,"Datas":[{"ID":"","Name":"Title","ShowName":J[1],"Type":"Text02","Value":"","Length":120,"StyleEdit":false},{"ID":"","Name":"Image","ShowName":J[2],"Type":"Image02","GUID":[],"Width":256,"Height":256,"ReadOnly":false,"ImageType":["png"]},{"ID":"","Name":"Audio","ShowName":J[3],"Type":"Audio01","GUID":"","ReadOnly":false,"AudioType":["mp3"]},{"ID":"","Name":"Options","ShowName":J[6],"Type":"Select05","MinCount":2,"MaxCount":99,"ReadOnly":false,"Template":{},"Datas":[{"ID":"","Name":"Option","ShowName":"","Type":"Tab04","Editable":true,"Correct":false,"Datas":[{"ID":"","Name":"Title","ShowName":K[0],"Type":"Text02","Value":"","Length":120,"StyleEdit":false},{"ID":"","Name":"Image","ShowName":K[1],"Type":"Image01","GUID":"","Width":256,"Height":256,"ReadOnly":false,"ImageType":["png"]},{"ID":"","Name":"Audio","ShowName":K[2],"Type":"Audio01","GUID":"","ReadOnly":false,"AudioType":["mp3"]}]}]},{"ID":"","Name":"Tag","ShowName":J[5],"Type":"Tag01","Value":[],"ReadOnly":false}]};return}function SetOptionTemplate(a){var b=JSON.parse(JSON.stringify(a.Datas));b=Array.isArray(b)?b[0]:b;b.Correct=false;b.Name="Option";b.ShowName="";for(var i=0,l=b.Datas.length;i<l;i++){var c=b.Datas[i];switch(c.Name){case"Title":c.ShowName=K[0];c.Value="";break;case"Image":c.ShowName=K[1];c.GUID="";break;case"Audio":c.ShowName=K[2];c.GUID="";break}}a.Datas=new Array();a.Datas.push(b)}var e=Array.isArray(d)?d[0]:d;I=JSON.parse(JSON.stringify(e));I.Datas=new Array();var f=e.Datas;for(var g=0,length=f.length;g<length;g++){var h=JSON.parse(JSON.stringify(f[g]));switch(h.Name){case"Title":h.ShowName=J[1];h.Value="";break;case"Image":h.ShowName=J[2];h.GUID=[];break;case"Audio":h.ShowName=J[3];h.GUID="";break;case"Options":h.ShowName=J[6];SetOptionTemplate(h);break;case"Tag":h.ShowName=J[5];h.Value="";break}I.Datas.push(h)}}function CheckItemComplete(a,b,c){if(!a.Datas)return;var d=new Array();var e=false;var f=false;var g=false;var h=a.Datas;for(var i=0,n=h.length;i<n;i++){if(h[i].Name!=="Options"&&h[i].Name!=="Tag"){if(h[i].Value){f=true}}else if(h[i].Name==="Options"){var l=h[i].Datas;if(l.length<2)return;for(var j=0;j<l.length;j++){if(l[j]["Correct"]===true)e=true;for(var k=0;k<l[j].Datas.length;k++){if(l[j].Datas[k].Value&&l[j].Datas[k].Name!=="Correct"){g=true}}if(g===true){d.push(l[j].ID);g=false}}}}if(!f||!e||d.length<2){return a.ID}}function CheckItemData(a,b,c){var d=false;var e=false;var f={ThemeID:"",ItemID:""};if(!a.Datas){if(c)c({ErrMessage:"no_problemlibrary",Code:""});return}else{for(var i=0,n=a.Datas.length;i<n;i++){var g=a.Datas[i];if(g&&g.Name==="ProblemLibraryManage"){if(!g.Datas||g.Datas.length===0){if(c)c({ErrMessage:"no_problemlibrary",Code:""});return}}else{if(g&&g.Class==="ProblemLibrary"){if(!f.ItemID){f.ThemeID=g.ID}if(g.Datas.length!==0){d=true;for(var j=0;j<g.Datas.length;j++){var h=CheckItemComplete(g.Datas[j]);if(h&&!f.ItemID){f.ItemID=h}else if(!h){e=true}}}}}}if(!d){if(c)c({ErrMessage:"all_theme_no_have_item",Code:""})}else if(!e){if(c)c({ErrMessage:"all_item_no_complete",Code:f})}else{if(b)b()}}}function DeleteNull(a){for(var i=0,n=a.length;i<n;i++){var b=a[i];for(var c in b){if(c==="Datas"){DeleteNull(b[c])}else if(c==="GUID"&&b[c]===""){a.splice(i,1);i--;n--}}}}var P={IsCanUpload:function(a,b,c){IsCanUpload(a,"","",b,c)},ChangeToItemJson:function(a,b,c){Init();ChangeToItemJson(a,b,c)},ChangeToTableJson:function(a,b,c){Init();ChangeToTableJson(a,b,c)},CheckDataInSave:function(b,c,d){var e=b.Datas;if(!e)return;var f=false;var g=0;var i=0;var h;for(i=0;i<e.length;i++){h=e[i];if(h&&h.Type&&h.Type.indexOf("Tab01")>=0&&h.Name==="ProblemLibrary"){g++}}for(i=0;i<e.length;i++){h=e[i];var j=JSON.parse(JSON.stringify(h));if(h&&h.Type&&h.Type.indexOf("Tab01")>=0&&h.Name==="ProblemLibrary"){f=true;CheckItemData(j,function(a){g--;if(g===0){if(c)c(b)}},d)}}if(!f&&c){c(b)}},GetOnlineItem:function(f,g,h,i,j,k){var l=true;if(f===null){l=false}Init(l);var m=g||1;var n=h||10;if(f===null||f===""||typeof f==="undefined"){Get(f,j,k)}else if(typeof O[f]!=="undefined"){var o=(m-1)*n;var p=m*n;var q=new Array();q=O[f].slice(o,p);var r={data:q,count:O[f].length};if(j)j(r)}else{SetTemplate(i);var s=function(a){var b=(m-1)*n;var c=m*n;var d=new Array();d=a.slice(b,c);var e={data:d,count:a.length};O[f]=a;if(j)j(e)};Get(f,s,k)}},DownloadModule:function(d,e,f){Init();var g,optionLimit;if(d&&d.template){var h=GetLimitNum(d.template);g=h.title;optionLimit=h.option}SetTemplate(d.template);var k;N=true;if(typeof d!=="undefined"&&d!==null&&typeof d.name!=="undefined"){k=d.name}P.GetOnlineItem(null,1,100,d.template,function(c){ChangeToTableJson(c,function(b){let limit1=g||120;let limit2=optionLimit||120;for(var i in b[0]){for(var j in b[1]){if(typeof b[1][j][b[0][i].title]==="undefined"){b[1][j][b[0][i].title]=""}}}for(let i=0;i<b[1].length;i++){for(let key in b[1][i]){if(key.indexOf(Edbox.GetTip('ITEM_OPTION')[0])!==-1){let newKey=key+"("+Edbox.GetTip('LIMIT_WORD_TIPS')+" : "+limit2+" )";b[1]=JSON.parse(JSON.stringify(b[1]).replace(key,newKey))}}}let newKey=Edbox.GetTip('ITEM_HEARDER')[1]+"("+Edbox.GetTip('LIMIT_WORD_TIPS')+" : "+limit1+" )";b[1]=JSON.parse(JSON.stringify(b[1]).replace(Edbox.GetTip('ITEM_HEARDER')[1],newKey));Edbox.Excel2Json.JsonToExcel(b,function(a){Edbox.Excel2Json.DownloadAsExcel(a,k)},f)},f)},f)},UpLoadExcel:function(d,e,f){Init();var g,optionLimit;if(d&&d.template){var h=GetLimitNum(d.template);g=h.title;optionLimit=h.option}SetTemplate(d.template);Edbox.Excel2Json.XlsxToJson(d.data,function(c){IsCanUpload(c,g,optionLimit,function(b){ChangeToItemJson(b,function(a){if(e)e(a)},f)},f)},f)},Set:function(a,b,c,d,e,f){Set(a,b,c,d,e,f)}};if(z&&A&&!z[A]){z[A]=P}}(Edbox,"ItemBank"));(function(j,k){var l;var m;var n;var o=new Date().getTime();var p=1000*60*60*6;var q=[];function IsSensitiveJudge(a,b,c){if(b!==undefined&&b!==""){var d=a.match(q[c]);if(d){return{start:d.index,sensitive:b,str:d[0]}}}}function IsSensitiveArrayJudge(a,b,c){var d={};for(var e=0,length=b.length;e<length;e++){if(b[e]!==undefined&&b[e]!==""){for(var f=0,arrayLength=a.length;f<arrayLength;f++){var g=a[f].replace(q[e],"");if(g!==a[f]){if(d[c[f]]===undefined){d[c[f]]={is_sensitive:false,data:[]}}d[c[f]].is_sensitive=true;d[c[f]].data.push({sensitive:b[e]})}}}}return d}function GetRegExpArray(a){date=new Date().getTime();for(var i=0,len=a.length;i<len;i++){q.push(new RegExp(a[i].toLowerCase().replace(/-/g,"([\\s\\S])?").replace(/_/g,"[\\s\\S]*")))}}function JudegeSensitive(a,b,c){if(typeof a==="object"){return IsSensitiveArrayJudge(a,b,c)}else{var d=false;var e=[];for(var f=0,length=b.length;f<length;f++){var g=IsSensitiveJudge(a,b[f],f);if(g){d=true;e.push(g)}}return{is_sensitive:d,data:e}}}function IsSensitive(a,b,c){if(!a.word||!a.sensitiveList)c("No Data!");else{if(b)b(JudegeSensitive(a.word,a.sensitiveList,a.word_before))}}function GetSensitiveList(b,c,d){date=parseInt(new Date().getTime()/1000);var e={action:"filter_public_list",id:b.id||0,ct:b.ct||"edbox",ts:date,sig:b.sig||"9e65989c41c14115985b67a1e1b0d6e0"};if(new Date().getTime()-o<p&&m){if(c)c({id:n,sensitiveList:m})}else{o=new Date().getTime();Edbox.Api.Sensitive.GetSensitiveList(e,function(a){if(n>=a.id&&l&&m){if(c)c({id:n,sensitiveList:m})}else{n=a.id;l=a.sensitiveList;if(n>0&&l&&l.length!==0){m=l;GetRegExpArray(m);if(c)c({id:n,sensitiveList:m})}else{if(d)d("Data Errors")}}},d)}}function GetSensitiveCDN(b,c,d){var e=function(a){if(n!==a.id||!m){n=a.id;l=a.sensitiveList;sensitiveStr=a.sensitiveList.toString();m=l;GetRegExpArray(m)}if(c)c({id:n,sensitiveList:m})};Edbox.Api.Sensitive.GetSensitiveListCDN(e,d)}var r={GetSensitiveList:function(a,b,c){if(n){GetSensitiveList({id:n},b,c)}else{GetSensitiveCDN("",b,c)}},IsSensitive:function(b,c,d){var e=[];var f;if(typeof b==="object"){for(var g=0;g<b.length;g++){e.push(b[g].toLowerCase())}}else{f=b.toLowerCase()}var h={word:f||e,sensitiveList:m,word_before:b};if(!h.sensitiveList){GetSensitiveCDN({id:n||0},function(a){h.sensitiveList=a.sensitiveList;IsSensitive(h,c,d)},d)}else{IsSensitive(h,function(a){if(c)c(a)},d)}}};if(j&&k&&!j[k]){j[k]=r}}(Edbox,"SensitiveJudge"));(function(d,f){var g=false;function CheckOpenInLobby(){var c=function(e){var a=e.source;var b=e.data;if(b&&b.Type==="FunctionCall_IsOpenInLobby"){g=b.Datas[0]}};window.addEventListener("message",c,false);window.top.postMessage({Type:"FunctionCall",Datas:["FunctionCall_IsOpenInLobby","return Edbox.Lobby !== undefined;"]},"*")}CheckOpenInLobby();function OpenConfirmIframe(){var b=document.createElement("iframe");b.id="confirmGuest";b.setAttribute("src",getUrl());b.style.width="100%";b.style.height="100%";b.style.overflow="hidden";b.style.position="fixed";b.style.top="0";b.style.left="0";b.style.height="100%";b.style.width="100%";b.style.margin="0";b.style.padding="0";b.style.border="0";b.style.zIndex="9999";b.style.border="0";b.style.background="none";document.body.appendChild(b);b.onload=function(){var a={Type:'Confirm_Refresh',Datas:[Edbox.GetTip("VISITORS_MODEL_TITLE")+": "+Edbox.GetTip("VISITORS_MODEL_MSG"),Edbox.GetTip("VISITORS_MODEL_OK"),Edbox.GetTip("TIP_CANCEL")]};b.contentWindow.postMessage(a,"*")};window.addEventListener('message',function(a){if(a.data.Type==='Confirm_ClickConfirm'){if(Edbox.AppKey==="EG"){Edbox.Logout();window.location.reload()}else{Edbox.GotoRegister()}$("#confirmGuest").remove()}else if(a.data.Type==='Confirm_ClickCancel'){$("#confirmGuest").remove()}},false);window.onresize=function(){b.style.top=getPosTop()};function getPosTop(){return Math.max(0,(top.window.innerHeight-644)/2+top.pageYOffset)+"px"}function getUrl(){var a=Edbox.Protocol+"://"+Edbox.GetHost("Component")+"/coms/Confirm/index.html";return a}}function CheckGuest(b){if(Edbox.IsGuest()){if(g){Edbox.Message.Get(window.top,function(a){a.Start();a.Send("needRegister",[{opt:b}])})}else{OpenConfirmIframe()}return true}return false}function AddPrecheckCreate(){var c=function(a,b){if(CheckGuest("create")){if(a)a({ret:false,info:"create limit need registered user "})}else{if(a)a({ret:true})}};if(Edbox.PreGoEditor===undefined){Edbox.PreGoEditor=new Array()}Edbox.PreGoEditor=Edbox.PreGoEditor.concat({type:"guestCreateProduct",func:c})}AddPrecheckCreate();var h={CheckShare:function(){if(CheckGuest("share")){return false}else{return true}}};if(d&&f&&!d[f]){d[f]=h}}(Edbox,"Guest"));(function(j){function InitServerKey(){var d=window.location.hostname.replace("component","").replace("game","").replace("api","");var e=Object.keys(j.Host.Game);for(var i=0;i<e.length;i++){var f=e[i];var g=j.Host.Game[f].replace("component","").replace("game","").replace("api","");if(d.indexOf(g)>=0){j.ServerKey=f;return}}d=window.location.hostname;function Test(a){var b=Object.keys(a);for(var i=0;i<b.length;i++){var c=b[i];if(d===a[c]){j.ServerKey=c;return true}}}if(Test(j.Host.Login))return;d=j.ComponentRootPath;for(i=0;i<e.length;i++){f=e[i];var h=j.Host.Game[f].replace("component","").replace("game","").replace("api","");if(d.indexOf(h)>0){j.ServerKey=f;return}}j.ServerKey="Dev"}function PopstateEvent(){window.addEventListener("popstate",function(e){var a=e.target;if(a!==a.top){var b=new Object();b.Type="popstate";a.top.postMessage(b,"*")}},false)}if(j){InitServerKey();j.Init();Edbox.InitRequire(Edbox.ComponentRootPath+"Config/AppConfig.js?v="+new Date().getTime());Edbox.InitRequire(Edbox.ComponentRootPath+"ThirdParty/wallet/sdpwalletsdk.js?v="+new Date().getTime());Edbox.Load("Loading");PopstateEvent()}}(Edbox));(function(v,w){var x="";var y="";var z=2;var A="";var B="";var C="";var D="";var E="";var F=[];var G={};var H=new Dictionary();var I=0;var J=60;var K={ConfigGuid:{QA:"681fd75a-e77b-afcb-481c-39a15ccef521",Dev:"bcbdae7c-d1f0-d1cb-09d2-b0e2ded89a5a",Feature:"a0fabf0c-4988-2ad9-7c4c-bbf80c3890d9",CN:"d017e42d-6c6c-6982-14d5-a425c4e23ef6",BetaCN:"c1054e19-b7e3-313f-ef3d-4e34eb6e5aac",HK:"",US:"d05ceb51-f4b4-4938-f225-2ab43fa93881",Beta:"5ca2fc3c-dca6-da00-d572-18df84d3c676"},ProgramGuid:{QA:"b31f7d3f-f5fe-dbb3-12da-c9c2ffcc8d8f",Dev:"3627f47c-db07-b36c-29e5-f9011bbe441a",Feature:"eadb8780-3a1a-8858-f819-120e63b65cbd",CN:"19fba8cd-eb6c-e030-f7ae-2f136672d5a4",BetaCN:"9ac7baa7-9c09-c69e-f2c0-cbbbf2c60763",HK:"",US:"5a071066-be46-ce3d-df92-4be16561283b",Beta:"1f892a14-b4d5-aee0-8d9e-232e41b92ba4"},Html5PlayerId:{QA:"6eb4c904-c320-5679-28ec-78d8864679c4",Dev:"fb42879f-d277-49cc-c153-caefa22f3267",Feature:"823efda6-d3f1-e261-e34f-8b485982dfd6",CN:"4021ec0a-7741-320b-a8ae-219b6f2fc5a4",BetaCN:"7d4cf2f9-263b-94c2-630e-840f991f0165",HK:"",US:"bcf5034f-22e3-343f-5c24-9d43d2da150d",Beta:"269cf52f-e4c8-25bc-0b57-175f5560bf05"},ApkToolId:{QA:"291888de-ccbc-41f1-909a-62935f3142f4",Dev:"a39415cb-1009-80e6-e13e-ce53c9d2925d",Feature:"44167a59-64f8-bd63-67eb-d89ba353b6f5",CN:"92e5a457-0e4f-60fd-ecfa-a3cd3f8ff37c",BetaCN:"b227fddd-f5dc-5fd9-982b-d6fbd3af1588",HK:"",US:"41143802-57a4-3208-e027-7a4eedab1083",Beta:"1ef2649e-57eb-1d24-6256-679f3cf6f981"},BaseServiceExeId:{QA:"a5b082d8-a968-240b-d376-65eb7b87d5e7",Dev:"b2dd0929-6f5e-0799-d4f4-64a806ceba5b",Feature:"835ba3df-8bab-0ba6-771e-4458abfe4b7c",CN:"09df2ad0-a14c-89c1-995e-edbefa5c266c",BetaCN:"364bbc6c-ad5e-a1c8-75ba-ea06ce9defd0",HK:"",US:"a7913bc2-6874-e0d2-5d46-c4dc4e210e53",Beta:"dbda1efd-219e-e641-b750-13eb050f8486"}};var L=null;var M=null;var N=null;var O=null;function GetBaseInfo(a){var b=new Object();var c=a.Datas;for(var i=0;i<=c.length;i++){var d=c[i];if(d.Name==="BaseInfo"){for(var j=0;j<d.Datas.length;j++){var e=d.Datas[j];if(e.Name==="GameName"){A=e.Value;b.GameName=e.Value}if(e.Name==="Description"){C=e.Value;b.Description=e.Value}if(e.Name==="CoverImage"){D=e.GUID;E=e.Value;b.CoverImage=e.GUID}}break}}return b}function Log(a,b){if(S.OnLog){if(a)S.OnLog(a);if(b)S.OnLog(b)}}function SavePackage(c,d,e,f,g){if(S.NewPackageGuid&&S.NewPackageGuid.length>0&&Q){e(S.NewPackageGuid);return}S.HandleDatas(c,function(a){var b=new Object();b[Edbox.Language]=a;Edbox.Package.UpLoadPackages(b,Edbox.Language,d,e,f)},function(a){console.error(a)},g)}function PlayHandle(i,j,k,l){function webPlay(a,b){var c={Url:a,Width:Edbox.ServerInfo.width||0,Height:Edbox.ServerInfo.height||0};if(b)b(c)}function clientPlay(){S.CheckEbService(function(d){if(d!==""){var e={};e.Code="UNINSTALL";e.Message=d;if(k)k(e)}else{var f={};f.ProductId=Edbox.GameId;f.PlayType=Edbox.Access;f.Version='';var g=l;var h=GetMessageData(g,f,"PlayGame");Edbox.WebSocket.Send(h);Edbox.WebSocket.OpenGamePlayResultCallback=function(a,b){if(a===g){var c={};if(b.Code==="SUCCESS"||b.Code==="CANCEL"){c.Code=b.Code;c.Message="";if(j)j(c)}else{if(navigator&&navigator.onLine){c.Code=b.Code}else{c.Code="NETWORK_OFFLINE"}c.Message=Edbox.GetTip("ERROR_"+c.Code);if(k)k(c)}}};Edbox.WebSocket.OpenGamePlayProgressCallback=function(a,b){if(a===l){H.Set(l,b)}}}},function(e){var a={};if(navigator&&navigator.onLine){a.Code="NetWorkError";a.Message=e}else{a.Code="NETWORK_OFFLINE";a.Message=Edbox.GetTip("ERROR_"+a.Code)}if(k)k(a)})}function play(){Edbox.DataStatistic.EditPlay();Edbox.GetPreviewGameUrl(function(a){if(a&&a.trim().length>0)webPlay(a,j);else clientPlay()},k)}Log("编辑器试玩数据:",i);if(P){play();return}SaveHandle(i,function(a){play()},k)}function limitips(a){return Edbox.GetTip("VIP_NEED_UPGTRADE1")+a.create_limit+Edbox.GetTip("VIP_NEED_UPGTRADE2")+a.release_limit+Edbox.GetTip("VIP_NEED_UPGTRADE3")+Edbox.GetTip("VIP_NEED_UPGTRADE4")}function SaveAsHandle(g,h,j,k,l){function reqerr(e){S.SaveCancel();if(e.responseText){if(k)k(Edbox.GetTip("ERROR_EditorSaveAsFailed")+e.responseText)}else{if(k)k(Edbox.GetTip("ERROR_EditorSaveAsFailed")+e)}}Log("编辑器另存为数据:",g);if(z===1){SaveHandle(g,j,k,l,true);return}var m=0;var n="";var o=0;function CopyProduct(d,e,f){S.PrecheckCreate(function(c){if(c.data.limit){reqerr(limitips(c.data));return}else{Edbox.MMO.CopyProduct(Edbox.GameId,d,'',e,function(b){if(b.responseJSON&&b.responseJSON.code&&b.responseJSON.code==="LOBBY/PRODUCT_CREATE_LIMIT"){Edbox.Api.MMO.GetUserLimits(function(a){reqerr(limitips(a))})}else{reqerr(b)}})}},f,true)}function callProgress(a,b){if(m<a){o=m}if(a===999){o=100;m=100}else{m=Math.min(100,Math.floor(a))}n=b}S.SaveCancel();I=setInterval(function(){var a=Math.min(o+1,m);if(a===o)return;o=a;Log("保存进度 "+o+"%");if(l){l(o,n)}if(o>=100){clearInterval(I);I=0}},100);var p=GetBaseInfo(g);callProgress(10,"CopyProduct");CopyProduct(h,function(e){callProgress(15,"GetPackageBlob");function load(b){var c=b.Datas;if(!c)return;for(var i=0;i<c.length;i++){var d=c[i];if(d.Type.indexOf("Tab01")<0)continue;if(d.Name==="Ranking"){(function(){var a=d.Datas[2].Datas;for(var i=0;i<a.length;i++){if(a[i].RankUid){delete a[i].RankUid}}}());break}load(d)}}load(g);N=e;SavePackage(g,function(a,b){callProgress(15+a*80/100,b)},function(b){callProgress(95,"UpdateProduct");Edbox.MMO.UpdateProduct(e,b,h,p.CoverImage,p.Description,function(a){Edbox.GameId=a.productid;x=a.productid;if(a.version){y=a.version;Edbox.Version=a.version}Edbox.PackageGuid=b;PackageGuid=Edbox.PackageGuid;if(Edbox.Access===1){Edbox.Access=2;z=2}UpdataDataSet();Edbox.DataStatistic.EditSave(Edbox.GameId);setTimeout(function(){callProgress(999,"Save Finish Tip");Edbox.WindowEvent.Hide()},500);if(j){setTimeout(function(){j(x)},1000)}else{alert(Edbox.GetTip("TIP_EditorSaveSucess"))}},reqerr)},reqerr,2)},reqerr)}function AddEditRecord(a,b,c){Edbox.Api.MMO.PostChangeNumEditRecord(a,b,c)}function UpdataDataSet(){var a=Edbox.DataSet.Get("EdboxArgs");var b=JSON.parse(Edbox.Decode(a));b.Version=Edbox.Version;b.GameId=Edbox.GameId;b.Access=Edbox.Access;Edbox.DataSet.Set("EdboxArgs",Edbox.Encode(JSON.stringify(b)))}function SaveHandle(f,g,h,i,j){var k=0;var l="";var m=0;N=null;function reqerr(e){S.SaveCancel();var a=!j?Edbox.GetTip("ERROR_EditorSaveFailed"):Edbox.GetTip("ERROR_EditorSaveAsFailed");if(e.responseText){if(h)h(a+e.responseText)}else{if(h)h(a+e)}}function callProgress(a,b){a=Math.floor(a);if(k<a){m=k}if(a===999){m=100;k=100}else{k=Math.min(100,a)}l=b}Log("编辑器保存数据:",f);if(P){callProgress(100,"Save Finish");if(g)g(Edbox.GameId);return}S.SaveCancel();I=setInterval(function(){var a=Math.min(m+1,k);if(a===m)return;m=a;Log("保存进度 "+m+"%");if(i){i(m,l)}if(m>=100){clearInterval(I);I=0}},100);S.PrecheckCreate(function(d){if(d.data.limit){reqerr(limitips(d.data));return}callProgress(5,"GetPackageBlob");var e=GetBaseInfo(f);SavePackage(f,function(a,b){callProgress(5+a*90/100,b)},function(c){callProgress(95,"SaveProduct");Edbox.MMO.SaveProduct(Edbox.GameId,c,e.GameName,e.CoverImage,e.Description,function(a){if(a.productid===undefined){reqerr("Productid is Null");return}callProgress(100,"Save Finish");P=true;if(a.version){y=a.version;Edbox.Version=a.version}Edbox.GameId=a.productid;x=a.productid;Edbox.PackageGuid=c;PackageGuid=Edbox.PackageGuid;if(Edbox.Access===1){Edbox.Access=2;z=2}UpdataDataSet();Edbox.Message.Broadcast("EditSave",[]);Edbox.DataStatistic.EditSave(Edbox.GameId);AddEditRecord(Edbox.GameId);setTimeout(function(){callProgress(999,"Save Finish Tip")},500);if(g){setTimeout(function(){g(Edbox.GameId)},1000)}else{alert(Edbox.GetTip("TIP_EditorSaveSucess"))}},function(b){if(b.responseJSON&&b.responseJSON.code&&b.responseJSON.code==="LOBBY/PRODUCT_CREATE_LIMIT"){Edbox.Api.MMO.GetUserLimits(function(a){reqerr(limitips(a))})}else{reqerr(b)}},x)},reqerr,1)},h)}function SaveTempHandle(d,f,g){function reqerr(e){console.log(e);if(e.responseText){if(g)g(Edbox.GetTip("ERROR_EditorSaveFailed")+e.responseText)}else{if(g)g(Edbox.GetTip("ERROR_EditorSaveFailed")+e)}}var h=GetBaseInfo(d);SavePackage(d,null,function(c){if(Edbox.Access===1){Edbox.MMO.SaveTempProduct(Edbox.GameId,y,c,h.CoverImage,h.Description,function(a){if(a.app_id===undefined){reqerr("Productid is Null");return}if(f)f(a.app_id,h.CoverImage,a.TempName);else{alert(Edbox.GetTip("TIP_EditorSaveSucess"))}},reqerr)}else{Edbox.MMO.GetProductInfo(Edbox.GameId,function(b){Edbox.MMO.SaveTempProduct(b.baseid,b.base_version,c,h.CoverImage,h.Description,function(a){if(a.app_id===undefined){reqerr("Productid is Null");return}if(f)f(a.app_id,h.CoverImage,a.TempName);else{alert(Edbox.GetTip("TIP_EditorSaveSucess"))}},reqerr)},reqerr)}},reqerr,3)}function AddListenEvent(){var c=Edbox.Message.OnReceive;Edbox.Message.OnReceive=function(a,b){if(c)c(a,b);if(a.Type==="Add"||a.Type==="Update"||a.Type==="Delete"){P=false;Q=false;Edbox.WindowEvent.Show()}};c=Edbox.Message.OnSend;Edbox.Message.OnSend=function(a,b){if(c)c(a,b);if(a.Type==="Add"||a.Type==="Update"||a.Type==="Delete"){P=false;Q=false;Edbox.WindowEvent.Show()}};Edbox.Message.AddMessageHandler("ListenEvent",function(a,b){console.log(a);F=a;G=b})}function GetMessageData(a,b,c){var d=Edbox.Encode(JSON.stringify(b));var e={};e.ConfigGuid=K["ConfigGuid"][Edbox.ServerKey];e.WebServer=Edbox.Protocol+"://"+Edbox.GetHost("Login")+"/";e.ProgramGuid=K["ProgramGuid"][Edbox.ServerKey];e.ApkToolId=K["ApkToolId"][Edbox.ServerKey];e.Html5PlayerId=K["Html5PlayerId"][Edbox.ServerKey];e.Language=Edbox.Language;if(Edbox.SDPAppId&&Edbox.SDPAppId.trim().length>0){e.SDPAppId=Edbox.SDPAppId}else{e.SDPAppId=''}e.LoginArea=Edbox.Area;e.Channel=Edbox.Channel;e.AppKey=Edbox.AppKey;var f={};f.TaskId=a;f.TaskConfigData=e;f.Code=c;f.Data=d;return JSON.stringify(f)}function BaseInfoVerified(a,b,c){var d=GetBaseInfo(a);if(d.GameName.match(/^[ ]+$/)){console.log("GameName all space");if(c)c(Edbox.GetTip("ERROR_GAMENAME_SPACE"));return}if(d.GameName.match(/[\\\/:*?"<>|]/)){console.log("GameName illegal_character");if(c)c(Edbox.GetTip("ERROR_ILLEGAL_CHARACTER"));return}if(b)b(d)}var P=false;var Q=false;var R=false;function CheckOpenInLobby(){var c=function(e){var a=e.source;var b=e.data;if(b&&b.Type==="FunctionCall_IsOpenInLobby"){R=b.Datas[0]}};window.addEventListener("message",c,false);window.top.postMessage({Type:"FunctionCall",Datas:["FunctionCall_IsOpenInLobby","return Edbox.Lobby !== undefined;"]},"*")}CheckOpenInLobby();var S={OnLog:null,NewPackageGuid:"",HandleDatas:function(l,m,n,o){var p=JSON.parse(JSON.stringify(l));Log("Datas原始数据处理 开始",p);function handleStaticData(){var e=null;var f=null;var g=null;var h=null;function load(b){var c=b.Datas;if(!c)return;for(var i=0;i<c.length;i++){var d=c[i];if(d.Type.indexOf("Tab01")<0)continue;if(d.Class==="Loading"&&d.Name==="Loading"){e=d}else if(d.Class==="Ranking"&&d.Name==="Ranking"){(function(){if(M){var a=d.Datas[2].Datas;for(var i in a){a[i].RankUid=M[2].Datas[i].RankUid;Edbox.Ranking.rankidMap[a[i].ID]=M[2].Datas[i].RankUid}}f=d}())}else if(d.Class==="Share"){g=d}else if(d.Class==="Login"){h=d}load(d)}}load(p);if(!p.StaticData){p.StaticData=new Object();p.StaticData.ID="StaticData";p.StaticData.Name="StaticData";p.StaticData.Type="StaticData";p.StaticData.ShowName="静态数据";p.StaticData.Datas=new Array()}if(g){p.StaticData.Share=g}if(h){p.StaticData.Login=h}if(e)p.StaticData.Loading=e;if(f){p.StaticData.Ranking=f;if(f.Datas){L=f.Datas[2]}}Log("Datas EditorComponents 数据处理 开始 ",p);if(Edbox.EditorComponents){if(o===1){Edbox.EditorComponents.Save(p,function(a){if(m){Log("Datas原始数据处理 成功 ",a);m(a)}},n)}else{Edbox.EditorComponents.SaveAs(p,function(a){if(m){Log("Datas原始数据处理 成功 ",a);m(a)}},n)}}else{if(m){Log("Datas原始数据处理 成功 ",p);m(p)}}}function GetNewRankingConfig(a){var b=a.Datas;if(!b)return;for(var i=0;i<b.length;i++){var c=b[i];var d=JSON.parse(JSON.stringify(c));if(c&&c.Type&&c.Type.indexOf("Tab01")>=0&&c.Name==="Ranking"){M=c.Datas;return}if(c&&c.Type&&c.Type.indexOf("Tab0")>=0){GetNewRankingConfig(d,c)}}}GetNewRankingConfig(p);if(M){var q=M[2];if(L&&o!==2){var r={};for(var i in q.Datas){if(!q.Datas[i].RankUid&&Edbox.Ranking.rankidMap[q.Datas[i].ID]){q.Datas[i].RankUid=Edbox.Ranking.rankidMap[q.Datas[i].ID]}if(q.Datas[i].RankUid){r[q.Datas[i].RankUid]=true;Edbox.Ranking.rankidMap[q.Datas[i].ID]=q.Datas[i].RankUid}}for(var j in L.Datas){var s=L.Datas[j].RankUid;if(s&&!r[s]){Edbox.Ranking.DeleteRanking(s)}}}var t=0;var u=N?N:x;if(q.Datas.length===0){handleStaticData();return}if(!u){handleStaticData();return}for(var k in q.Datas){if(!q.Datas[k].RankUid){(function(b){Edbox.Ranking.CreateRanking(u,M,q.Datas[b],function(a){q.Datas[b].RankUid=a.rank_uuid;Edbox.Ranking.rankidMap[q.Datas[b].ID]=a.rank_uuid;t++;if(t===q.Datas.length){handleStaticData()}},function(a){console.error(a)})})(k)}else{(function(b){Edbox.Ranking.RefreshRanking(u,M,q.Datas[b].RankUid,q.Datas[b],function(){t++;if(t===q.Datas.length){handleStaticData()}},function(a){console.error(a)})})(k)}}}else{handleStaticData()}},ExportEditor:function(k,l,m){if(!(navigator&&navigator.onLine)){var n={};n.Code="NETWORK_OFFLINE";n.Message=Edbox.GetTip("ERROR_"+n.Code);if(m)m(n);return}S.CheckEbService(function(i){if(i!==""){var j={};j.Code="UNINSTALL";j.Message=i;if(m)m(j)}else{S.SaveTemp(k,function(d,e,f){var g={};g.ProductId=d;g.LogoResID=e;g.AccessType=2;g.GameName=f;var h=GetMessageData(k.taskId,g,"ExportEditor");Edbox.WebSocket.Send(h);Edbox.WebSocket.ExportEditorResultCbDic.Set(k.taskId,function(a,b){if(a===k.taskId){var c={};if(b.Code==="SUCCESS"||b.Code==="CANCEL"){if(b.Code==="SUCCESS"){Edbox.DataStatistic.ExportEditorTemplate(d)}c.Code=b.Code;c.Message="";if(l)l(c)}else{if(navigator&&navigator.onLine){c.Code=b.Code}else{c.Code="NETWORK_OFFLINE"}c.Message=Edbox.GetTip("ERROR_"+c.Code);if(m)m(c)}}});Edbox.WebSocket.ExportEditorProgressCbDic.Set(k.taskId,function(a,b){if(a===k.taskId){H.Set(k.taskId,b)}})},function(e){var a={};if(navigator&&navigator.onLine){a.Code="SAVEFAILED";a.Message=e}else{a.Code="NETWORK_OFFLINE";a.Message=Edbox.GetTip("ERROR_"+a.Code)}if(m)m(a)})}},function(e){var a={};if(navigator&&navigator.onLine){a.Code="NetWorkError";a.Message=e}else{a.Code="NETWORK_OFFLINE";a.Message=Edbox.GetTip("ERROR_"+a.Code)}if(m)m(a)})},ExportExeGame:function(f,g,h){S.CheckExportLimits(1,function(){var d={};d.ProductId=f.appId;d.LogoResID=f.icon;d.AccessType=2;d.GameName=f.gameName;var e=GetMessageData(f.taskId,d,"ExportPCGame");Edbox.WebSocket.Send(e);Edbox.WebSocket.ExportExeResultCbDic.Set(f.taskId,function(a,b){if(a===f.taskId){var c={};if(b.Code==="SUCCESS"||b.Code==="CANCEL"){if(b.Code==="SUCCESS"){Edbox.DataStatistic.ExportGame(f.appId,"exe")}c.Code=b.Code;c.Message="";if(g)g(c)}else{if(navigator&&navigator.onLine){c.Code=b.Code;if(c.Code==="EXPORTLIMIT"){c.Message=b.Message}else{c.Message=Edbox.GetTip("ERROR_"+c.Code)}}else{c.Code="NETWORK_OFFLINE";c.Message=Edbox.GetTip("ERROR_"+c.Code)}if(h)h(c)}}});Edbox.WebSocket.ExportExeProgressCbDic.Set(f.taskId,function(a,b){if(a===f.taskId){H.Set(f.taskId,b)}})},h)},ExportH5Game:function(f,g,h){S.CheckExportLimits(3,function(){var d={};d.ProductId=f.appId;d.LogoResID=f.icon;d.AccessType=2;d.GetType=7;d.GameName=f.gameName;var e=GetMessageData(f.taskId,d,"ExportH5Game");Edbox.WebSocket.Send(e);Edbox.WebSocket.ExportH5GameResultCbDic.Set(f.taskId,function(a,b){if(a===f.taskId){var c={};if(b.Code==="SUCCESS"||b.Code==="CANCEL"){if(b.Code==="SUCCESS"){Edbox.DataStatistic.ExportGame(f.appId,"h5")}c.Code=b.Code;c.Message="";if(g)g(c)}else{if(navigator&&navigator.onLine){c.Code=b.Code;if(c.Code==="EXPORTLIMIT"){c.Message=b.Message}else{c.Message=Edbox.GetTip("ERROR_"+c.Code)}}else{c.Code="NETWORK_OFFLINE";c.Message=Edbox.GetTip("ERROR_"+c.Code)}if(h)h(c)}}})},h)},ExportApk:function(f,g,h){S.CheckExportLimits(2,function(){var d={};d.ProductId=f.appId;d.LogoResID=f.icon;d.AccessType=2;d.GameName=f.gameName;var e=GetMessageData(f.taskId,d,"ExportApk");Edbox.WebSocket.Send(e);Edbox.WebSocket.ExportApkResultCbDic.Set(f.taskId,function(a,b){if(a===f.taskId){var c={};if(b.Code==="SUCCESS"||b.Code==="CANCEL"){if(b.Code==="SUCCESS"){Edbox.DataStatistic.ExportGame(f.appId,"apk")}c.Code=b.Code;c.Message=b.Message;if(g)g(c)}else{if(navigator&&navigator.onLine){c.Code=b.Code;if(c.Code==="EXPORTLIMIT"){c.Message=b.Message}else{c.Message=Edbox.GetTip("ERROR_"+c.Code)}}else{c.Code="NETWORK_OFFLINE";c.Message=Edbox.GetTip("ERROR_"+c.Code)}if(h)h(c)}}});Edbox.WebSocket.ExportApkProgressCbDic.Set(f.taskId,function(a,b){if(a===f.taskId){H.Set(f.taskId,b)}})},h)},CheckExportLimits:function(d,f,g){var h={};if(!(navigator&&navigator.onLine)){h={};h.Code="NETWORK_OFFLINE";h.Message=Edbox.GetTip("ERROR_"+h.Code);if(g)g(h);return}if(!P){h={};h.Code="UNSAVE";h.Message="";if(g)g(h);return}function errorBack(e){var a={};if(navigator&&navigator.onLine){a.Code="NetWorkError";a.Message=e}else{a.Code="NETWORK_OFFLINE";a.Message=Edbox.GetTip("ERROR_"+a.Code)}if(g)g(a)}function checkExportLimit(b){var c={};if(b!==""){c.Code="UNINSTALL";c.Message=b;if(g)g(c)}else{if(Edbox.UserVipInfo&&Edbox.UserVipInfo.left_time>0){if(Edbox.UserVipInfo.vip_level===2){if(f)f()}else{Edbox.Api.MMO.GetExportPayInfo(function(a){if(a){if(d===1){if(a.exe_export_limit>0||a.exe_export_limit===-1){if(f)f()}}else if(d===2){if(a.apk_export_limit>0||a.apk_export_limit===-1){if(f)f()}}else if(d===3){if(a.h5_export_limit>0||a.h5_export_limit===-1){if(f)f()}}}else{c.Code="EXPORTLIMIT";c.Message="";if(g)g(c)}},errorBack)}}else{c.Code="NONVIP";c.Message='';if(g)g(c)}}}if(Edbox.IsHtml5Player()){Edbox.Vip.GetUserVipInfo('',function(){S.CheckEbService(checkExportLimit,errorBack)})}else{S.CheckEbService(checkExportLimit,errorBack)}},GetProgress:function(a,b,c){if(H.ContainsKey(a)){var d=H.Get(a);if(b)b(d)}else{if(b)b(0)}},CheckEbService:function(b,c){Edbox.WebSocket.CheckIsOpen(function(a){if(a){b("")}else{S.GetProgramLocation(b,c)}})},GetProgramLocation:function(c,d){var f="/edbox/v1.0/package/lastest_version";var g={pkg_guid:K["BaseServiceExeId"][Edbox.ServerKey],pkg_version:"1.0.0",pkg_platform:"PC",language:"zh-CN"};$.ajax({url:Edbox.Protocol+"://"+Edbox.GetHost("Login")+f,type:"post",data:JSON.stringify(g),contentType:'application/x-www-form-urlencoded',success:function(a){var b=JSON.parse(a);if(b&&b.data){c(b.data.location)}else{d("GetProgramLocation failed")}},error:function(e){if(d){d(e)}}})},SaveCancel:function(a){if(I!==0){clearInterval(I);I=0}if(a)a()},Save:function(e,f,g,h){if(z===1){Edbox.DataStatistic.ClickEvent("Save","Editor",B)}else if(z===2){Edbox.DataStatistic.ClickEvent("Save","LibraryEditor",B)}e=JSON.parse(JSON.stringify(e));Log("编辑器开始保存 ",e);BaseInfoVerified(e,function(){if(F){if(F.indexOf("BeforeSave")>-1){var d=Edbox.GetGUID();Edbox.Message.AddMessageHandler(d,function(a,b){var c=a[1];if(c===undefined){c=true}if(!c){g("0");return}SaveHandle(a[0],f,g,h);Edbox.Message.Functions.Remove(d)});G.Send("BeforeSave",[d,e]);return}}SaveHandle(e,f,g,h)},g)},SaveTemp:function(d,e,f){d=JSON.parse(JSON.stringify(d));Log("编辑器保存临时作品 ",d);if(F){if(F.indexOf("BeforeSave")>-1){var g=Edbox.GetGUID();Edbox.Message.AddMessageHandler(g,function(a,b){var c=a[1];if(c===undefined){c=true}if(!c){f("0");return}SaveTempHandle(a[0],e,f);Edbox.Message.Functions.Remove(g)});G.Send("BeforeSave",[g,d]);return}}SaveTempHandle(d,e,f)},SaveAs:function(f,g,h,i){if(z===1){Edbox.DataStatistic.ClickEvent("SaveAs","Editor",B)}else if(z===2){Edbox.DataStatistic.ClickEvent("SaveAs","LibraryEditor",B)}f=JSON.parse(JSON.stringify(f));Log("编辑器开始另存为 ",f);BaseInfoVerified(f,function(d){if(F){if(F.indexOf("BeforeSaveAs")>-1){var e=Edbox.GetGUID();Edbox.Message.AddMessageHandler(e,function(a,b){var c=a[1];if(c===undefined){c=true}if(!c){h("0");return}SaveAsHandle(a[0],d.GameName,g,h,i);Edbox.Message.Functions.Remove(e)});G.Send("BeforeSaveAs",[e,f]);return}}SaveAsHandle(f,d.GameName,g,h,i)})},LoadDatas:function(k,l,n){function string10to62(a){var b='0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ'.split(''),radix=b.length,qutient=+a,arr=[];do{mod=qutient%radix;qutient=(qutient-mod)/radix;arr.unshift(b[mod])}while(qutient);return arr.join('')}Log("游戏传入的数据: ",k);Edbox.Resource.LoadDatas(k,function(a){var b=a.Datas;for(var i=0;i<b.length;i++){var c=b[i];if(c.Name==="BaseInfo"){for(var j=0;j<c.Datas.length;j++){var e=c.Datas[j];if(e.Name==="GameName"){e.Value=A;if(e.Length){e.Length=J}if(Edbox.Access===1){var f=new Date();var d=f.getDate()-1;var h=f.getHours();var m=f.getMinutes();var s=f.getSeconds();var t=((d*24+h)*60+m)*60+s;e.Value=A+string10to62(t)}}if(e.Name==="Description")e.Value=C;if(e.Name==="CoverImage"){e.GUID=D;e.Value=E}}break}}if(a.StaticData&&a.StaticData["Ranking"]&&a.StaticData["Ranking"].Datas){L=a.StaticData["Ranking"].Datas[2]}if(l){var g=JSON.parse(JSON.stringify(a));Log("编辑器处理后的数据: ",g);l(g)}},n)},Play:function(f,g,h){if(z===1){Edbox.DataStatistic.ClickEvent("Play","Editor",B)}else if(z===2){Edbox.DataStatistic.ClickEvent("Play","LibraryEditor",B)}f=JSON.parse(JSON.stringify(f));Log("编辑器试玩 ",f);BaseInfoVerified(f,function(d){if(F){if(F.indexOf("BeforePlay")>-1){var e=Edbox.GetGUID();Edbox.Message.AddMessageHandler(e,function(a,b){var c=a[1];if(c===undefined){c=true}if(!c){h("0");return}PlayHandle(a[0],g,h,f.taskId);Edbox.Message.Functions.Remove(e)});G.Send("BeforePlay",[e,f]);return}}PlayHandle(f,g,h,f.taskId)})},GotoLobby:function(){if(typeof ArgsInfo!=="undefined"&&ArgsInfo.ContainArgs("from")){if(ArgsInfo.GetArgs("from")==="pceditor"){var a=Edbox.Protocol+"://"+Edbox.GetHost("Lobby");window.open(a);return}}if(R){var b=new Object();b.Type="EditorExit";b.Url=Edbox.GetHost("Lobby");window.top.postMessage(b,"*")}else{location.href=Edbox.Protocol+"://"+Edbox.GetHost("Lobby")}},Init:function(c,d){function getLanguage(){switch(Edbox.Language){case"English":return"en_us";case"SimplifiedChinese":return"zh_cn";case"TraditionalChinese":return"zh_hk";case"TraditionalChinese_TW":return"zh_tw";case"Arabic_EG":return"ar-EG"}return"zh_cn"}x=Edbox.GameId;PackageGuid=Edbox.PackageGuid;y=Edbox.Version;z=Edbox.Access;Mode=Edbox.Mode;var e={};e.AccessToken=Edbox.AccessToken;e.MacKey=Edbox.MacKey;e.TimeStamp=Edbox.TimeStamp;e.UserId=Edbox.AccountId;e.EbUserId=Edbox.EbUserId;e.NickName=Edbox.UserName;var f=GetMessageData(Edbox.GetGUID(),e,"Init");Edbox.WebSocket.SendInitMessage(f);function getTempId(){if(z===1){Edbox.MMO.GetTempAppId(z,function(a){x=a.app_id;if(c)c()},d)}else{if(c)c()}}AddListenEvent();Edbox.MMO.GetInfo(Edbox.GameId,function(b){O=b.baseid===""?b.app_id:b.baseid;B=b.productname;y=Edbox.Version;z=Edbox.Access;x=Edbox.GameId;A="";if(b.global_name){A=b.global_name[getLanguage()]}if(!A||A===""){A=b.productname}C="";if(b.global_introduction){C=b.global_introduction[getLanguage()]}if(!C||C===""){C=b.introduction}D=b.icon;if(D!==""){Edbox.NDR.Get(D,function(a){E=a.Url;getTempId()},function(){getTempId()})}else{getTempId()}Edbox.DataStatistic.EditStart()},d)},IsSensitive:function(a,b,c){Edbox.MMO.IsSensitive(a,b,c)},GetEditRecordInfo:function(a,b,c,d){Edbox.Api.MMO.GetEditRecordInfo(a,b,c,d)},PostClearEditRecord:function(a,b){var c="-1";Edbox.Api.MMO.PostChangeNumEditRecord(c,a,b)},OpenGameEditor:function(f,g,h,i){var j=3;if(Edbox.Platform.IsPC){j=5}var k=2;Edbox.Api.MMO.GetTryPlayingInfo(f,k,j,"",function(a){var b=a.web_editor_resid;if(Edbox.Platform.IsPC){b=a.web_pc_editor_resid}if(b&&b!==""){var c={};c.Code="WEBGAME";var d={};Edbox.GameId=f;Edbox.Access=k;Edbox.Version=g;d.Url=Edbox.SetQueryString("EdboxArgs",Edbox.GetLoginInfo(),b);window.location.href=d.Url}else{var e={};e.Code="NoEditorURL";e.Message="NoEditorURL";if(i)i(e)}},function(e){var a={};a.Code="NetWorkError";a.Message=e;if(i)i(a)})},GetBaseAppId:function(){return O},IsSavedPackage:function(a){if(typeof a==="boolean"){Q=a}return Q},SaveDraftBox:function(a,b,c){SavePackage(a,null,b,c,4)},IsOpenInLobby:function(){return R},PrecheckCreate:function(d,e,f){function getTemplateInfo(b,c){if(Edbox.Access===1){if(b)b(Edbox.GameId,Edbox.Version)}else if(Edbox.Access===2){Edbox.Api.MMO.GetPersonalAppInfo(Edbox.GameId,function(a){if(b)b(a.baseid,a.base_version)},c)}else if(Edbox.Access===3){Edbox.Api.MMO.GetAppInfo(Edbox.GameId,function(a){if(b)b(a.baseid,a.base_version)},c)}}if(Edbox.Access!==1&&!f){if(d)d({data:{limit:false}});return}Edbox.Vip.PrecheckCreate(null,null,function(a){if(d)d({data:a})},e)}};if(v&&w&&!v[w]){v[w]=S}}(Edbox,"Editor"));(function(n,o){var p="";var q=Edbox.ComponentRootPath+"ThirdParty/md5/md5.min.js";var r={CN:"help.edbox-cn.101.com",US:"help.edbox.101.com"};var s="/v0.1/api/product/product/actions/get_base_help_doc";var t={Url:"/api/getGameArtInfo",Version:"v0.1",Nonce:"12345678",Secret:"DIaTKtkAMEv#8bE9"};GetHelpInfo=function(i,j,k,l,m){function GetHost(){if(Edbox.ServerKey==="US"||"Beta"===Edbox.ServerKey){return r.US}else{return r.CN}}s+="?playerid="+Edbox.EbUserId+"&productid="+i+"&version="+j;Edbox.Request.Get(Edbox.GetHost("MMO"),s,null,function(g){var h=g.isopen===1;Require([q],function(){var b=new Date().getTime();var c=t.Version+'&'+t.Nonce+'&'+b+'&'+t.Secret;var d=md5(c);var e="?version="+t.Version+"&nonce="+t.Nonce+"&time="+b+"&sign="+d+"&artkey="+g.docurl+"&lang="+k;var f=Edbox.Protocol+"://"+GetHost()+t.Url+e;$.post(f,{},function(a){if(a.code===0){if(m)m(a.message);return}else{if(h){h=a.message.status===1;p=a.message.url}if(l)l(h)}})},m)},m)};var u={GoToHelp:function(){if(p!==""){window.open(p)}},Init:function(b,c){var d=getLang(Edbox.Language);function getLang(e){switch(e){case'SimplifiedChinese':return'zh';case'English':return'en';default:return'en'}}if(Edbox.Access===1){GetHelpInfo(Edbox.GameId,Edbox.Version,d,b,c)}else if(Edbox.Access===2){Edbox.Api.MMO.GetPersonalAppInfo(Edbox.GameId,function(a){GetHelpInfo(a.baseid,a.base_version,d,b,c)})}}};if(n&&o&&!n[o]){n[o]=u}}(Edbox,"EditorHelp"));(function(d,e){var f=Edbox.Action.FeedBack;var g={GetModelData:function(a,b,c){f.GetModelData(a.modelName,b,c)},PostFeedBack:function(a,b,c){f.PostFeedBack(a.modelName,a.contact,a.feed_type,a.content,a.scene,a.subscript,a.screenshot,b,c)},GetFeedBacks:function(a,b,c){f.GetFeedBacks(a.page,b,c)},GetFeedBackReply:function(a,b,c){f.GetFeedBackReply(a.feedback_id,a.page,b,c)},GetUnReplyFeedBacks:function(a,b,c){f.GetUnReplyFeedBacks(b,c)},RefreshFeedBackState:function(a,b,c){f.RefreshFeedBackState(a.feedback_id,b,c)},PostFeedBackReply:function(a,b,c){f.PostFeedBackReply(a.feedback_id,a.content,b,c)},UploadImageToCS:function(a,b,c){f.UploadImageToCS(a.file,b,c,function(){})},GetCSImageUrl:function(a,b){var c=f.GetCSImageUrl(a.dentry_id);if(b){b(c)}}};if(d&&e&&!d[e]){d[e]=g}}(Edbox,"FeedBack"));(function(d,e){var g={Ws:null,IsOpen:false,IsBreak:false,LastMessage:"",InitMessage:"",OpenGamePlayProgressCallback:null,OpenGamePlayResultCallback:null,OpenGameEditorProgressCallback:null,OpenGameEditorResultCallback:null,ExportEditorResultCbDic:new Dictionary(),ExportEditorProgressCbDic:new Dictionary(),ExportApkResultCbDic:new Dictionary(),ExportApkProgressCbDic:new Dictionary(),ExportExeResultCbDic:new Dictionary(),ExportExeProgressCbDic:new Dictionary(),ExportH5GameResultCbDic:new Dictionary(),SearchBaiduImageResultCbDic:new Dictionary(),RequestBase64ImageCbDic:new Dictionary(),OpenScreenShooterCbDic:new Dictionary(),Connect:function(){if(Edbox.Platform.IsIPhone||Edbox.Platform.IsAndroid||Edbox.Platform.IsIpad||Edbox.Platform.IsIOS||Edbox.Platform.IsMac){return}var c=window.WebSocket||window.MozWebSocket||window.webSocket;g.Ws=new c('ws://127.0.0.1:8181/');g.Ws.onmessage=function(a){if(a.data){var b=JSON.parse(a.data);if(b){if(b.Code==="OpenGamePlayProgress"&&g.OpenGamePlayProgressCallback){g.OpenGamePlayProgressCallback(b.TaskId,JSON.parse(b.Data))}if(b.Code==="OpenGamePlayResult"&&g.OpenGamePlayResultCallback){g.OpenGamePlayResultCallback(b.TaskId,JSON.parse(b.Data))}if(b.Code==="OpenEditorProgress"&&g.OpenGameEditorProgressCallback){g.OpenGameEditorProgressCallback(b.TaskId,JSON.parse(b.Data))}if(b.Code==="OpenEditorResult"&&g.OpenGameEditorResultCallback){g.OpenGameEditorResultCallback(b.TaskId,JSON.parse(b.Data))}if(b.Code==="ExportEditorProgress"&&g.ExportEditorProgressCbDic.ContainsKey(b.TaskId)){var f=g.ExportEditorProgressCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data))}if(b.Code==="ExportEditorResult"&&g.ExportEditorResultCbDic.ContainsKey(b.TaskId)){var f=g.ExportEditorResultCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data));g.ExportEditorResultCbDic.Remove(b.TaskId);g.ExportEditorProgressCbDic.Remove(b.TaskId)}if(b.Code==="ExportApkProgress"&&g.ExportApkProgressCbDic.ContainsKey(b.TaskId)){var f=g.ExportApkProgressCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data))}if(b.Code==="ExportApkResult"&&g.ExportApkResultCbDic.ContainsKey(b.TaskId)){var f=g.ExportApkResultCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data));g.ExportApkResultCbDic.Remove(b.TaskId);g.ExportApkProgressCbDic.Remove(b.TaskId)}if(b.Code==="ExportPCGameProgress"&&g.ExportExeProgressCbDic.ContainsKey(b.TaskId)){var f=g.ExportExeProgressCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data))}if(b.Code==="ExportPCGameResult"&&g.ExportExeResultCbDic.ContainsKey(b.TaskId)){var f=g.ExportExeResultCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data));g.ExportExeResultCbDic.Remove(b.TaskId);g.ExportExeProgressCbDic.Remove(b.TaskId)}if(b.Code==="ExportH5GameResult"&&g.ExportH5GameResultCbDic.ContainsKey(b.TaskId)){var f=g.ExportH5GameResultCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data));g.ExportH5GameResultCbDic.Remove(b.TaskId)}if(b.Code==="SearchBaiduImageResult"&&g.SearchBaiduImageResultCbDic.ContainsKey(b.TaskId)){var f=g.SearchBaiduImageResultCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data));g.SearchBaiduImageResultCbDic.Remove(b.TaskId)}if(b.Code==="RequestBase64ImageResult"&&g.RequestBase64ImageCbDic.ContainsKey(b.TaskId)){var f=g.RequestBase64ImageCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data));g.RequestBase64ImageCbDic.Remove(b.TaskId)}if(b.Code==="ScreenShotResult"&&g.OpenScreenShooterCbDic.ContainsKey(b.TaskId)){var f=g.OpenScreenShooterCbDic.Get(b.TaskId);f(b.TaskId,JSON.parse(b.Data));g.OpenScreenShooterCbDic.Remove(b.TaskId)}}}};g.Ws.onopen=function(){g.IsOpen=true};g.Ws.onclose=function(){g.IsOpen=false;g.IsBreak=true;g.Ws=null};g.Ws.onerror=function(){g.IsOpen=false;g.Ws.close()}},Send:function(a){if(!g.IsOpen||g.Ws===null){g.Connect();g.LastMessage=a}else{if(g.InitMessage!==""){g.Ws.send(g.InitMessage);g.InitMessage="";setTimeout(function(){g.Ws.send(a)},500)}else{g.Ws.send(a)}}},CheckIsOpen:function(a){if(a){if(g.IsOpen){a(true)}else{g.Connect();setTimeout(function(){a(g.IsOpen)},1000)}}},SendInitMessage:function(a){if(!g.IsOpen||g.Ws===null){g.InitMessage=a}else{g.Ws.send(a)}},InArray:function(a,b){for(var i=0;i<a.length;i++){if(a[i]===b){return true}}return false},CheckStatus:function(){if(g.IsOpen&&g.Ws){if(g.LastMessage!==""){g.Ws.send(g.LastMessage);g.LastMessage=""}}},Init:function(){g.Connect();setInterval(function(){g.CheckStatus()},1000)}};g.Init();if(d&&e&&!d[e]){d[e]=g}}(Edbox,"WebSocket"));(function(d,f){var g=true;var h="time";var i={Get:function(a){if(!g)return-1;var b=localStorage.getItem(h);b=JSON.parse(b);if(!b[a]){b[a]=-1}return b[a]},Set:function(a,b){if(!g)return;var c=localStorage.getItem(h);c=JSON.parse(c);c[a]=b;localStorage.setItem(h,JSON.stringify(c))},Clear:function(){if(!g)return;localStorage.removeItem(h);localStorage.setItem(h,JSON.stringify({}))}};function Init(){try{localStorage.setItem("test",1)}catch(e){g=false}finally{if(g){localStorage.removeItem("test");if(!localStorage.getItem(h)){localStorage.setItem(h,JSON.stringify({}))}}}}Init();if(d&&f&&!d[f]){d[f]=i}}(Edbox.Editor,"SaveTimeHelp"));(function(g,h){var j=Edbox.Api.DraftBox;var k=Edbox.Editor;var l=Edbox.Resource;var m=Edbox.Editor.SaveTimeHelp;var n="";var o={NODATARESOURCE:0,ERRDRAFTDATA:1,ERRORVERSION:2};var p=null;var q={success:null,error:null,start:null,action:function(a,b){if(a)a(b)}};var r={DraftList:[],DraftMap:{},maxLength:10,initFlag:false,Add:function(a,b,c){var d={id:a.id,time:timeHandle(a.createtime),guid:a.resid};r.DraftList.unshift(d);while(r.DraftList.length>r.maxLength){r.DraftList.pop()}if(b)b(d)}};function timeHandle(a){if(typeof a!=='number'&&typeof a!=='string'){return new Date()}a=a+"";a=a.slice(0,4)+'/'+a.slice(4,6)+'/'+a.slice(6,8)+' '+a.slice(8,10)+':'+a.slice(10,12)+':'+a.slice(12,14);var b=new Date().getTimezoneOffset()*60*1000;var c=new Date(a).getTime();var d=new Date(c-b);var e=new Date(d).getTime();var f=new Date(e);return f}function getBaseId(){return k.GetBaseAppId()}function resetTimer(a,b,c){if(!a||typeof a!=='number'){if(c)c("时间参数错误");return}if(p)clearInterval(p);m.Set(Edbox.EbUserId,a);if(a===-1){if(b)b("定时关闭成功.");return}p=setInterval(saveDraft,a*1000);if(b)b(a)}function generateExtInfo(){var a="";var b=Edbox.Version;var c=getBaseId();a=c+"_"+b+"_"+new Date().getTime();return a}function getDraftVer(a){if(!a){return"1.00"}var b=a.split('_');if(!b||b.length<0){return"1.00"}return b[0]}function saveDraft(){function saveError(){q.action(q.error)}var d=JSON.parse(JSON.stringify(k.DataResource));if(d===null){saveError();return}if(k.IsSavedPackage())return;if(n===JSON.stringify(d))return;n=JSON.stringify(d);q.action(q.start);k.SaveDraftBox(d,function(c){j.AddDraft(getBaseId(),c,Edbox.Version,generateExtInfo(),function(b){r.DraftMap[c]=d;r.Add(b,function(a){q.action(q.success,a);k.NewPackageGuid=c;k.IsSavedPackage(true)},saveError)},saveError)},saveError)}var s={RegisterCallBack:function(a,b,c){q.start=a;q.success=b;q.error=c},SetAutoSaveTime:function(a,b,c){resetTimer(a,b,c)},GetList:function(b,c){if(!r.initFlag){j.GetDraftList(getBaseId(),Edbox.Version,function(a){for(var i=a.records.length-1;i>=0;--i){r.Add(a.records[i])}r.initFlag=true;if(b)b(r.DraftList)},c,'1','10')}else{if(b)b(r.DraftList)}},Reset:function(b,c,d){if(!b||!b.guid){if(d)d(o.ERRDRAFTDATA);return}if(!k||!k.DataResource){if(d)d(o.NODATARESOURCE);return}if(r.DraftMap[b.guid]){if(c)c(r.DraftMap[b.guid]);return}l.LoadDatas(k.DataResource,function(a){r.DraftMap[b.guid]=a;if(c)c(a)},d,b.guid)},GetTime:function(){return m.Get(Edbox.EbUserId)}};if(g&&h&&!g[h]){g[h]=s}}(Edbox.Editor,"DraftBox"));
