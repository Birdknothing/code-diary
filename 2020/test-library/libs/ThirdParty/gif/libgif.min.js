/**
 * Minified by jsDelivr using UglifyJS v3.3.21.
 * Original file: /npm/libgif@0.0.2/libgif.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.SuperGif=t()}(this,function(){var s=function(e){return e.reduce(function(e,t){return 2*e+t},0)},l=function(e){for(var t=[],n=7;0<=n;n--)t.push(!!(e&1<<n));return t},te=function(e){this.data=e,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return e instanceof Uint8Array?e[this.pos++]:255&e.charCodeAt(this.pos++)},this.readBytes=function(e){for(var t=[],n=0;n<e;n++)t.push(this.readByte());return t},this.read=function(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(this.readByte());return t},this.readUnsigned=function(){var e=this.readBytes(2);return(e[1]<<8)+e[0]}},ne=function(a,i){i||(i={});var r=function(e){for(var t=[],n=0;n<e;n++)t.push(a.readBytes(3));return t},o=function(){var e,t;for(t="";e=a.readByte(),t+=a.read(e),0!==e;);return t},t=function(e){e.leftPos=a.readUnsigned(),e.topPos=a.readUnsigned(),e.width=a.readUnsigned(),e.height=a.readUnsigned();var t=l(a.readByte());e.lctFlag=t.shift(),e.interlaced=t.shift(),e.sorted=t.shift(),e.reserved=t.splice(0,2),e.lctSize=s(t.splice(0,3)),e.lctFlag&&(e.lct=r(1<<e.lctSize+1)),e.lzwMinCodeSize=a.readByte();var n=o();e.pixels=function(t,r){for(var e,n,a=0,i=function(e){for(var t=0,n=0;n<e;n++)r.charCodeAt(a>>3)&1<<(7&a)&&(t|=1<<n),a++;return t},o=[],s=1<<t,l=s+1,c=t+1,d=[],h=function(){d=[],c=t+1;for(var e=0;e<s;e++)d[e]=[e];d[s]=[],d[l]=null};;)if(n=e,(e=i(c))!==s){if(e===l)break;if(e<d.length)n!==s&&d.push(d[n].concat(d[e][0]));else{if(e!==d.length)throw new Error("Invalid LZW code.");d.push(d[n].concat(d[n][0]))}o.push.apply(o,d[e]),d.length===1<<c&&c<12&&c++}else h();return o}(e.lzwMinCodeSize,n),e.interlaced&&(e.pixels=function(e,t){for(var n,r,a,i=new Array(e.length),o=e.length/t,s=[0,4,2,1],l=[8,8,4,2],c=0,d=0;d<4;d++)for(var h=s[d];h<o;h+=l[d])n=h,r=c,a=e.slice(r*t,(r+1)*t),i.splice.apply(i,[n*t,t].concat(a)),c++;return i}(e.pixels,e.width)),i.img&&i.img(e)},n=function(){var e={};switch(e.sentinel=a.readByte(),String.fromCharCode(e.sentinel)){case"!":e.type="ext",function(e){var t,n;switch(e.label=a.readByte(),e.label){case 249:e.extType="gce",function(e){a.readByte();var t=l(a.readByte());e.reserved=t.splice(0,3),e.disposalMethod=s(t.splice(0,3)),e.userInput=t.shift(),e.transparencyGiven=t.shift(),e.delayTime=a.readUnsigned(),e.transparencyIndex=a.readByte(),e.terminator=a.readByte(),i.gce&&i.gce(e)}(e);break;case 254:e.extType="com",(n=e).comment=o(),i.com&&i.com(n);break;case 1:e.extType="pte",r=e,a.readByte(),r.ptHeader=a.readBytes(12),r.ptData=o(),i.pte&&i.pte(r);break;case 255:e.extType="app",function(e){var t,n;switch(a.readByte(),e.identifier=a.read(8),e.authCode=a.read(3),e.identifier){case"NETSCAPE":n=e,a.readByte(),n.unknown=a.readByte(),n.iterations=a.readUnsigned(),n.terminator=a.readByte(),i.app&&i.app.NETSCAPE&&i.app.NETSCAPE(n);break;default:(t=e).appData=o(),i.app&&i.app[t.identifier]&&i.app[t.identifier](t)}}(e);break;default:e.extType="unknown",(t=e).data=o(),i.unknown&&i.unknown(t)}var r}(e);break;case",":e.type="img",t(e);break;case";":e.type="eof",i.eof&&i.eof(e);break;default:throw new Error("Unknown block: 0x"+e.sentinel.toString(16))}"eof"!==e.type&&setTimeout(n,0)};!function(){var e={};if(e.sig=a.read(3),e.ver=a.read(3),"GIF"!==e.sig)throw new Error("Not a GIF file.");e.width=a.readUnsigned(),e.height=a.readUnsigned();var t=l(a.readByte());e.gctFlag=t.shift(),e.colorRes=s(t.splice(0,3)),e.sorted=t.shift(),e.gctSize=s(t.splice(0,3)),e.bgColor=a.readByte(),e.pixelAspectRatio=a.readByte(),e.gctFlag&&(e.gct=r(1<<e.gctSize+1)),i.hdr&&i.hdr(e)}(),setTimeout(n,0)};return function(e){var r,a,s={vp_l:0,vp_t:0,vp_w:null,vp_h:null,c_w:null,c_h:null};for(var t in e)s[t]=e[t];s.vp_w&&s.vp_h&&(s.is_vp=!0);var n=null,i=!1,o=null,l=null,c=null,d=null,h=null,u=null,p=null,f=!0,g=!1,_=[],y=[],w=s.gif;void 0===s.auto_play&&(s.auto_play=!w.getAttribute("rel:auto_play")||"1"==w.getAttribute("rel:auto_play"));var v,m,x,b,T,B,C,P,k,S,A,E,I=s.hasOwnProperty("on_end")?s.on_end:null,U=s.hasOwnProperty("loop_delay")?s.loop_delay:0,O=s.hasOwnProperty("loop_mode")?s.loop_mode:"auto",R=!s.hasOwnProperty("draw_while_loading")||s.draw_while_loading,z=!!R&&(!s.hasOwnProperty("show_progress_bar")||s.show_progress_bar),N=s.hasOwnProperty("progressbar_height")?s.progressbar_height:25,D=s.hasOwnProperty("progressbar_background_color")?s.progressbar_background_color:"rgba(255,255,255,0.4)",F=s.hasOwnProperty("progressbar_foreground_color")?s.progressbar_foreground_color:"rgba(255,0,22,.8)",M=function(){h=c,u=c=l=o=null},G=function(){try{ne(r,J)}catch(e){H("parse")}},j=function(e,t){k.width=e*Q(),k.height=t*Q(),A.style.minWidth=e*Q()+"px",E.width=e,E.height=t,E.style.width=e+"px",E.style.height=t+"px",E.getContext("2d").setTransform(1,0,0,1,0,0)},W=function(e,t,n){if(n&&z){var r,a,i,o=N;s.is_vp?g?(a=(s.vp_t+s.vp_h-o)/Q(),o/=Q(),r=s.vp_l/Q()+e/t*(s.vp_w/Q()),i=k.width/Q()):(a=s.vp_t+s.vp_h-o,o=o,r=s.vp_l+e/t*s.vp_w,i=k.width):(a=(k.height-o)/(g?Q():1),r=e/t*k.width/(g?Q():1),i=k.width/(g?Q():1),o/=g?Q():1),S.fillStyle=D,S.fillRect(r,a,i-r,o),S.fillStyle=F,S.fillRect(0,a,r,o)}},H=function(e){n=e,a={width:w.width,height:w.height},_=[],S.fillStyle="black",S.fillRect(0,0,s.c_w?s.c_w:a.width,s.c_h?s.c_h:a.height),S.strokeStyle="red",S.lineWidth=3,S.moveTo(0,0),S.lineTo(s.c_w?s.c_w:a.width,s.c_h?s.c_h:a.height),S.moveTo(0,s.c_h?s.c_h:a.height),S.lineTo(s.c_w?s.c_w:a.width,0),S.stroke()},q=function(){u&&(_.push({data:u.getImageData(0,0,a.width,a.height),delay:l}),y.push({x:0,y:0}))},L=(b=-1,T=0,B=function(e){b+=e,P()},v=!1,m=function(){null!==I&&I(w),T++,!1!==O||T<0?x():f=v=!1},x=function(){if(v=f){B(1);var e=10*_[b].delay;e||(e=100),0==(b+1+_.length)%_.length?(e+=U,setTimeout(m,e)):setTimeout(x,e)}},P=function(){var e;(b=parseInt(b,10))>_.length-1&&(b=0),b<0&&(b=0),e=y[b],E.getContext("2d").putImageData(_[b].data,e.x,e.y),S.globalCompositeOperation="copy",S.drawImage(E,0,0)},{init:function(){n||(s.c_w&&s.c_h||S.scale(Q(),Q()),s.auto_play?C():(b=0,P()))},step:C=function(){v||setTimeout(x,0)},play:function(){f=!0,C()},pause:function(){f=!1},playing:f,move_relative:B,current_frame:function(){return b},length:function(){return _.length},move_to:function(e){b=e,P()}}),V=function(e){W(r.pos,r.data.length,e)},X=function(){},Z=function(t,n){return function(e){t(e),V(n)}},J={hdr:Z(function(e){j((a=e).width,a.height)}),gce:Z(function(e){q(),M(),o=e.transparencyGiven?e.transparencyIndex:null,l=e.delayTime,c=e.disposalMethod}),com:Z(X),app:{NETSCAPE:Z(X)},img:Z(function(e){u||(u=E.getContext("2d"));var t=_.length,n=e.lctFlag?e.lct:a.gct;0<t&&(3===h?null!==d?u.putImageData(_[d].data,0,0):u.clearRect(p.leftPos,p.topPos,p.width,p.height):d=t-1,2===h&&u.clearRect(p.leftPos,p.topPos,p.width,p.height));var r=u.getImageData(e.leftPos,e.topPos,e.width,e.height);e.pixels.forEach(function(e,t){e!==o&&(r.data[4*t+0]=n[e][0],r.data[4*t+1]=n[e][1],r.data[4*t+2]=n[e][2],r.data[4*t+3]=255)}),u.putImageData(r,e.leftPos,e.topPos),g||(S.scale(Q(),Q()),g=!0),R&&(S.drawImage(E,0,0),R=s.auto_play),p=e},!0),eof:function(e){q(),V(!1),s.c_w&&s.c_h||(k.width=a.width*Q(),k.height=a.height*Q()),L.init(),i=!1,$&&$(w)}},K=function(){var e=w.parentNode,t=document.createElement("div");k=document.createElement("canvas"),S=k.getContext("2d"),A=document.createElement("div"),E=document.createElement("canvas"),t.width=k.width=w.width,t.height=k.height=w.height,A.style.minWidth=w.width+"px",t.className="jsgif",A.className="jsgif_toolbar",t.appendChild(k),t.appendChild(A),e.insertBefore(t,w),e.removeChild(w),s.c_w&&s.c_h&&j(s.c_w,s.c_h),Y=!0},Q=function(){return s.max_width&&a&&a.width>s.max_width?s.max_width/a.width:1},Y=!1,$=!1,ee=function(e){return!(i||($=e||!1,i=!0,_=[],M(),p=u=h=d=null))};return{play:L.play,pause:L.pause,move_relative:L.move_relative,move_to:L.move_to,get_playing:function(){return f},get_canvas:function(){return k},get_canvas_scale:function(){return Q()},get_loading:function(){return i},get_auto_play:function(){return s.auto_play},get_length:function(){return L.length()},get_current_frame:function(){return L.current_frame()},load_url:function(e,t){if(ee(t)){var n=new XMLHttpRequest;n.open("GET",e,!0),"overrideMimeType"in n?n.overrideMimeType("text/plain; charset=x-user-defined"):"responseType"in n?n.responseType="arraybuffer":n.setRequestHeader("Accept-Charset","x-user-defined"),n.onloadstart=function(){Y||K()},n.onload=function(e){200!=this.status&&H("xhr - response"),"response"in this||(this.response=new VBArray(this.responseText).toArray().map(String.fromCharCode).join(""));var t=this.response;0<t.toString().indexOf("ArrayBuffer")&&(t=new Uint8Array(t)),r=new te(t),setTimeout(G,0)},n.onprogress=function(e){e.lengthComputable&&W(e.loaded,e.total,!0)},n.onerror=function(){H("xhr")},n.send()}},load:function(e){this.load_url(w.getAttribute("rel:animated_src")||w.src,e)},load_raw:function(e,t){ee(t)&&(Y||K(),r=new te(e),setTimeout(G,0))},set_frame_offset:function(e,t){y[e]?(void 0!==t.x&&(y[e].x=t.x),void 0!==t.y&&(y[e].y=t.y)):y[e]=t}}}});
//# sourceMappingURL=/sm/9e211a4e490326381db342ef691e522b297f68983518490dbc0f4495a6d8cf26.map