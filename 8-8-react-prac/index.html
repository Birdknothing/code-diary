<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <script src="../my-min-library/react.min.js"></script>
    <script src="../my-min-library/reactdom.min.js"></script>
    <script src="../my-min-library/babel.min.js"></script>
  </head>
  <body>
    <div id="app"></div>
    <script type="text/babel">
      const { Component, Fragment, useState, useEffect } = React;
      const wrap = Cp =>
        class extends Component {
          state = { x: 1 };
          ele = ele => {  
            ele.style.color = 'red';
          };
          render() {
            return (
              <Cp refHook={this.ele}>
                {this.state.x}
                {this.props.diyRender(this.state)}
              </Cp>
            );
          }
        };
      const T = props => {
        const [x, setX] = useState(() => 0);
        const cx = () => {
          setX(Math.random());
        };
        useEffect(() => {
          console.log('fuk');
          return () => {
            console.log('fuk again');
          };
        }, []);
        return (
          <div>
            <button onClick={cx}>click</button>
            {x}
          </div>
        );
      };
      const C = wrap(({ children, refHook }) => <div ref={refHook}>{children}</div>);
      setTimeout(() => {
        ReactDOM.render(12, app);
      }, 4000);
      // ReactDOM.render(<C diyRender={({ x }) => `get state x value` + x} />, app);
      ReactDOM.render(<T />, app);
    </script>
  </body>
</html>
